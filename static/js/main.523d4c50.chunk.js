(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(8),i=n.n(a),l=(n(14),n(2)),r=(n(15),[{checklist_id:0,id:-1,num_values:[{var:"difficult_intubation",val:1},{var:"diabetic",val:1}],values:[{id:1,name:"Intubation Difficile ? ",cond:{yes:[],no:[],num:[]},check:["yes","no","idk"],pre_check:{if:[{var:"difficult_intubation",op:"=",val:1}],then:"yes"},values:[{id:2,name:"A confirmer l'incubation difficile",cond:{yes:[],no:[],idk:[1],num:[]},check:["yes","no"],values:[]},{id:3,name:"2\xe8me Anesth\xe9siste",cond:{yes:[1],no:[],num:[]},check:["yes","no"],values:[]},{id:4,name:"2\xe8me Infirmi\xe8re",cond:{yes:[1],no:[],num:[]},check:["yes","no"],values:[]},{id:5,name:"Mat\xe9riel",cond:{yes:[1],no:[],num:[]},check:[],values:[{id:6,name:"Glidescope",cond:{yes:[1],no:[],num:[]},check:["yes","no"],values:[]},{id:7,name:"Laryngoscope",cond:{yes:[1],no:[],num:[]},check:["yes","no"],values:[]},{id:8,name:"Set Trach\xe9o",cond:{yes:[1],no:[],num:[]},check:["yes","no"],values:[]}]},{id:9,name:"Protocole",cond:{yes:[1],no:[],num:[]},check:["yes","no"],values:[]}]},{id:10,name:"Est-elle susceptible d'\xeatre enceinte ?",comment:"(Les donn\xe9es patient nous indiquent que la patiente est \xe2g\xe9e entre 15 et 60 ans)",cond:{yes:[],no:[],num:[{var:"yearofbirth",op:">",val:1960},{var:"gender",op:"=",val:"F"}]},check:["yes","no"],values:[{id:11,name:"Arr\xeat des r\xeagles depuis ?",cond:{yes:[10],no:[],num:[]},check:["text"],values:[]},{id:12,name:"Test disponible ?",cond:{yes:[10],no:[],num:[]},check:["yes","no"],values:[{id:13,name:"N\xe9gatif ?",cond:{yes:[12],no:[],num:[]},check:["yes","no"],values:[]},{id:14,name:"Faire test maintenant ?",cond:{yes:[],no:[12],num:[]},check:["yes","no"],values:[]},{id:15,name:"Postposer l'intervention ?",cond:{yes:[],no:[12],num:[]},check:["yes","no"],values:[]}]}]},{id:16,name:"Le patient est-il diab\xe9tique ?",cond:{yes:[],no:[],num:[]},check:["yes","no"],pre_check:{if:[{var:"diabetic",op:"=",val:1}],then:"yes"},values:[{id:17,name:"Traitement Oral ?",cond:{yes:[16],no:[],num:[]},check:["yes","no"],values:[{id:18,name:"Arr\xeat des m\xe9dicaments ?",cond:{yes:[17],no:[],num:[]},check:["yes","no"],values:[]}]},{id:19,name:"Traitement par piqure \xe0 insuline ?",cond:{yes:[16],no:[17],num:[]},check:["yes","no"],values:[{id:20,name:"Derni\xe8re piqure le ? ",cond:{yes:[19],no:[],num:[]},check:["text"],values:[]}]}]}]},{checklist_id:1,id:-1,num_values:[{var:"Intubation_difficile",val:1},{var:"Diab\xe9tique",val:1}],values:[{id:1,name:"Intubation ? ",cond:{yes:[],no:[],num:[]},check:["yes","no","?"],pre_check:{if:[{var:"Intubation_difficile",op:"=",val:1}],then:"yes"},values:[]},{id:2,name:"Test ? ",cond:{yes:[],no:[],num:[]},check:["yes","no","?"],values:[]}]}]),o=[{id:0,name:"Jean Dupont",gender:"M",yearofbirth:1970},{id:1,name:"Robert Edwards",gender:"M",yearofbirth:1998},{id:2,name:"Luc Monjeau",gender:"M",yearofbirth:1965},{id:3,name:"Eglantine Racine",gender:"F",yearofbirth:1987},{id:4,name:"Georgette Cailot",gender:"F",yearofbirth:1941}],d=["yes","no","idk","ok","not_ok"],u={yes:"Oui",no:"Non",idk:"?",ok:"OK",not_ok:"Non OK"},m=["diabetic","age","yearofbirth","difficult_intubation","gender"],b={diabetic:"Diab\xe9tique",age:"\xc2ge",yearofbirth:"Ann\xe9e de naissance",difficult_intubation:"Intubation Difficile",gender:"Genre"},j=["<",">","="],h=function(e){return u[e]},p=function(e){return b[e]},v=function(e,t,n){switch(t){case">":return e>n;case"<":return e<n;case"=":return e===n;default:return!0}};function x(e,t,n,c){this.dataArray=e,this.fileName=t,this.separator=n||",",this.addQuotes=!!c,this.addQuotes&&(this.separator='"'+this.separator+'"'),this.getDownloadLink=function(){var e=this.separator,t=this.addQuotes,n="data:text/csv;charset=utf-8",c=this.dataArray.map((function(n){var c=n.join(e);return c.length&&t?'"'+c+'"':c})).join("\n");return"function"===typeof btoa?(n+=";base64",c=btoa(c)):c=encodeURIComponent(c),this.downloadLink=this.downloadLink||n+","+c},this.getLinkElement=function(e){var t=this.getDownloadLink(),n=this.fileName;return this.linkElement=this.linkElement||function(){var c=document.createElement("a");return c.innerHTML=e||"",c.href=t,c.download=n,c}(),this.linkElement},this.download=function(e){var t=this.getLinkElement();t.style.display="none",document.body.appendChild(t),t.click(),e&&document.body.removeChild(t)}}var O=n(0);function f(e){var t=e.props,n=t.setCreationMode,c=t.setCreditMode,s=t.trimmedCanvasUrl,a=t.result,i=t.checklistList,r=t.swapchecklist;var o=function(){c(0)};return Object(O.jsx)("div",{className:"iq-top-navbar h-auto ",children:Object(O.jsx)("div",{className:"iq-navbar-custom py-2",children:Object(O.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light p-0",children:[Object(O.jsx)("div",{className:"navbar-brand pl-4",children:Object(O.jsx)("a",{href:"#",onClick:o,children:Object(O.jsx)("span",{children:"SLS"})})}),Object(O.jsx)("label",{className:"navbar-toggler p-0 m-0","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(O.jsx)("span",{className:"navbar-toggler-icon"})}),Object(O.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup",children:Object(O.jsxs)("div",{className:"navbar-nav  p-2 pl-4",children:[Object(O.jsx)("label",{className:"nav-link active m-0","aria-current":"page",onClick:o,children:"Page d'accueil"}),Object(O.jsx)("label",{className:"nav-link m-0",onClick:function(){for(var e=[["id","name","answer"]],t=0,n=Object.entries(a);t<n.length;t++){var c=Object(l.a)(n[t],2),s=c[0],i=c[1];e.push([s,i.name,i.answer])}new x(e,"my_csv.csv").download(!0)},children:"Importer la checklist"}),Object(O.jsx)("label",{className:"nav-link m-0",onClick:function(){s&&g(s,"image.png")},children:"Importer la signature"}),Object(O.jsxs)("li",{className:"nav-item dropdown",children:[Object(O.jsx)("label",{className:"nav-link dropdown-toggle m-0",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-expanded":"false",children:"Liste des checklists disponibles"}),Object(O.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",children:i.map((function(e,t){return Object(O.jsx)("li",{children:Object(O.jsxs)("label",{className:"dropdown-item m-0",onClick:function(){return r(e.checklist_id)},children:["Checklist n\xb0",e.checklist_id]})},t)}))})]}),Object(O.jsx)("label",{className:"nav-link m-0",onClick:function(){n(1)},children:"Activer le mode Cr\xe9ation"}),Object(O.jsx)("label",{className:"nav-link m-0",onClick:function(){n(0)},children:"D\xe9sactiver le mode Cr\xe9ation"}),Object(O.jsx)("label",{className:"nav-link m-0",onClick:function(){c(1)},children:"A propos"})]})})]})})})}var g=function(e,t){var n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.click()},N=n(9),y=n.n(N);function k(e){var t=e.props,n=t.sigpad,c=t.setTrimmedCanvasUrl;return Object(O.jsx)("div",{className:"container iq-card mt-5",children:Object(O.jsxs)("div",{className:"row align-items-center p-0 m-0 h-100",children:[Object(O.jsx)("div",{className:"col-sm-3 m-0 p-0 text-center text-dark",children:"Veuillez rentrer votre signature :"}),Object(O.jsx)("div",{className:"col m-0 p-0 h-100 ",children:Object(O.jsx)("div",{className:"container iq-card m-0 bg-light border",children:Object(O.jsx)("div",{className:"sigContainer",children:Object(O.jsx)(y.a,{canvasProps:{className:"sigPad"},ref:function(e){n=e}})})})}),Object(O.jsxs)("div",{className:"col-sm-3 mx-2 p-0",children:[Object(O.jsx)("div",{className:"row align-items-center p-0 m-0 mb-2 px-4",children:Object(O.jsx)("button",{type:"button",className:"btn btn-primary w-100",onClick:function(){var e=n.getTrimmedCanvas().toDataURL();c(e)},children:"Valider la signature"})}),Object(O.jsx)("div",{className:" row align-items-center p-0 m-0 px-4",children:Object(O.jsx)("button",{type:"button",className:"btn btn-warning text-dark w-100",onClick:function(){n.clear(),c(null)},children:"R\xe9initialiser"})})]})]})})}var w=n(7),C=n(6),_=n(3),S=n.n(_);function q(e){var t=e.props,n=t.checklist,s=t.setChecklist,a=t.checklistList,i=t.setChecklistList,r=t.checklistId,o=t.setChecklistId,u=t.forceUpdate,b=t.setResult,v=t.setIsDict,x=t.init_dict,f=t.setIsPreCheckDone,g=Object(c.useState)(n&&n.values.length?n.values[0]:null),N=Object(l.a)(g,2),y=N[0],k=N[1],_=Object(c.useState)(n),q=Object(l.a)(_,2),M=q[0],L=q[1],E=Object(c.useState)(n&&n.values.length?n.values[0].name:" "),Q=Object(l.a)(E,2),I=Q[0],A=Q[1],D=Object(c.useState)(n&&n.comment?n.comment:null),P=Object(l.a)(D,2),B=P[0],T=P[1],K=Object(c.useState)({}),U=Object(l.a)(K,2),F=U[0],R=U[1],z=Object(c.useState)({}),V=Object(l.a)(z,2),J=V[0],G=V[1],H=[];n&&function e(t){t.id>0&&H.push(t.id);var n,c=Object(C.a)(t.values);try{for(c.s();!(n=c.n()).done;){e(n.value)}}catch(s){c.e(s)}finally{c.f()}}(n);var W=[];y&&(W=[],d.forEach((function(e){W.push({labelKey:e,value:h(e),isSelected:y.check.includes(e)})})));var X=[];y&&(X=[],m.forEach((function(e){X.push({labelKey:e,value:p(e)})})));var Y=[];y&&(Y=[],j.forEach((function(e){Y.push({labelKey:e,value:e})})));var Z=[];function $(e){k(e&&e.values.length?e.values[0]:null),L(e),A(e&&e.values.length?e.values[0].name:""),T(e&&e.values.length?e.values[0].comment:"")}function ee(e,t,n){if(e.id===n)return console.log("found",e),M=t,k(y=e),L(M),A(y.name),R({}),T(y.comment),y;var c,s=null,a=Object(C.a)(e.values);try{for(a.s();!(c=a.n()).done;){s=ee(c.value,e,n)||s}}catch(i){a.e(i)}finally{a.f()}return s}function te(){M&&(M.values=M.values.filter((function(e){return e.id!==y.id})),$(n),u())}function ne(e,t){return e.id===t||e.values.length&&e.values.every((function(e){return ne(e)}))}function ce(e){if(!ne(y,e)){var t=Object(w.a)({},y);t.cond={yes:[],no:[],num:[]},te(),ee(n,null,e),y.values.splice(0,0,t),ee(n,null,t.id),u()}}y&&(Z=[],y.check.forEach((function(e){Z.push({labelKey:e,value:h(e)})})));var se=function(e){e.selectedKey.length&&(y.check=e.selectedKey,k(y))},ae=function(e){o(e),n=a.filter((function(t){return t.checklist_id===e}))[0],s(n),b({}),v(x),f([]),$(n)},ie=function(e){F||(F={}),F.var=e.selectedKey[0],R(F),u()},le=function(e){F||(F={}),F.op=e.selectedKey[0],R(F),u()},re=function(e){F||(F={}),F.val=e.target.value,R(F),u()},oe=function(e){J||(J={}),J.var=e.selectedKey[0],G(J),u()},de=function(e){J||(J={}),J.op=e.selectedKey[0],G(J),u()},ue=function(e){J||(J={}),J.val=e.target.value,G(J),u()},me=function(e){J||(J={}),J.then=e.selectedKey[0],G(J),u()};return Object(O.jsxs)("div",{className:"container iq-card",children:[Object(O.jsx)("div",{className:"iq-card bg-primary text-center mb-2 ",children:Object(O.jsxs)("div",{className:"card-body",children:[Object(O.jsx)("h4",{className:"card-title text-white",children:"Mode Cr\xe9ation "}),Object(O.jsx)("p",{className:"card-text  m-0",children:"Vous pouvez ajouter, supprimer, modifier des checklists et des questions ici."}),Object(O.jsx)("p",{className:"card-text ",children:"La checklist modifi\xe9e s'affiche en dessous."})]})}),Object(O.jsxs)("div",{className:"row align-items-center p-0 m-0 pb-2 border-bottom border-",children:[Object(O.jsx)("div",{className:"col align-items-center ",children:Object(O.jsxs)("div",{className:"dropdown text-center",children:[Object(O.jsx)("button",{className:"btn btn-info dropdown-toggle ",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"S\xe9lectionnez la checklist"}),Object(O.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(O.jsx)("li",{children:Object(O.jsx)("label",{className:"dropdown-item ",onClick:function(e){!function(){var e=a.length?a[a.length-1].checklist_id+1:0,t={checklist_id:e,id:-1,num_values:[],values:[{id:1,name:"",check:["yes","no"],cond:{yes:[],no:[],num:[]},values:[]}]};a.push(t),i(a),ae(e)}(),u()},children:"Nouvelle checklist"})}),a.map((function(e,t){return Object(O.jsx)("li",{children:Object(O.jsxs)("label",{className:"dropdown-item ",onClick:function(){ae(e.checklist_id)},children:["Checklist n\xb0",e.checklist_id]})},t)}))]})]})}),Object(O.jsx)("div",{className:"col align-items-center p-2",children:Object(O.jsxs)("div",{className:"iq-card card-light text-dark text-center shadow-sm mb-0 ",children:["Checklist n\xb0",r]})}),Object(O.jsx)("div",{className:"col align-items-center p-2",children:Object(O.jsxs)("div",{className:"iq-card card-light text-dark text-center shadow-sm mb-0",children:["Question n\xb0",y?y.id:" -"]})}),Object(O.jsx)("div",{className:"col align-items-center ",children:Object(O.jsxs)("div",{className:"dropdown text-center",children:[Object(O.jsx)("button",{className:"btn btn-info dropdown-toggle  ",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"S\xe9lectionnez la question"}),Object(O.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(O.jsx)("li",{children:Object(O.jsx)("label",{className:"dropdown-item ",onClick:function(e){!function(){var e=H.length?H[H.length-1]:0,t={id:e+1,name:"",cond:{yes:[],no:[],num:[]},check:["yes","no"],values:[]};n.values.push(t),ee(n,null,e+1)}(),u()},children:"Nouvelle question"})}),H.map((function(e,t){return Object(O.jsx)("li",{children:Object(O.jsxs)("label",{className:"dropdown-item ",onClick:function(){ee(n,null,e)},children:["Question n\xb0",e]})},t)}))]})]})})]}),y?Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(O.jsx)("div",{className:"col-sm-4 align-items-center text-dark ",children:"Nom de la question :"}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center",children:Object(O.jsx)("input",{className:"card w-100 mb-0 border",type:"text ","aria-label":"text input",value:I,onChange:function(e){I=e.target.value,A(I)}})}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center ",children:Object(O.jsx)("button",{className:"btn btn-change ",onClick:function(){return y.name=I,k(y),void u()},children:"Valider le nom"})})]}),Object(O.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(O.jsx)("div",{className:"col-sm-4 align-items-center  ",children:"Commentaire (optionnel) de la question :"}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center ",children:Object(O.jsx)("textarea",{className:"form-control",id:"exampleFormControlTextarea1",rows:"2",value:B||"",onChange:function(e){B=e.target.value,T(B)}})}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:Object(O.jsx)("button",{className:"btn btn-change ",onClick:function(e){B?y.comment=B:delete y.comment,u(),u()},children:"Valider le commentaire"})})]}),Object(O.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(O.jsx)("div",{className:"col-sm-4 align-items-center ",children:"Placer la question \xe0 la suite d'une autre :"}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center"}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:Object(O.jsxs)("div",{className:"dropdown text-center",children:[Object(O.jsx)("button",{className:"btn btn-change dropdown-toggle ",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",children:"Quelle question ?"}),Object(O.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(O.jsx)("li",{children:Object(O.jsx)("label",{className:"dropdown-item ",onClick:function(){return ce(-1)},children:"Au d\xe9but"})}),H.map((function(e,t){return Object(O.jsx)("li",{children:Object(O.jsxs)("label",{className:"dropdown-item ",onClick:function(){return function(e){if(!ne(y,e)){var t=Object(w.a)({},y);te(),ee(n,null,e);var c=M.values.findIndex((function(t){return t.id===e}));t.cond={yes:[],no:[],num:[]},M.values.splice(c+1,0,t),ee(n,null,t.id),u()}}(e)},children:["Question n\xb0",e]})},t)}))]})]})})]}),Object(O.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(O.jsx)("div",{className:"col-sm-4 align-items-center ",children:"Placer la question comme d\xe9coulant d'une autre :"}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center"}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:Object(O.jsxs)("div",{className:"dropdown text-center",children:[Object(O.jsx)("button",{className:"btn btn-change dropdown-toggle ",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",children:"Quelle question ?"}),Object(O.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(O.jsx)("li",{children:Object(O.jsx)("label",{className:"dropdown-item ",onClick:function(){return ce(-1)},children:"Au d\xe9but"})}),H.map((function(e,t){return Object(O.jsx)("li",{children:Object(O.jsxs)("label",{className:"dropdown-item ",onClick:function(){return ce(e)},children:["Question n\xb0",e]})},t)}))]})]})})]}),Object(O.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(O.jsx)("div",{className:"col-sm-4 align-items-center ",children:"Quelles r\xe9ponses possibles ? :"}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center"}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:H.map((function(e,t){return e===(y?y.id:0)?Object(O.jsx)(S.a,{className:"w-100 ",options:W,isMultiSelect:!0,placeholder:"Aucune",onChange:se,onClose:u},t):null}))})]}),Object(O.jsxs)("div",{className:"border-bottom m-0 p-0 text-center",children:[Object(O.jsx)("button",{className:"btn btn-change m-auto p-2 my-2 ",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseQuestionConditions","aria-expanded":"false","aria-controls":"collapseExample",children:"+ Ajouter/Supprimer des conditions sur les autres questions +"}),Object(O.jsx)("div",{className:"collapse m-0 p-0",id:"collapseQuestionConditions",children:Object(O.jsxs)("div",{className:"row align-items-center p-2 m-0",children:[Object(O.jsx)("div",{className:"col-sm-3 align-items-center ",children:"Quelles conditions sur les r\xe9ponses ? :"}),Object(O.jsx)("div",{className:"col-sm-9 align-items-center",children:d.map((function(e,t){return Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"col align-items-center p-2 my-auto",children:Object(O.jsx)("div",{className:"card card-grey text-center shadow-sm m-0  ",children:h(e)})}),Object(O.jsx)("div",{className:"col align-items-center p-2",children:Object(O.jsx)("div",{className:"input-group m-0",children:y&&y.cond[e]?y.cond[e].map((function(t,n){return Object(O.jsx)("div",{className:"input-group-prepend",children:Object(O.jsxs)("button",{className:"btn btn-outline-secondary ",type:"button",onClick:function(){return function(e,t){y.cond[e]=y.cond[e].filter((function(e){return e!==t})),console.log(y),k(y),u()}(e,t)},children:[t," "]})},n)})):null})}),Object(O.jsx)("div",{className:"col align-items-center p-2",children:Object(O.jsxs)("div",{className:"dropdown text-center",children:[Object(O.jsx)("button",{className:"btn btn-change dropdown-toggle ",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",children:"Quelle question ?"}),Object(O.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:H.map((function(t,n){return Object(O.jsx)("li",{children:Object(O.jsxs)("label",{className:"dropdown-item ",onClick:function(){return function(e,t){y.cond[e].push(t),k(y),u()}(e,t)},children:["Question n\xb0",t]})},n)}))})]})})]},t)}))})]})})]}),Object(O.jsxs)("div",{className:"border-bottom m-0 p-0 text-center",children:[Object(O.jsx)("button",{className:"btn btn-change m-auto p-2 my-2 ",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseNumConditions","aria-expanded":"false","aria-controls":"collapseExample",children:"+ Ajouter/Supprimer des conditions num\xe9riques +"}),Object(O.jsx)("div",{className:"collapse m-0 p-0",id:"collapseNumConditions",children:Object(O.jsxs)("div",{className:"col align-items-center p-2 m-0 border-bottom",children:[y&&y.cond.num?y.cond.num.map((function(e,t){return Object(O.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(O.jsx)("div",{className:"col-sm-2 align-items-center my-auto",children:Object(O.jsx)("div",{className:"card card-grey shadow-sm text-center ",children:p(e.var)})}),Object(O.jsx)("div",{className:"col-sm-2 align-items-center my-auto ",children:Object(O.jsx)("div",{className:"card card-grey shadow-sm text-center ",children:e.op})}),Object(O.jsx)("div",{className:"col-sm-2 align-items-center my-auto ",children:Object(O.jsx)("div",{className:"card card-grey shadow-sm text-center ",children:e.val})}),Object(O.jsx)("div",{className:"col-sm-2 align-items-center my-auto text-center",children:Object(O.jsx)("button",{className:"btn btn-delete ",onClick:function(){return function(e){console.log("supprimer",e),y.cond.num.splice(e,1),console.log(y.cond.num),k(y),u()}(t)},children:"x"})})]},t)})):null,Object(O.jsx)("div",{children:H.map((function(e,t){return e===(y?y.id:0)?Object(O.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(O.jsx)("div",{className:"col-sm-2 align-items-center ",children:Object(O.jsx)(S.a,{className:"w-100 ",selectStyle:"btn btn-light border",placeholder:"Quelle variable ?",options:X,onChange:ie})}),Object(O.jsx)("div",{className:"col-sm-2 align-items-center ",children:Object(O.jsx)(S.a,{className:"w-100 ",selectStyle:"btn btn-light border",placeholder:"Quel op\xe9rateur ?",options:Y,onChange:le})}),Object(O.jsx)("div",{className:"col-sm-2 align-items-center ",children:Object(O.jsx)("input",{type:"number",className:"form-control ",placeholder:"Quelle valeur ?",onChange:re})}),Object(O.jsx)("div",{className:"col-sm-2 align-items-center text-center",children:Object(O.jsx)("button",{className:"btn btn-change w-100 ",onClick:function(){F.var&&F.op&&F.val&&(y.cond.num.push({var:F.var,op:F.op,val:F.val}),k(y),u())},children:"Valider"})})]},t):null}))})]})})]}),Object(O.jsxs)("div",{className:"border-bottom m-0 p-0 text-center",children:[Object(O.jsx)("button",{className:"btn btn-change m-auto p-2 my-2 ",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapsePreCheck","aria-expanded":"false","aria-controls":"collapseExample",children:"+ Ajouter/Supprimer des conditions pour que la question soit pr\xe9-check\xe9e +"}),Object(O.jsx)("div",{className:"collapse m-0 p-0",id:"collapsePreCheck",children:Object(O.jsxs)("div",{className:"col align-items-center p-2 m-0 border-bottom",children:[y&&y.pre_check?y.pre_check.if.map((function(e,t){return Object(O.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(O.jsx)("div",{className:"col-sm-2 align-items-center my-auto",children:Object(O.jsx)("div",{className:"card card-grey shadow-sm text-center ",children:p(e.var)})}),Object(O.jsx)("div",{className:"col-sm-2 align-items-center my-auto ",children:Object(O.jsx)("div",{className:"card card-grey shadow-sm text-center ",children:e.op})}),Object(O.jsx)("div",{className:"col-sm-2 align-items-center my-auto ",children:Object(O.jsx)("div",{className:"card card-grey shadow-sm text-center ",children:e.val})}),Object(O.jsx)("div",{className:"col-sm-2 align-items-center my-auto text-center",children:Object(O.jsx)("button",{className:"btn btn-delete ",onClick:function(){return function(e){console.log("supprimer",e),y.pre_check.if.splice(e,1),y.pre_check.if.length||(y.pre_check=null),console.log(y.cond.num),k(y),u()}(t)},children:"x"})})]},t)})):null,y&&y.pre_check?Object(O.jsx)("div",{className:"row justify-content-md-center py-2",children:Object(O.jsx)("div",{className:"col-sm-2 align-items-center my-auto ",children:Object(O.jsx)("div",{className:"card card-grey shadow-sm text-center ",children:h(y.pre_check.then)})})}):null,Object(O.jsx)("div",{children:H.map((function(e,t){return e===(y?y.id:0)?Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(O.jsx)("div",{className:"col-sm-2 align-items-center ",children:Object(O.jsx)(S.a,{className:"w-100 ",selectStyle:"btn btn-light border",placeholder:"Quelle variable ?",options:X,onChange:oe})}),Object(O.jsx)("div",{className:"col-sm-2 align-items-center ",children:Object(O.jsx)(S.a,{className:"w-100 ",selectStyle:"btn btn-light border",placeholder:"Quel op\xe9rateur ?",options:Y,onChange:de})}),Object(O.jsx)("div",{className:"col-sm-2 align-items-center ",children:Object(O.jsx)("input",{type:"number",className:"form-control ",placeholder:"Quelle valeur ?",onChange:ue})}),Object(O.jsx)("div",{className:"col-sm-2 align-items-center text-center",children:Object(O.jsx)("button",{className:"btn btn-change w-100  ",onClick:function(){J.var&&J.op&&J.val&&J.then&&(y.pre_check||(y.pre_check={if:[],then:null}),y.pre_check.then=J.then,y.pre_check.if.push({var:J.var,op:J.op,val:J.val}),k(y),u())},children:"Valider"})})]}),Object(O.jsx)("div",{className:"row justify-content-md-center py-2",children:Object(O.jsx)("div",{className:"col-sm-2 align-items-center ",children:Object(O.jsx)(S.a,{className:"w-100 ",selectStyle:"btn btn-light border",placeholder:"Quel pre-check ?",options:Z,onChange:me})})})]},t):null}))})]})})]})]}):null,Object(O.jsxs)("div",{className:"row align-items-center p-2 m-0",children:[Object(O.jsx)("div",{className:"col-sm-4 align-items-center text-center",children:Object(O.jsx)("button",{className:"btn btn-change  ",onClick:function(){console.log(a,r),a=a.filter((function(e){return e.checklist_id!==r})),console.log(a),o(a.length?a[0].checklist_id:" -"),n=a.length?a[0]:null,s(n),i(a),$(n)},children:"Supprimer la checklist"})}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center text-center",children:Object(O.jsx)("button",{className:"btn btn-change  ",onClick:function(){return function(e){var t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e));console.log(t);var n=document.createElement("a");n.href=t,n.download="checklist.json",document.body.appendChild(n),n.click(),n.remove()}(a)},children:"Sauvegarder la liste de checklists"})}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center text-center",children:Object(O.jsx)("button",{className:"btn btn-change ",onClick:te,children:"Supprimer la question"})})]})]})}function M(e){e.props;return Object(O.jsx)("div",{className:"card-inv text-center position-absolute top-50 start-50 translate-middle",children:Object(O.jsxs)("div",{className:"card-body",children:[Object(O.jsx)("h5",{className:"card-title m-0 text-custom",children:"SLS Checklist App"}),Object(O.jsx)("p",{className:"card-text text-custom m-0",children:"v0.5.1"}),Object(O.jsx)("p",{className:"card-text text-custom m-0",children:"D\xe9velopp\xe9 par Th\xe9o Stassen"}),Object(O.jsx)("p",{className:"card-text text-custom",children:"theo.stassen@protonmail.com"})]})})}function L(e){var t=e.props,n=t.patientList,c=t.currentPatient,s=t.setCurrentPatient;return Object(O.jsx)("div",{className:"container iq-card p-2 py-3  ",children:Object(O.jsxs)("div",{className:"row align-items-center m-0",children:[Object(O.jsx)("div",{className:"col-sm-4 align-items-center text-dark",children:"Patient Actuel :"}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center ",children:Object(O.jsx)("div",{className:"iq-card bg-primary text-center shadow-sm m-0",children:c.name})}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center ",children:Object(O.jsxs)("div",{className:"dropdown text-center",children:[Object(O.jsx)("button",{className:"btn btn-secondary btn-round dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"S\xe9lectionnez le patient"}),Object(O.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:n.map((function(e,t){return Object(O.jsx)("li",{children:Object(O.jsx)("label",{className:"dropdown-item ",onClick:function(){return function(e){var t=n.filter((function(t){return t.id===e}))[0];s(t)}(e.id)},children:e.name})},t)}))})]})})]})})}function E(e){var t=e.init_items,n=e.item,c=e.dicts,s=e.forceUpdate,a=e.values_filter_cond,i=e.creationMode,r=Object(l.a)(c,7),o=r[0],u=r[1],m=r[2],b=r[3],j=r[4],p=r[5],x=r[6],f=function(e){var c=!o[e][n.id],s=d.filter((function(t){return t!==e}));c?(b[n.id]={name:n.name,answer:e},Q(t,t,n.id,o,u,b,s)):(delete b[n.id],Q(t,t,n.id,o,u,b,[e])),j(b),o[e][n.id]=c,s.forEach((function(e){o[e][n.id]=!1})),u(o)};n.pre_check&&!p.includes(n.id)&&n.pre_check.if.every((function(e){return v(m[e.var],e.op,e.val)}))&&(f(n.pre_check.then),p.push(n.id),x(p));var g=null,N=null;return n.values&&(N=a(n.values,o,m,i)),N&&N.length&&(g=Object(O.jsx)("ul",{className:"mb-0",children:N.map((function(e,n){return Object(O.jsx)(E,{init_items:t,item:e,dicts:c,forceUpdate:s,values_filter_cond:a},n)}))})),Object(O.jsxs)("div",{className:"container m-0 mt-3 p-0 mx-auto",children:[Object(O.jsxs)("div",{className:"row align-items-center m-0 p-0",children:[Object(O.jsxs)("div",{className:"col list-group list-group-horizontal m-0 p-0 w-auto",children:[Object(O.jsx)("div",{className:"list-group-item m-0 p-0  bg-info text-center shadow-sm my-auto",children:Object(O.jsx)("h5",{className:"card-body p-auto ",children:n.id})}),Object(O.jsxs)("div",{className:"list-group-item m-0 p-0 w-100 shadow-sm h-auto text-dark",children:[n.comment?Object(O.jsx)("div",{className:"alert alert-info m-0 mt-0 border-0 text-primary my-auto",role:"alert",children:n.comment}):null,Object(O.jsx)("div",{className:"card-body my-auto",children:n.name})]})]}),n.check.length?Object(O.jsx)("div",{className:"col-md-auto",children:Object(O.jsxs)("div",{className:"list-group list-group-horizontal ",children:[d.map((function(e,t){return n.check.includes(e)?Object(O.jsxs)("label",{className:"list-group-item m-0",children:[Object(O.jsx)("input",{type:"checkbox","aria-label":"Checkbox",checked:o[e][n.id]?1:0,onChange:function(t){f(e),s()}}),"\xa0",h(e)]},t):null})),n.check.includes("text")?Object(O.jsx)("div",{className:"input-group-prepend",children:Object(O.jsx)("div",{className:"input-group-text",children:Object(O.jsx)("input",{className:"card w-100 text-custom",type:"text","aria-label":"text input",onChange:function(e){var t=e.target.value;b[n.id]={name:n.name,answer:t},j(b)}})})}):null]})}):Object(O.jsxs)("div",{className:"col-sm-8",children:[" ",null," "]})]}),g]})}function Q(e,t,n,c,s,a,i){var l=!1;t.cond&&i.forEach((function(e){t.cond[e]&&t.cond[e].includes(n)&&(d.forEach((function(e){c[e][t.id]=!1})),delete a[t.id],l=!0)})),t.values&&t.values.length&&t.values.forEach((function(t){Q(e,t,n,c,s,a,i)})),n!==t.id&&l&&Q(e,e,t.id,c,s,a,i)}function I(){var e=Object(c.useReducer)((function(e){return e+1}),0),t=Object(l.a)(e,2)[1],n=Object(c.useState)(0),s=Object(l.a)(n,2),a=s[0],i=s[1],u=Object(c.useState)(r),m=Object(l.a)(u,2),b=m[0],j=m[1],h=Object(c.useState)(o),p=Object(l.a)(h,1)[0],v=Object(c.useState)(p[0]),x=Object(l.a)(v,2),g=x[0],N=x[1],y=Object(c.useState)(b.filter((function(e){return e.checklist_id===a}))[0]),w=Object(l.a)(y,2),C=w[0],_=w[1],S=Object(c.useState)({}),Q=Object(l.a)(S,2),I=Q[0],D=Q[1],P=Object(c.useState)([]),B=Object(l.a)(P,2),T=B[0],K=B[1],U=Object(c.useState)(0),F=Object(l.a)(U,2),R=F[0],z=F[1],V=Object(c.useState)(0),J=Object(l.a)(V,2),G=J[0],H=J[1],W=Object(c.useState)(null),X=Object(l.a)(W,2),Y=X[0],Z=X[1],$={};d.forEach((function(e){$[e]={0:!0}}));var ee=Object(c.useState)($),te=Object(l.a)(ee,2),ne=te[0],ce=te[1],se=C?C.num_values:[],ae={};se.forEach((function(e){ae[e.var]=e.val})),ae.yearofbirth=g.yearofbirth,ae.gender=g.gender;var ie=[ne,ce,ae,I,D,T,K],le=null;C&&C.values&&(le=A(C.values,ne,ae,R));return Object(O.jsxs)("div",{className:"min-vh-100 content-page",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)(f,{props:{setCreationMode:z,setCreditMode:H,trimmedCanvasUrl:Y,result:I,checklistList:b,swapchecklist:function(e){return i(e),C=b.filter((function(t){return t.checklist_id===e}))[0],_(C),D({}),ce($),K([]),C}}}),G?Object(O.jsx)(M,{props:null}):Object(O.jsxs)("div",{children:[R?Object(O.jsx)(q,{props:{checklist:C,setChecklist:_,checklistList:b,setChecklistList:j,checklistId:a,setChecklistId:i,forceUpdate:t,setResult:D,setIsDict:ce,init_dict:$,setIsPreCheckDone:K}}):Object(O.jsx)(L,{props:{patientList:p,currentPatient:g,setCurrentPatient:N}}),le?le.map((function(e,n){return Object(O.jsx)(E,{init_items:C,item:e,dicts:ie,forceUpdate:t,values_filter_cond:A,creationMode:R},n)})):null,R?null:Object(O.jsx)(k,{props:{sigpad:{},setTrimmedCanvasUrl:Z}})]})]}),Object(O.jsx)("div",{children:Object(O.jsx)("nav",{className:"navbar",children:Object(O.jsx)("label",{className:"navbar-brand",children:null})})})]})}function A(e,t,n,c){return e.filter((function(e){return Object.keys(e.cond).every((function(n){return"num"===n||!e.cond[n]||e.cond[n].every((function(e){return t[n][e]}))}))&&(c||e.cond.num.every((function(e){return!n[e.var]||v(n[e.var],e.op,e.val)})))}))}var D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,24)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),s(e),a(e),i(e)}))};i.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(I,{})}),document.getElementById("root")),D()}},[[23,1,2]]]);
//# sourceMappingURL=main.523d4c50.chunk.js.map