(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{143:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),l=n(68),s=n.n(l),i=(n(74),n(2)),r=(n(75),[[['"id"','"name"','"parent_id"','"position"','"comment"','"cond"','"check"','"color"','"pre_check"'],[1,'"Intubation Difficile ? "',-1,0,null,'{"yes":[],"no":[],"num":[]}','["yes","no","idk"]',"[0,1,2]",'{"if":[{"var":"difficult_intubation","op":"est","val":"vrai"}],"then":"yes"}'],[2,'"A confirmer l\'incubation difficile"',1,0,null,'{"yes":[],"no":[],"idk":[1],"num":[]}','["yes","no"]',"[1,0]",null],[3,'"2\xe8me Anesth\xe9siste"',1,1,null,'{"yes":[1],"no":[],"num":[]}','["yes","no"]',"[1,0]",null],[4,'"2\xe8me Infirmi\xe8re"',1,2,null,'{"yes":[1],"no":[],"num":[]}','["yes","no"]',"[0,1]",null],[5,'"Mat\xe9riel"',1,3,null,'{"yes":[1],"no":[],"num":[]}',"[]",null,null],[6,'"Glidescope"',5,0,null,'{"yes":[1],"no":[],"num":[]}','["yes","no"]',"[0,1]",null],[7,'"Laryngoscope"',5,1,null,'{"yes":[1],"no":[],"num":[]}','["yes","no"]',"[0,1]",null],[8,'"Set Trach\xe9o"',5,2,null,'{"yes":[1],"no":[],"num":[]}','["yes","no"]',"[0,1]",null],[9,'"Protocole"',1,4,null,'{"yes":[1],"no":[],"num":[]}','["yes","no"]',"[0,1]",null],[10,'"Est-elle susceptible d\'\xeatre enceinte ?"',-1,1,'"(Les donn\xe9es patient nous indiquent que la patiente est \xe2g\xe9e entre 15 et 60 ans)"','{"yes":[],"no":[],"num":[{"var":"age","op":">","val":15},{"var":"age","op":"<","val":60},{"var":"gender","op":"=","val":"F"}]}','["yes","no"]',"[0,1]",null],[11,'"Arr\xeat des r\xeagles depuis ?"',10,0,null,'{"yes":[10],"no":[],"num":[]}','["text"]',null,null],[12,'"Test disponible ?"',10,1,null,'{"yes":[10],"no":[],"num":[]}','["yes","no"]',"[0,1]",null],[13,'"N\xe9gatif ?"',12,0,null,'{"yes":[12],"no":[],"num":[]}','["yes","no"]',"[0,1]",null],[14,'"Faire test maintenant ?"',12,1,null,'{"yes":[],"no":[12],"num":[]}','["yes","no"]',"[0,1]",null],[15,'"Postposer l\'intervention ?"',12,2,null,'{"yes":[],"no":[12],"num":[]}','["yes","no"]',"[0,1]",null],[16,'"Le patient est-il diab\xe9tique ?"',-1,2,null,'{"yes":[],"no":[],"num":[]}','["yes","no"]',"[0,1]",'{"if":[{"var":"diabetic","op":"est","val":"vrai"}],"then":"yes"}'],[17,'"Traitement Oral ?"',16,0,null,'{"yes":[16],"no":[],"num":[]}','["yes","no"]',"[0,1]",null],[18,'"Arr\xeat des m\xe9dicaments ?"',17,0,null,'{"yes":[17],"no":[],"num":[]}','["yes","no"]',"[0,1]",null],[19,'"Traitement par piqure \xe0 insuline ?"',16,1,null,'{"yes":[16],"no":[17],"num":[]}','["yes","no"]',"[0,1]",null],[20,'"Derni\xe8re piqure le ? "',19,0,null,'{"yes":[19],"no":[],"num":[]}','["text"]',null,null],[21,'"Glyc\xe9mie \xe0 l\'arriv\xe9e HJ ?"',16,2,null,'{"yes":[16],"no":[],"num":[]}','["normal","anormal"]',"[0,1]",null],[22,'"Consentement chirugicaux et an\xe9st\xe9siques de p\xe8re/m\xe8re"',-1,3,'"Enfant de <15 ans, n\xe9cessite les consentement des parents"','{"yes":[],"no":[],"num":[{"var":"age","op":"<","val":15}]}',"[]",null,null],[23,'"Consentement chirugical du p\xe8re"',22,0,null,'{"yes":[],"num":[{"var":"age","op":"<","val":15}]}','["yes","no"]',"[0,1]",null],[24,'"Consentement chirurgical de la m\xe8re"',22,1,null,'{"yes":[],"num":[{"var":"age","op":"<","val":15}]}','["yes","no"]',"[0,1]",null],[25,'"Consentement anest\xe9sique du p\xe8re"',22,2,null,'{"yes":[],"num":[{"var":"age","op":"<","val":15}]}','["yes","no"]',"[0,1]",null],[26,'"Consentement anest\xe9sique de la m\xe8re"',22,3,null,'{"yes":[],"num":[{"var":"age","op":"<","val":15}]}','["yes","no"]',"[0,1]",null],[27,'"Checks vernis \xe0 ongle"',-1,4,'"Ado/Adulte, n\xe9cessite v\xe9rification du vernis \xe0 ongle et des proth\xe8ses auditives/dentaires"','{"yes":[],"num":[{"var":"age","op":">","val":10}]}','["ok","not_ok"]',"[0,1]",null],[28,'"Check Proth\xe8ses dentaires"',27,0,null,'{"yes":[],"num":[{"var":"age","op":">","val":10}]}','["ok","not_ok"]',"[0,1]",null],[29,'"Check Proth\xe8ses auditives"',27,1,null,'{"yes":[],"num":[{"var":"age","op":">","val":10}]}','["ok","not_ok"]',"[0,1]",null],[30,'"Maladie transmissible ?"',-1,5,'"Si oui, l\'information sera consid\xe9r\xe9e dans les checklists suivantes (accueil du bloc, salle de r\xe9veil)"','{"yes":[],"num":[]}','["yes","no"]',"[0,1]",null],[31,'"Par voie a\xe9rienne ? "',30,0,null,'{"yes":[30],"num":[]}','["yes","no"]',"[0,1]",null],[32,'"EPI (Masque FFP2, Visi\xe8re)"',31,0,null,'{"yes":[31],"num":[]}','["yes","no"]',"[0,1]",null],[33,'"Protocole"',31,1,null,'{"yes":[31],"num":[]}','["ok","not_ok"]',"[0,1]",null],[34,'"Par voie sanguine ? "',30,1,null,'{"yes":[30],"no":[31],"num":[]}','["yes","no"]',"[0,1]",null],[35,'"EPI (Gants, blouses, lunettes)"',34,0,null,'{"yes":[34],"num":[]}','["yes","no"]',"[0,1]",null],[36,'"Protocole"',34,1,null,'{"yes":[34],"num":[]}','["ok","not_ok"]',"[0,1]",null],[37,'"Par contact ? "',30,2,null,'{"yes":[30],"no":[31,34],"num":[]}','["yes","no"]',"[0,1]",null],[38,'"EPI"',37,0,null,'{"yes":[37],"num":[]}','["yes","no"]',"[0,1]",null],[39,'"Protocole"',37,1,null,'{"yes":[37],"num":[]}','["ok","not_ok"]',"[0,1]",null]],[['"id"','"name"','"parent_id"','"position"','"comment"','"cond"','"check"','"color"','"pre_check"'],[1,'"Intubation Difficile ? "',-1,0,null,'{"yes":[],"no":[],"num":[]}','["yes","no","idk"]',"[0,1,2]",'{"if":[{"var":"difficult_intubation","op":"est","val":"vrai"}],"then":"yes"}'],[2,'"A confirmer l\'incubation difficile"',1,0,null,'{"yes":[],"no":[],"idk":[1],"num":[]}','["yes","no"]',"[1,0]",null]]]),o=[{id:0,lastname:"Dubois",firstname:"Germaine",gender:"F",dateofbirth:"02/11/1940",diabetic:"faux",difficult_intubation:"vrai"},{id:1,lastname:"Vandamme",firstname:"Gilbert",gender:"M",dateofbirth:"08/25/1960",diabetic:"vrai",difficult_intubation:"vrai"},{id:2,lastname:"Perlot",firstname:"Claude",gender:"M",dateofbirth:"12/16/1975",diabetic:"faux",difficult_intubation:"faux"},{id:3,lastname:"Boulet",firstname:"Arnaud",gender:"M",dateofbirth:"03/17/1981",diabetic:"faux",difficult_intubation:"faux"},{id:4,lastname:"Charlier",firstname:"Emile",gender:"M",dateofbirth:"09/19/1953",diabetic:"faux",difficult_intubation:"vrai"},{id:5,lastname:"Nash",firstname:"Emilie",gender:"F",dateofbirth:"03/30/2015",diabetic:"vrai",difficult_intubation:"vrai"},{id:6,lastname:"Materne",firstname:"Marie",gender:"F",dateofbirth:"08/23/1982",diabetic:"faux",difficult_intubation:"faux"},{id:7,lastname:"Bernard",firstname:"Virginie",gender:"F",dateofbirth:"06/03/1986",diabetic:"faux",difficult_intubation:"faux"},{id:8,lastname:"Lemoine",firstname:"Karine",gender:"F",dateofbirth:"01/25/1977",diabetic:"vrai",difficult_intubation:"vrai"}],d=(n(76),["yes","no","idk","ok","not_ok","normal","anormal"]),u={yes:"Oui",no:"Non",idk:"?",ok:"OK",not_ok:"Non OK",normal:"Normal",anormal:"Anormal"},m=["diabetic","age","yearofbirth","difficult_intubation","gender"],b={diabetic:"Diab\xe9tique",age:"\xc2ge",yearofbirth:"Ann\xe9e de naissance",difficult_intubation:"Intubation Difficile",gender:"Genre"},j=["<",">","="],h=function(e){return u[e]},p=function(e){return b[e]},v=function(e,t,n){switch(t){case">":return e>n;case"<":return e<n;case"=":case"est":return e===n;default:return!0}};function x(e,t,n,c){this.dataArray=e,this.fileName=t,this.separator=n||",",this.addQuotes=!!c,this.addQuotes&&(this.separator='"'+this.separator+'"'),this.getDownloadLink=function(){var e=this.separator,t=this.addQuotes,n="data:text/csv;charset=utf-8",c=this.dataArray.map((function(n){var c=n.join(e);return c.length&&t?'"'+c+'"':c})).join("\n");return"function"===typeof btoa?(n+=";base64",c=btoa(c)):c=encodeURIComponent(c),this.downloadLink=this.downloadLink||n+","+c},this.getLinkElement=function(e){var t=this.getDownloadLink(),n=this.fileName;return this.linkElement=this.linkElement||function(){var c=document.createElement("a");return c.innerHTML=e||"",c.href=t,c.download=n,c}(),this.linkElement},this.download=function(e){var t=this.getLinkElement();t.style.display="none",document.body.appendChild(t),t.click(),e&&document.body.removeChild(t)}}function f(e){var t=[["id","name","parent_id","position","comment","cond","check","color","pre_check"]];return t=g(e,t,0,0),console.log(t),new x(t,"my_csv.csv",";").download(!0),t}function g(e,t,n,c){e.id>0&&t.push([e.id,e.name,n,c,e.comment,JSON.stringify(e.cond),JSON.stringify(e.check),JSON.stringify(e.color),JSON.stringify(e.pre_check)]);for(var a=0;a<e.values.length;a++)t=g(e.values[a],t,e.id,a);return t}function O(e,t){return N({checklist_id:t,id:-1,num_values:[],values:[]},e)}function N(e,t){var n=t.filter((function(t){return t[2]===e.id}));if(n.sort((function(e,t){return e[3]-t[3]})),!n.length)return e;for(var c=0;c<n.length;c++){var a=n[c],l={id:a[0],name:JSON.parse(a[1]),parent_id:a[2],position:a[3],comment:JSON.parse(a[4]),cond:JSON.parse(a[5]),check:JSON.parse(a[6]),color:JSON.parse(a[7]),pre_check:JSON.parse(a[8]),values:[]};l=N(l,t),e.values.push(l)}return e}var y=n(0);function k(e){var t=e.props,n=t.setCreationMode,c=t.setCreditMode,a=t.trimmedCanvasUrl,l=t.checklistList,s=t.swapchecklist,i=t.import_csv_result,r=(t.result,function(){c(0)});return Object(y.jsx)("div",{className:"iq-top-navbar h-auto ",children:Object(y.jsx)("div",{className:"iq-navbar-custom py-2",children:Object(y.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light p-0",children:[Object(y.jsx)("div",{className:"navbar-brand pl-4",children:Object(y.jsx)("a",{href:"#",onClick:r,children:Object(y.jsx)("span",{children:"SLS"})})}),Object(y.jsx)("label",{className:"navbar-toggler p-0 m-0","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(y.jsx)("span",{className:"navbar-toggler-icon"})}),Object(y.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup",children:Object(y.jsxs)("div",{className:"navbar-nav  p-2 pl-4",children:[Object(y.jsx)("label",{className:"nav-link active m-0","aria-current":"page","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:r,children:"Page d'accueil"}),Object(y.jsx)("label",{className:"nav-link m-0","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:i,children:"Importer la checklist"}),Object(y.jsx)("label",{className:"nav-link m-0","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:function(){a&&w(a,"image.png")},children:"Importer la signature"}),Object(y.jsxs)("li",{className:"nav-item dropdown",children:[Object(y.jsx)("label",{className:"nav-link dropdown-toggle m-0",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-expanded":"false",children:"Liste des checklists disponibles"}),Object(y.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",children:l.map((function(e,t){return Object(y.jsx)("li",{children:Object(y.jsxs)("label",{className:"dropdown-item m-0","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:function(){return s(e.checklist_id)},children:["Checklist n\xb0",e.checklist_id]})},t)}))})]}),Object(y.jsx)("label",{className:"nav-link m-0","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:function(){n(1)},children:"Activer le mode Cr\xe9ation"}),Object(y.jsx)("label",{className:"nav-link m-0","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:function(){n(0)},children:"D\xe9sactiver le mode Cr\xe9ation"}),Object(y.jsx)("label",{className:"nav-link m-0","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:function(){c(1)},children:"A propos"})]})})]})})})}var w=function(e,t){var n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.click()},C=n(69),_=n.n(C);function S(e){var t=e.props,n=t.sigpad,c=t.setTrimmedCanvasUrl;return Object(y.jsx)("div",{className:"container iq-card mt-5",children:Object(y.jsxs)("div",{className:"row align-items-center p-0 m-0 h-100",children:[Object(y.jsx)("div",{className:"col-sm-3 m-0 p-0 text-center text-dark",children:"Veuillez rentrer votre signature :"}),Object(y.jsx)("div",{className:"col m-0 p-0 h-100 py-2 ",children:Object(y.jsx)("div",{className:"container iq-card m-0 bg-light border",children:Object(y.jsx)("div",{className:"sigContainer",children:Object(y.jsx)(_.a,{canvasProps:{className:"sigPad"},ref:function(e){n=e}})})})}),Object(y.jsxs)("div",{className:"col-sm-3 mx-2 p-0",children:[Object(y.jsx)("div",{className:"row align-items-center p-0 m-0 mb-2 px-4",children:Object(y.jsx)("button",{type:"button",className:"btn btn-primary w-100",onClick:function(){var e=n.getTrimmedCanvas().toDataURL();c(e)},children:"Valider la signature"})}),Object(y.jsx)("div",{className:" row align-items-center p-0 m-0 px-4",children:Object(y.jsx)("button",{type:"button",className:"btn btn-warning text-dark w-100",onClick:function(){n.clear(),c(null)},children:"R\xe9initialiser"})})]})]})})}var q=n(46),M=n(45),E=n(5),P=n.n(E);function Q(e){var t=e.props,n=t.checklist,a=t.setChecklist,l=t.checklistList,s=t.setChecklistList,r=t.checklistId,o=t.setChecklistId,u=t.forceUpdate,b=t.setResult,v=t.setIsDict,x=t.init_dict,g=t.setIsPreCheckDone,O=t.currentQuestion,N=t.setCurrentQuestion,k=Object(c.useState)(n),w=Object(i.a)(k,2),C=w[0],_=w[1],S=Object(c.useState)(n&&n.values.length?n.values[0].name:" "),E=Object(i.a)(S,2),Q=E[0],I=E[1],L=Object(c.useState)(n&&n.comment?n.comment:null),A=Object(i.a)(L,2),K=A[0],D=A[1],F=Object(c.useState)({}),B=Object(i.a)(F,2),V=B[0],J=B[1],T=Object(c.useState)({}),U=Object(i.a)(T,2),R=U[0],z=U[1],G=Object(c.useState)(0),H=Object(i.a)(G,2),Y=H[0],W=H[1],X=[];n&&function e(t){t.id>0&&X.push(t.id);var n,c=Object(M.a)(t.values);try{for(c.s();!(n=c.n()).done;){e(n.value)}}catch(a){c.e(a)}finally{c.f()}}(n);var Z=[];O&&(Z=[],d.forEach((function(e){Z.push({labelKey:e,value:h(e),isSelected:O.check.includes(e)})})));var $=[];O&&($=[],m.forEach((function(e){$.push({labelKey:e,value:p(e)})})));var ee=[];O&&(ee=[],j.forEach((function(e){ee.push({labelKey:e,value:e})})));var te=[];function ne(e){N(e&&e.values.length?e.values[0]:null),_(e),I(e&&e.values.length?e.values[0].name:""),D(e&&e.values.length?e.values[0].comment:"")}function ce(e,t,n){if(e.id===n)return console.log("found",e),C=t,N(O=e),_(C),I(O.name),J({}),D(O.comment),W(!Y),O;var c,a=null,l=Object(M.a)(e.values);try{for(l.s();!(c=l.n()).done;){a=ce(c.value,e,n)||a}}catch(s){l.e(s)}finally{l.f()}return a}function ae(){C&&(C.values=C.values.filter((function(e){return e.id!==O.id})),ne(n),u())}function le(e,t){return e.id===t||e.values.length&&e.values.every((function(e){return le(e)}))}function se(e){if(!le(O,e)){var t=Object(q.a)({},O);t.cond={yes:[],no:[],num:[]},ae(),ce(n,null,e),O.values.splice(0,0,t),ce(n,null,t.id),u()}}O&&(te=[],O.check.forEach((function(e){te.push({labelKey:e,value:h(e)})})));var ie=function(e){o(e),n=l.filter((function(t){return t.checklist_id===e}))[0],a(n),b({}),v(x),g([]),W(!Y),ne(n)},re=function(e){V||(V={}),V.var&&["diabetic","difficult_intubation","gender"].includes(V.var)?V.val=e.selectedKey[0]:V.val=e.target.value,J(V),u()},oe=function(e){R||(R={}),R.var&&["diabetic","difficult_intubation","gender"].includes(R.var)?R.val=e.selectedKey[0]:R.val=e.target.value,z(R),u()},de=function(){Y=(Y+1)%4};return Object(y.jsxs)("div",{className:"container iq-card pt-2 border border-dark",children:[Object(y.jsx)("div",{className:"iq-card bg-primary text-center mb-2",children:Object(y.jsxs)("div",{className:"card-body",children:[Object(y.jsx)("h4",{className:"card-title text-white",children:"Mode Cr\xe9ation "}),Object(y.jsx)("p",{className:"card-text  m-0",children:"Vous pouvez ajouter, supprimer, modifier des checklists et des questions ici."}),Object(y.jsx)("p",{className:"card-text ",children:"La checklist modifi\xe9e s'affiche en dessous."})]})}),Object(y.jsxs)("div",{className:"row align-items-center p-0 m-0 pb-2 border-bottom border-",children:[Object(y.jsx)("div",{className:"col align-items-center ",children:Object(y.jsxs)("div",{className:"dropright text-center",children:[Object(y.jsx)("button",{className:"btn btn-info dropdown-toggle ",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"S\xe9lectionnez la checklist"}),Object(y.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(y.jsx)("li",{children:Object(y.jsx)("label",{className:"dropdown-item ",onClick:function(e){!function(){var e=l.length?l[l.length-1].checklist_id+1:0,t={checklist_id:e,id:-1,num_values:[],values:[{id:1,name:"",check:["yes","no"],color:[0,1],cond:{yes:[],no:[],num:[]},values:[]}]};l.push(t),s(l),ie(e)}(),u()},children:"Nouvelle checklist"})}),l.map((function(e,t){return Object(y.jsx)("li",{children:Object(y.jsxs)("label",{className:"dropdown-item ",onClick:function(){ie(e.checklist_id)},children:["Checklist n\xb0",e.checklist_id]})},t)}))]})]})}),Object(y.jsx)("div",{className:"col align-items-center p-2",children:Object(y.jsxs)("div",{className:"iq-card card-light text-dark text-center shadow-sm mb-0 ",children:["Checklist n\xb0",r]})}),Object(y.jsx)("div",{className:"col align-items-center p-2",children:Object(y.jsxs)("div",{className:"iq-card card-light text-dark text-center shadow-sm mb-0",children:["Question n\xb0",O?O.id:" -"]})}),Object(y.jsx)("div",{className:"col align-items-center ",children:Object(y.jsxs)("div",{className:"dropleft text-center",children:[Object(y.jsx)("button",{className:"btn btn-info dropdown-toggle  ",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"S\xe9lectionnez la question"}),Object(y.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(y.jsx)("li",{children:Object(y.jsx)("label",{className:"dropdown-item ",onClick:function(e){!function(){var e=X.length?X[X.length-1]:0,t={id:e+1,name:"",cond:{yes:[],no:[],num:[]},check:["yes","no"],color:[0,1],values:[]};n.values.push(t),ce(n,null,e+1)}(),u()},children:"Nouvelle question"})}),X.map((function(e,t){return Object(y.jsx)("li",{children:Object(y.jsxs)("label",{className:"dropdown-item ",onClick:function(){ce(n,null,e)},children:["Question n\xb0",e]})},t)}))]})]})})]}),O?Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(y.jsx)("div",{className:"col-sm-4 align-items-center text-dark ",children:"Nom de la question :"}),Object(y.jsx)("div",{className:"col-sm-4 align-items-center",children:Object(y.jsx)("input",{className:"form-control w-100 mb-0",type:"text ","aria-label":"text input",value:Q,onChange:function(e){Q=e.target.value,I(Q)}})}),Object(y.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center ",children:Object(y.jsx)("button",{className:"btn btn-warning ",onClick:function(){return O.name=Q,N(O),void u()},children:"Valider le nom"})})]}),Object(y.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(y.jsx)("div",{className:"col-sm-4 align-items-center text-dark  ",children:"Commentaire (optionnel) de la question :"}),Object(y.jsx)("div",{className:"col-sm-4 align-items-center ",children:Object(y.jsx)("textarea",{className:"form-control form-control-custom",id:"exampleFormControlTextarea1",rows:"2",value:K||"",onChange:function(e){K=e.target.value,D(K)}})}),Object(y.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:Object(y.jsx)("button",{className:"btn btn-warning ",onClick:function(e){K?O.comment=K:delete O.comment,u(),u()},children:"Valider le commentaire"})})]}),Object(y.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(y.jsx)("div",{className:"col-sm-4 align-items-center text-dark",children:"Placer la question \xe0 la suite d'une autre :"}),Object(y.jsx)("div",{className:"col-sm-4 align-items-center"}),Object(y.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:Object(y.jsxs)("div",{className:"dropleft text-center",children:[Object(y.jsx)("button",{className:"btn btn-warning dropdown-toggle ",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"Quelle question ?"}),Object(y.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(y.jsx)("li",{children:Object(y.jsx)("label",{className:"dropdown-item ",onClick:function(){return se(-1)},children:"Au d\xe9but"})}),X.map((function(e,t){return Object(y.jsx)("li",{children:Object(y.jsxs)("label",{className:"dropdown-item ",onClick:function(){return function(e){if(!le(O,e)){var t=Object(q.a)({},O);ae(),ce(n,null,e);var c=C.values.findIndex((function(t){return t.id===e}));t.cond={yes:[],no:[],num:[]},C.values.splice(c+1,0,t),ce(n,null,t.id),u()}}(e)},children:["Question n\xb0",e]})},t)}))]})]})})]}),Object(y.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(y.jsx)("div",{className:"col-sm-4 align-items-center text-dark ",children:"Placer la question comme d\xe9coulant d'une autre :"}),Object(y.jsx)("div",{className:"col-sm-4 align-items-center"}),Object(y.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:Object(y.jsxs)("div",{className:"dropleft text-center",children:[Object(y.jsx)("button",{className:"btn btn-warning dropdown-toggle ",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"Quelle question ?"}),Object(y.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(y.jsx)("li",{children:Object(y.jsx)("label",{className:"dropdown-item ",onClick:function(){return se(-1)},children:"Au d\xe9but"})}),X.map((function(e,t){return Object(y.jsx)("li",{children:Object(y.jsxs)("label",{className:"dropdown-item ",onClick:function(){return se(e)},children:["Question n\xb0",e]})},t)}))]})]})})]}),Object(y.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(y.jsx)("div",{className:"col-sm-4 align-items-center text-dark ",children:"Quelles r\xe9ponses possibles ? :"}),Object(y.jsx)("div",{className:"col-sm-4 align-items-center"}),Object(y.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:Object(y.jsx)(P.a,{className:" w-100 ",selectStyle:"btn-warning",options:Z,isMultiSelect:!0,placeholder:"Aucune",onChange:function(e){if(e.selectedKey.length){O.check=e.selectedKey;var t=O.color;console.log(t),O.check.length>=t.length?t=t.concat(new Array(O.check.length-t.length).fill(2)):t.splice(O.check.length),O.color=t,console.log(t),N(O),de(),u()}}},Y)})]}),Object(y.jsxs)("div",{className:"border-bottom m-0 py-2 text-center",children:[Object(y.jsxs)("button",{className:"btn btn-secondary m-auto p-2 my-2 ",type:"button","data-toggle":"collapse","data-target":"#collapseColors","aria-expanded":"false","aria-controls":"collapseExample",children:[Object(y.jsx)("i",{className:"las la-angle-down"})," Modifier les couleurs des questions ",Object(y.jsx)("i",{className:"las la-angle-down"})]}),Object(y.jsx)("div",{className:"collapse m-0 p-0",id:"collapseColors",children:Object(y.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(y.jsx)("div",{className:"col-sm-3 align-items-center text-dark ",children:"Avec quelles couleurs ? :"}),Object(y.jsx)("div",{className:"col-sm-9 align-items-center text-center",children:O.check.map((function(e,t){return Object(y.jsxs)("div",{className:"row",children:[Object(y.jsx)("div",{className:"col text-center justify-content-center my-4",children:Object(y.jsx)("div",{className:" iq-card card-grey text-center shadow-sm text-dark m-0",children:h(e)})}),Object(y.jsx)("div",{className:"col text-center justify-content-center my-4",children:Object(y.jsx)("div",{className:" iq-card card-grey text-center shadow-sm text-dark m-0",children:0===O.color[t]?"Vert":1===O.color[t]?"Rouge":"Gris"})}),Object(y.jsx)("div",{className:"col text-center justify-content-center my-3",children:Object(y.jsxs)("div",{className:"dropleft text-center",children:[Object(y.jsx)("button",{className:"btn btn-warning dropdown-toggle m-0 ",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"Quelle couleur ?"}),Object(y.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:["Vert","Rouge","Gris"].map((function(t,n){return Object(y.jsx)("li",{children:Object(y.jsx)("label",{className:"dropdown-item ",onClick:function(){return function(e,t){O.color[O.check.indexOf(e)]=t,N(O),u()}(e,n)},children:t})},n)}))})]})})]},t)}))})]})})]}),Object(y.jsxs)("div",{className:"border-bottom m-0 py-2 text-center",children:[Object(y.jsxs)("button",{className:"btn btn-secondary m-auto p-2 my-2 ",type:"button","data-toggle":"collapse","data-target":"#collapseQuestionConditions","aria-expanded":"false","aria-controls":"collapseExample",children:[Object(y.jsx)("i",{className:"las la-angle-down"})," Ajouter/Supprimer des conditions sur les autres questions ",Object(y.jsx)("i",{className:"las la-angle-down"})]}),Object(y.jsx)("div",{className:"collapse m-0 p-0",id:"collapseQuestionConditions",children:Object(y.jsxs)("div",{className:"row align-items-center p-2 m-0",children:[Object(y.jsx)("div",{className:"col-sm-3 align-items-center text-dark ",children:"Quelles conditions sur les r\xe9ponses ? :"}),Object(y.jsx)("div",{className:"col-sm-9 align-items-center",children:d.map((function(e,t){return Object(y.jsxs)("div",{className:"row",children:[Object(y.jsx)("div",{className:"col align-items-center p-2 my-auto",children:Object(y.jsx)("div",{className:"iq-card card-grey text-center shadow-sm m-0 text-dark ",children:h(e)})}),Object(y.jsx)("div",{className:"col align-items-center p-2",children:Object(y.jsx)("div",{className:"list-group list-group-horizontal m-0",children:O&&O.cond[e]?O.cond[e].map((function(t,n){return Object(y.jsxs)("button",{className:" list-group-item list-group-item-custom btn btn-outline-secondary ",type:"button",onClick:function(){return function(e,t){O.cond[e]=O.cond[e].filter((function(e){return e!==t})),console.log(O),N(O),u()}(e,t)},children:[t," "]},n)})):null})}),Object(y.jsx)("div",{className:"col align-items-center p-2 my-auto",children:Object(y.jsxs)("div",{className:"dropleft text-center",children:[Object(y.jsx)("button",{className:"btn btn-warning dropdown-toggle ",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"Quelle question ?"}),Object(y.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:X.map((function(t,n){return Object(y.jsx)("li",{children:Object(y.jsxs)("label",{className:"dropdown-item ",onClick:function(){return function(e,t){O.cond[e]?O.cond[e].push(t):O.cond[e]=[t],N(O),u()}(e,t)},children:["Question n\xb0",t]})},n)}))})]})})]},t)}))})]})})]}),Object(y.jsxs)("div",{className:"border-bottom m-0 py-2 text-center",children:[Object(y.jsxs)("button",{className:"btn btn-secondary m-auto p-2 my-2 ",type:"button","data-toggle":"collapse","data-target":"#collapseNumConditions","aria-expanded":"false","aria-controls":"collapseExample",children:[Object(y.jsx)("i",{className:"las la-angle-down"})," Ajouter/Supprimer des conditions num\xe9riques ",Object(y.jsx)("i",{className:"las la-angle-down"})]}),Object(y.jsx)("div",{className:"collapse m-0 p-0",id:"collapseNumConditions",children:Object(y.jsxs)("div",{className:"col align-items-center p-2 m-0",children:[O&&O.cond.num?O.cond.num.map((function(e,t){return Object(y.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(y.jsx)("div",{className:"col-sm-3 align-items-center my-auto",children:Object(y.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark ",children:p(e.var)})}),Object(y.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:Object(y.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark ",children:e.op})}),Object(y.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:Object(y.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark",children:e.val})}),Object(y.jsx)("div",{className:"col-sm-3 align-items-center my-auto text-center",children:Object(y.jsx)("button",{className:"btn btn-danger ",onClick:function(){return function(e){console.log("supprimer",e),O.cond.num.splice(e,1),console.log(O.cond.num),N(O),u()}(t)},children:Object(y.jsx)("div",{"data-icon":"\ue053",className:"icon mt-1"})})})]},t)})):null,Object(y.jsx)("div",{children:Object(y.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(y.jsx)("div",{className:"col-sm-3 align-items-center my-auto",children:Object(y.jsx)(P.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quelle variable ?",options:$,onChange:function(e){V||(V={}),(V={}).var=e.selectedKey[0],J(V),u()}},Y)}),Object(y.jsx)("div",{className:"col-sm-3 align-items-center my-auto",children:["diabetic","difficult_intubation","gender"].includes(V.var)?Object(y.jsx)("div",{children:"est"}):Object(y.jsx)(P.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quel op\xe9rateur ?",options:ee,onChange:function(e){V||(V={}),V.op=e.selectedKey[0],J(V),u()}},Y)}),Object(y.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:["diabetic","difficult_intubation"].includes(V.var)?Object(y.jsx)(P.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quelle valeur ?",options:[{labelKey:"vrai",value:"Vrai"},{labelKey:"faux",value:"Faux"}],onChange:re},V.var):Object(y.jsxs)("div",{children:[" ","gender"===V.var?Object(y.jsx)(P.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quelle valeur ?",options:[{labelKey:"F",value:"F"},{labelKey:"M",value:"M"}],onChange:re},V.var):Object(y.jsx)("input",{type:"number",className:"form-control ",placeholder:"Quelle valeur ?",onChange:re})," "]})}),Object(y.jsx)("div",{className:"col-sm-3 align-items-center text-center my-auto",children:Object(y.jsx)("button",{className:"btn btn-warning w-100 ",onClick:function(){V.var&&V.val&&["diabetic","difficult_intubation","gender"].includes(V.var)?(O.cond.num.push({var:V.var,op:"est",val:V.val}),N(O),u()):V.var&&V.op&&V.val&&(O.cond.num.push({var:V.var,op:V.op,val:V.val}),N(O),u())},children:"Valider"})})]})})]})})]}),Object(y.jsxs)("div",{className:"border-bottom m-0 py-2 text-center",children:[Object(y.jsxs)("button",{className:"btn btn-secondary m-auto p-2 my-2 ",type:"button","data-toggle":"collapse","data-target":"#collapsePreCheck","aria-expanded":"false","aria-controls":"collapseExample",children:[Object(y.jsx)("i",{className:"las la-angle-down"})," Ajouter/Supprimer des conditions pour que la question soit pr\xe9-check\xe9e ",Object(y.jsx)("i",{className:"las la-angle-down"})]}),Object(y.jsx)("div",{className:"collapse m-0 p-0",id:"collapsePreCheck",children:Object(y.jsxs)("div",{className:"col align-items-center p-2 m-0",children:[O&&O.pre_check?O.pre_check.if.map((function(e,t){return Object(y.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(y.jsx)("div",{className:"col-sm-3 align-items-center my-auto",children:Object(y.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark ",children:p(e.var)})}),Object(y.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:Object(y.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark",children:e.op})}),Object(y.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:Object(y.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark",children:e.val})}),Object(y.jsx)("div",{className:"col-sm-3 align-items-center my-auto text-center",children:Object(y.jsx)("button",{className:"btn btn-danger ",onClick:function(){return function(e){console.log("supprimer",e),O.pre_check.if.splice(e,1),O.pre_check.if.length||(O.pre_check=null),N(O),u()}(t)},children:Object(y.jsx)("div",{"data-icon":"\ue053",className:"icon mt-1"})})})]},t)})):null,O&&O.pre_check?Object(y.jsx)("div",{className:"row justify-content-md-center py-2",children:Object(y.jsx)("div",{className:"col-sm-2 align-items-center my-auto ",children:Object(y.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark",children:h(O.pre_check.then)})})}):null,Object(y.jsx)("div",{children:Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(y.jsx)("div",{className:"col-sm-3 align-items-center my-auto",children:Object(y.jsx)(P.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quelle variable ?",options:$,onChange:function(e){R||(R={}),(R={}).var=e.selectedKey[0],z(R),u()}},Y)}),Object(y.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:["diabetic","difficult_intubation","gender"].includes(R.var)?Object(y.jsx)("div",{children:"est"}):Object(y.jsx)(P.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quel op\xe9rateur ?",options:ee,onChange:function(e){R||(R={}),R.op=e.selectedKey[0],z(R),u()}},Y)}),Object(y.jsx)("div",{className:"col-sm-3 align-items-center my-auto",children:["diabetic","difficult_intubation"].includes(R.var)?Object(y.jsx)(P.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quelle valeur ?",options:[{labelKey:"vrai",value:"Vrai"},{labelKey:"faux",value:"Faux"}],onChange:oe},R.var):Object(y.jsxs)("div",{children:[" ","gender"===R.var?Object(y.jsx)(P.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quelle valeur ?",options:[{labelKey:"F",value:"F"},{labelKey:"M",value:"M"}],onChange:oe},R.var):Object(y.jsx)("input",{type:"number",className:"form-control ",placeholder:"Quelle valeur ?",onChange:oe})," "]})}),Object(y.jsx)("div",{className:"col-sm-3 align-items-center text-center my-auto",children:Object(y.jsx)("button",{className:"btn btn-warning w-100  ",onClick:function(){R.var&&R.val&&R.then&&["diabetic","difficult_intubation","gender"].includes(R.var)?(O.pre_check||(O.pre_check={if:[],then:null}),O.pre_check.then=R.then,O.pre_check.if.push({var:R.var,op:"est",val:R.val}),N(O),u()):R.var&&R.op&&R.val&&R.then&&(O.pre_check||(O.pre_check={if:[],then:null}),O.pre_check.then=R.then,O.pre_check.if.push({var:R.var,op:R.op,val:R.val}),N(O),u())},children:"Valider"})})]}),Object(y.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(y.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:Object(y.jsx)(P.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quel pre-check ?",options:te,onChange:function(e){R||(R={}),R.then=e.selectedKey[0],z(R),u()}},R.var)}),Object(y.jsx)("div",{className:"col-sm-3 align-items-center ",children:Object(y.jsx)("button",{className:"btn btn-warning w-100  ",onClick:function(){O.pre_check&&(O.pre_check.then=R.then,N(O),u())},children:"Modifier le precheck"})})]})]})})]})})]})]}):null,Object(y.jsxs)("div",{className:"row align-items-center p-2 m-0",children:[Object(y.jsx)("div",{className:"col-sm-4 align-items-center text-center",children:Object(y.jsx)("button",{className:"btn btn-danger  ",onClick:function(){console.log(l,r),l=l.filter((function(e){return e.checklist_id!==r})),console.log(l),o(l.length?l[0].checklist_id:" -"),n=l.length?l[0]:null,a(n),s(l),ne(n)},children:"Supprimer la checklist"})}),Object(y.jsx)("div",{className:"col-sm-4 align-items-center text-center",children:Object(y.jsx)("button",{className:"btn btn-warning  ",onClick:function(){return f(n)},children:"Sauvegarder la checklist"})}),Object(y.jsx)("div",{className:"col-sm-4 align-items-center text-center",children:Object(y.jsx)("button",{className:"btn btn-danger ",onClick:ae,children:"Supprimer la question"})})]})]})}function I(e){e.props;return Object(y.jsx)("div",{className:"",children:Object(y.jsx)("div",{className:"card-inv text-center",children:Object(y.jsxs)("div",{className:"card-body",children:[Object(y.jsx)("h5",{className:"card-title m-0 text-custom",children:"SLS Checklist App"}),Object(y.jsx)("p",{className:"card-text text-custom m-0",children:"v0.7"}),Object(y.jsx)("p",{className:"card-text text-custom m-0",children:"D\xe9velopp\xe9 par Th\xe9o Stassen"}),Object(y.jsx)("p",{className:"card-text text-custom",children:"theo.stassen@protonmail.com"})]})})})}function L(e){var t=e.props,n=t.patientList,c=t.currentPatient,a=t.setCurrentPatient,l=t.setIsDict,s=t.setResult,i=t.setIsPreCheckDone,r=t.forceUpdate;return Object(y.jsx)("div",{className:"container iq-card p-2 py-3 ",children:Object(y.jsxs)("div",{className:"row align-items-center m-0",children:[Object(y.jsx)("div",{className:"col-sm-4 align-items-center text-dark",children:"Patient Actuel :"}),Object(y.jsx)("div",{className:"col-sm-4 align-items-center ",children:Object(y.jsxs)("div",{className:"iq-card bg-primary text-center  m-0",children:[c.firstname,"\xa0",c.lastname]})}),Object(y.jsx)("div",{className:"col-sm-4 align-items-center ",children:Object(y.jsxs)("div",{className:"dropdown text-center",children:[Object(y.jsx)("button",{className:"btn btn-secondary btn-round dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"S\xe9lectionnez le patient"}),Object(y.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:n.map((function(e,t){return Object(y.jsx)("li",{children:Object(y.jsxs)("label",{className:"dropdown-item ",onClick:function(){return function(e){var t=n.filter((function(t){return t.id===e}))[0];a(t),s({});var c={};d.forEach((function(e){c[e]={0:!0}})),l(c),i([]),r()}(e.id)},children:[e.firstname,"\xa0",e.lastname]})},t)}))})]})})]})})}function A(e){var t=e.init_items,n=e.item,c=e.dicts,a=e.forceUpdate,l=e.values_filter_cond,s=e.creationMode,r=e.currentId,o=Object(i.a)(c,9),u=o[0],m=o[1],b=o[2],j=o[3],p=o[4],x=o[5],f=o[6],g=o[7],O=(o[8],function(e){var c=!u[e][n.id],a=d.filter((function(t){return t!==e}));c?(j[n.id]={name:n.name,answer:e},K(t,t,n.id,u,m,j,a)):(delete j[n.id],K(t,t,n.id,u,m,j,[e])),p(j),u[e][n.id]=c,a.forEach((function(e){u[e][n.id]=!1})),m(u)});n.pre_check&&!x.includes(n.id)&&n.pre_check.if.every((function(e){return v(b[e.var],e.op,e.val)}))&&(O(n.pre_check.then),x.push(n.id),f(x));var N=null,k=null;return n.values&&(k=l(n.values,u,b,s)).forEach((function(e){return!g.includes(e.id)&&e.check.length?g.push(e.id):null})),k&&k.length&&(N=Object(y.jsx)("ul",{className:"mb-0",children:k.map((function(e,n){return Object(y.jsx)(A,{init_items:t,item:e,dicts:c,forceUpdate:a,values_filter_cond:l,creationMode:s,currentId:r},n)}))})),console.log(j),console.log(g),Object(y.jsxs)("div",{className:"container p-0 mt-3 mx-auto ",children:[Object(y.jsxs)("div",{id:"question"+n.id,className:"row align-items-center m-0 p-0"+(s&&r===n.id?" border border-danger ":" "),children:[Object(y.jsxs)("div",{className:"col list-group list-group-horizontal m-0 p-0 w-auto",children:[Object(y.jsx)("div",{className:"list-group-item m-0 p-0  bg-info text-center shadow-sm my-auto",children:Object(y.jsx)("h5",{className:"card-body p-auto ",children:n.id})}),Object(y.jsxs)("div",{className:"list-group-item m-0 p-0 w-100 shadow-sm h-auto text-dark",children:[n.comment?Object(y.jsx)("div",{className:"alert alert-light m-0 mt-0 border-0 text-primary my-auto",role:"alert",children:n.comment}):null,Object(y.jsx)("div",{className:"card-body my-auto",children:n.name})]})]}),n.check.length?Object(y.jsx)("div",{className:"col-md-auto p-0 pl-3",children:Object(y.jsxs)("div",{className:"list-group list-group-horizontal ",children:[n.check.map((function(e,t){return Object(y.jsxs)("label",{className:"list-group-item list-group-item-custom btn m-0"+(n.color&&0===n.color[t]?" btn-outline-success":n.color&&1===n.color[t]?" btn-outline-danger":" btn-outline-secondary"),children:[Object(y.jsx)("input",{type:"checkbox","aria-label":"Checkbox",checked:u[e]&&u[e][n.id]?1:0,onChange:function(t){O(e),a()}}),"\xa0",h(e)]},t)})),n.check.includes("text")?Object(y.jsx)("div",{className:"input-group-prepend",children:Object(y.jsx)("div",{className:"input-group-text",children:Object(y.jsx)("input",{className:"card w-100 text-custom",type:"text","aria-label":"text input",onChange:function(e){var t=e.target.value;j[n.id]={name:n.name,answer:t},p(j)}})})}):null]})}):Object(y.jsxs)("div",{className:"col-sm-6",children:[" ",null," "]})]}),N]})}function K(e,t,n,c,a,l,s){var i=!1;t.cond&&s.forEach((function(e){t.cond[e]&&t.cond[e].includes(n)&&(d.forEach((function(e){c[e][t.id]=!1})),delete l[t.id],i=!0)})),t.values&&t.values.length&&t.values.forEach((function(t){K(e,t,n,c,a,l,s)})),n!==t.id&&i&&K(e,e,t.id,c,a,l,s)}function D(e){var t=e.section_title;return console.log(t),Object(y.jsx)("div",{className:"card p-2 px-4 mb-2 text-primary shadow-sm border-bottom border-top border-dark",children:t})}n(144);function F(e,t){return e.every((function(e){return t[e]}))}function B(e,t){for(var n=0;n<e.length;n+=1)if(!t[e[n]])return"question"+e[n-1];return""}function V(e){var t=e.visibleList,n=e.result,c=e.import_csv_result;e.checklist;return console.log(t,n),console.log(F(t,n)),console.log(B(t,n)),Object(y.jsx)("div",{className:"container  mt-5 text-center",children:Object(y.jsx)("a",{onClick:function(){return F(t,n)?c():null},href:"#"+B(t,n),className:"",children:Object(y.jsx)("button",{className:"btn btn-warning text-center w-100 shadow",children:"Valider la checklist"})})})}function J(){for(var e=Object(c.useReducer)((function(e){return e+1}),0),t=Object(i.a)(e,2)[1],n=[],a=0;a<r.length;a++)n.push(O(r[a],a));console.log(n);var l=Object(c.useState)(0),s=Object(i.a)(l,2),u=s[0],m=s[1],b=Object(c.useState)(n),j=Object(i.a)(b,2),h=j[0],p=j[1],v=Object(c.useState)(o),f=Object(i.a)(v,1)[0],g=Object(c.useState)(f[0]),N=Object(i.a)(g,2),w=N[0],C=N[1],_=Object(c.useState)(h.filter((function(e){return e.checklist_id===u}))[0]),q=Object(i.a)(_,2),M=q[0],E=q[1],P=Object(c.useState)({}),K=Object(i.a)(P,2),F=K[0],B=K[1],J=Object(c.useState)([]),U=Object(i.a)(J,2),R=U[0],z=U[1],G=Object(c.useState)([]),H=Object(i.a)(G,2),Y=H[0],W=H[1],X=Object(c.useState)(M&&M.values.length?M.values[0]:null),Z=Object(i.a)(X,2),$=Z[0],ee=Z[1],te=Object(c.useState)(0),ne=Object(i.a)(te,2),ce=ne[0],ae=ne[1],le=Object(c.useState)(0),se=Object(i.a)(le,2),ie=se[0],re=se[1],oe=Object(c.useState)(null),de=Object(i.a)(oe,2),ue=de[0],me=de[1],be={};d.forEach((function(e){be[e]={0:!0}}));var je=Object(c.useState)(be),he=Object(i.a)(je,2),pe=he[0],ve=he[1],xe=M?M.num_values:[],fe={};xe.forEach((function(e){fe[e.var]=e.val}));for(var ge=0,Oe=Object.entries(w);ge<Oe.length;ge++){var Ne=Object(i.a)(Oe[ge],2),ye=Ne[0],ke=Ne[1];fe[ye]=ke}fe.age=function(e){var t=e.split("/");return(new Date).getFullYear()-t[2]}(fe.dateofbirth);var we=null;R=[],M&&M.values&&(we=T(M.values,pe,fe,ce)).forEach((function(e){return R.push(e.id)}));var Ce=[pe,ve,fe,F,B,Y,W,R,z];function _e(){for(var e=[["id","name","answer"]],t=0,n=Object.entries(F);t<n.length;t++){var c=Object(i.a)(n[t],2),a=c[0],l=c[1];e.push([a,l.name,l.answer])}new x(e,"my_csv.csv").download(!0)}return console.log(F),console.log(R),Object(y.jsxs)("div",{className:"min-vh-100 content-page iq-bg-info",children:[Object(y.jsxs)("div",{children:[Object(y.jsx)(k,{props:{setCreationMode:ae,setCreditMode:re,trimmedCanvasUrl:ue,checklistList:h,swapchecklist:function(e){m(e),M=h.filter((function(t){return t.checklist_id===e}))[0],E(M),B({});var t={};return d.forEach((function(e){t[e]={0:!0}})),ve(t),W([]),console.log("isdict after swapchecklist",pe),M},import_csv_result:_e,result:F}}),ie?Object(y.jsx)(I,{props:null}):Object(y.jsxs)("div",{children:[ce?Object(y.jsx)(Q,{props:{checklist:M,setChecklist:E,checklistList:h,setChecklistList:p,checklistId:u,setChecklistId:m,forceUpdate:t,setResult:B,setIsDict:ve,init_dict:be,setIsPreCheckDone:W,currentQuestion:$,setCurrentQuestion:ee}}):Object(y.jsx)(L,{props:{patientList:f,currentPatient:w,setCurrentPatient:C,setIsDict:ve,setResult:B,setIsPreCheckDone:W,init_dict:be,forceUpdate:t}}),Object(y.jsx)("div",{className:"container p-0 border-bottom border-right border-left border-dark",children:we?we.map((function(e,n){return Object(y.jsxs)("div",{children:[e.section_title?Object(y.jsx)(D,{section_title:e.section_title}):Object(y.jsx)("div",{className:"border-top border-dark"}),Object(y.jsx)("div",{className:"mb-3 px-3",children:Object(y.jsx)(A,{init_items:M,item:e,dicts:Ce,forceUpdate:t,values_filter_cond:T,creationMode:ce,currentId:$.id},n)})]})})):null}),Object(y.jsx)(V,{visibleList:R,result:F,import_csv_result:_e,checklist:M}),ce?null:Object(y.jsx)(S,{props:{sigpad:{},setTrimmedCanvasUrl:me}})]})]}),Object(y.jsx)("div",{children:Object(y.jsx)("nav",{className:"navbar",children:Object(y.jsx)("label",{className:"navbar-brand",children:null})})})]})}function T(e,t,n,c){return console.log(e),e.filter((function(e){return Object.keys(e.cond).every((function(n){return"num"===n||!e.cond[n]||e.cond[n].every((function(e){return t[n][e]}))}))&&(c||e.cond.num.every((function(e){return!n[e.var]||v(n[e.var],e.op,e.val)})))}))}var U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,145)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,l=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),l(e),s(e)}))};s.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(J,{})}),document.getElementById("root")),U()},74:function(e,t,n){},75:function(e,t,n){}},[[143,1,2]]]);
//# sourceMappingURL=main.56f87cb5.chunk.js.map