(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{14:function(e,t,c){},15:function(e,t,c){},23:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(8),l=c.n(a),i=(c(14),c(2)),o=(c(15),[{checklist_id:0,id:-1,num_values:[{var:"difficult_intubation",val:1},{var:"diabetic",val:1}],values:[{id:1,name:"Intubation Difficile ? ",cond:{yes:[],no:[],num:[]},check:["yes","no","idk"],pre_check:{if:[{var:"difficult_intubation",op:"=",val:1}],then:"yes"},values:[{id:2,name:"A confirmer l'incubation difficile",cond:{yes:[],no:[],idk:[1],num:[]},check:["yes","no"],values:[]},{id:3,name:"2\xe8me Anesth\xe9siste",cond:{yes:[1],no:[],num:[]},check:["yes","no"],values:[]},{id:4,name:"2\xe8me Infirmi\xe8re",cond:{yes:[1],no:[],num:[]},check:["yes","no"],values:[]},{id:5,name:"Mat\xe9riel",cond:{yes:[1],no:[],num:[]},check:[],values:[{id:6,name:"Glidescope",cond:{yes:[1],no:[],num:[]},check:["yes","no"],values:[]},{id:7,name:"Laryngoscope",cond:{yes:[1],no:[],num:[]},check:["yes","no"],values:[]},{id:8,name:"Set Trach\xe9o",cond:{yes:[1],no:[],num:[]},check:["yes","no"],values:[]}]},{id:9,name:"Protocole",cond:{yes:[1],no:[],num:[]},check:["yes","no"],values:[]}]},{id:10,name:"Est-elle susceptible d'\xeatre enceinte ?",comment:"(Les donn\xe9es patient nous indiquent que la patiente est \xe2g\xe9e entre 15 et 60 ans)",cond:{yes:[],no:[],num:[{var:"yearofbirth",op:">",val:1960},{var:"gender",op:"=",val:"F"}]},check:["yes","no"],values:[{id:11,name:"Arr\xeat des r\xeagles depuis ?",cond:{yes:[10],no:[],num:[]},check:["text"],values:[]},{id:12,name:"Test disponible ?",cond:{yes:[10],no:[],num:[]},check:["yes","no"],values:[{id:13,name:"N\xe9gatif ?",cond:{yes:[12],no:[],num:[]},check:["yes","no"],values:[]},{id:14,name:"Faire test maintenant ?",cond:{yes:[],no:[12],num:[]},check:["yes","no"],values:[]},{id:15,name:"Postposer l'intervention ?",cond:{yes:[],no:[12],num:[]},check:["yes","no"],values:[]}]}]},{id:16,name:"Le patient est-il diab\xe9tique ?",cond:{yes:[],no:[],num:[]},check:["yes","no"],pre_check:{if:[{var:"diabetic",op:"=",val:1}],then:"yes"},values:[{id:17,name:"Traitement Oral ?",cond:{yes:[16],no:[],num:[]},check:["yes","no"],values:[{id:18,name:"Arr\xeat des m\xe9dicaments ?",cond:{yes:[17],no:[],num:[]},check:["yes","no"],values:[]}]},{id:19,name:"Traitement par piqure \xe0 insuline ?",cond:{yes:[16],no:[17],num:[]},check:["yes","no"],values:[{id:20,name:"Derni\xe8re piqure le ? ",cond:{yes:[19],no:[],num:[]},check:["text"],values:[]}]}]}]},{checklist_id:1,id:-1,num_values:[{var:"Intubation_difficile",val:1},{var:"Diab\xe9tique",val:1}],values:[{id:1,name:"Intubation ? ",cond:{yes:[],no:[],num:[]},check:["yes","no","?"],pre_check:{if:[{var:"Intubation_difficile",op:"=",val:1}],then:"yes"},values:[]},{id:2,name:"Test ? ",cond:{yes:[],no:[],num:[]},check:["yes","no","?"],values:[]}]}]),r=[{id:0,name:"Jean Dupont",gender:"M",yearofbirth:1970},{id:1,name:"Robert Edwards",gender:"M",yearofbirth:1998},{id:2,name:"Luc Monjeau",gender:"M",yearofbirth:1965},{id:3,name:"Eglantine Racine",gender:"F",yearofbirth:1987},{id:4,name:"Georgette Cailot",gender:"F",yearofbirth:1941}],d=["yes","no","idk","ok","not_ok"],m={yes:"Oui",no:"Non",idk:"?",ok:"OK",not_ok:"Non OK"},u=["diabetic","age","yearofbirth","difficult_intubation","gender"],b={diabetic:"Diab\xe9tique",age:"\xc2ge",yearofbirth:"Ann\xe9e de naissance",difficult_intubation:"Intubation Difficile",gender:"Genre"},j=["<",">","="],h=function(e){return m[e]},x=function(e){return b[e]},p=function(e,t,c){switch(t){case">":return e>c;case"<":return e<c;case"=":return e===c;default:return!0}};function v(e,t,c,n){this.dataArray=e,this.fileName=t,this.separator=c||",",this.addQuotes=!!n,this.addQuotes&&(this.separator='"'+this.separator+'"'),this.getDownloadLink=function(){var e=this.separator,t=this.addQuotes,c="data:text/csv;charset=utf-8",n=this.dataArray.map((function(c){var n=c.join(e);return n.length&&t?'"'+n+'"':n})).join("\n");return"function"===typeof btoa?(c+=";base64",n=btoa(n)):n=encodeURIComponent(n),this.downloadLink=this.downloadLink||c+","+n},this.getLinkElement=function(e){var t=this.getDownloadLink(),c=this.fileName;return this.linkElement=this.linkElement||function(){var n=document.createElement("a");return n.innerHTML=e||"",n.href=t,n.download=c,n}(),this.linkElement},this.download=function(e){var t=this.getLinkElement();t.style.display="none",document.body.appendChild(t),t.click(),e&&document.body.removeChild(t)}}var O=c(0);function f(e){var t=e.props,c=t.setCreationMode,n=t.setCreditMode,s=t.trimmedCanvasUrl,a=t.result,l=t.checklistList,o=t.swapchecklist;var r=function(){n(0)};return Object(O.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light border-bottom border-light shadow-sm mb-4",children:Object(O.jsxs)("div",{className:"container-fluid",children:[Object(O.jsx)("label",{className:"navbar-brand text-custom text-title",onClick:r,children:"SLS"}),Object(O.jsx)("label",{className:"navbar-toggler","data-bs-toggle":"collapse","data-bs-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(O.jsx)("span",{className:"navbar-toggler-icon"})}),Object(O.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup",children:Object(O.jsxs)("div",{className:"navbar-nav",children:[Object(O.jsx)("label",{className:"nav-link active text-custom","aria-current":"page",onClick:r,children:"Page d'accueil"}),Object(O.jsx)("label",{className:"nav-link text-custom",onClick:function(){for(var e=[["id","name","answer"]],t=0,c=Object.entries(a);t<c.length;t++){var n=Object(i.a)(c[t],2),s=n[0],l=n[1];e.push([s,l.name,l.answer])}new v(e,"my_csv.csv").download(!0)},children:"Importer la checklist"}),Object(O.jsx)("label",{className:"nav-link text-custom",onClick:function(){s&&g(s,"image.png")},children:"Importer la signature"}),Object(O.jsxs)("li",{className:"nav-item dropdown",children:[Object(O.jsx)("label",{className:"nav-link dropdown-toggle text-custom",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:"Liste des checklists disponibles"}),Object(O.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",children:l.map((function(e,t){return Object(O.jsx)("li",{children:Object(O.jsxs)("label",{className:"dropdown-item text-custom",onClick:function(){return o(e.checklist_id)},children:["Checklist n\xb0",e.checklist_id]})},t)}))})]}),Object(O.jsx)("label",{className:"nav-link text-custom",onClick:function(){c(1)},children:"Activer le mode Cr\xe9ation"}),Object(O.jsx)("label",{className:"nav-link text-custom",onClick:function(){c(0)},children:"D\xe9sactiver le mode Cr\xe9ation"}),Object(O.jsx)("label",{className:"nav-link text-custom",onClick:function(){n(1)},children:"A propos"})]})})]})})}var g=function(e,t){var c=document.createElement("a");c.href=e,c.download=t,document.body.appendChild(c),c.click()},N=c(9),y=c.n(N);function k(e){var t=e.props,c=t.sigpad,n=t.setTrimmedCanvasUrl;return Object(O.jsx)("div",{className:"container mt-5 mx-auto p-0 container-custom",children:Object(O.jsxs)("div",{className:"row align-items-center p-0 m-0 h-100",children:[Object(O.jsx)("div",{className:"col-sm-3 m-0 p-0 text-center",children:Object(O.jsx)("div",{className:"card card-grey shadow-sm mx-4",children:Object(O.jsx)("div",{className:"card-body",children:Object(O.jsx)("div",{className:"text-custom",children:"Veuillez rentrer votre signature : "})})})}),Object(O.jsx)("div",{className:"col m-0 p-0 h-100 ",children:Object(O.jsx)("div",{className:"sigContainer",children:Object(O.jsx)(y.a,{canvasProps:{className:"sigPad"},ref:function(e){c=e}})})}),Object(O.jsxs)("div",{className:"col-md-auto mx-2 p-0",children:[Object(O.jsx)("div",{className:"row align-items-center p-0 m-0 w-100 mb-2",children:Object(O.jsx)("button",{type:"button",className:"btn btn-val shadow-sm text-custom",onClick:function(){var e=c.getTrimmedCanvas().toDataURL();n(e)},children:"Valider la signature"})}),Object(O.jsx)("div",{className:" row align-items-center p-0 m-0 h-100",children:Object(O.jsx)("button",{type:"button",className:"btn btn-change shadow-sm text-custom",onClick:function(){c.clear(),n(null)},children:"R\xe9initialiser"})})]})]})})}var w=c(7),C=c(6),_=c(3),S=c.n(_);function M(e){var t=e.props,c=t.checklist,s=t.setChecklist,a=t.swapchecklist,l=t.checklistList,o=t.setChecklistList,r=t.checklistId,m=t.setChecklistId,b=t.forceUpdate,p=Object(n.useState)(c.values[0]),v=Object(i.a)(p,2),f=v[0],g=v[1],N=Object(n.useState)(c),y=Object(i.a)(N,2),k=y[0],_=y[1],M=Object(n.useState)(c.values[0].name),L=Object(i.a)(M,2),E=L[0],q=L[1],Q=Object(n.useState)(c.comment?c.comment:null),A=Object(i.a)(Q,2),I=A[0],P=A[1],B=Object(n.useState)({}),D=Object(i.a)(B,2),T=D[0],K=D[1],U=Object(n.useState)({}),F=Object(i.a)(U,2),V=F[0],R=F[1],z=[];!function e(t){t.id>0&&z.push(t.id);var c,n=Object(C.a)(t.values);try{for(n.s();!(c=n.n()).done;){e(c.value)}}catch(s){n.e(s)}finally{n.f()}}(c);var J=[];J=[],d.forEach((function(e){J.push({labelKey:e,value:h(e),isSelected:f.check.includes(e)})}));var G=[];G=[],u.forEach((function(e){G.push({labelKey:e,value:x(e)})}));var H=[];H=[],j.forEach((function(e){H.push({labelKey:e,value:e})}));var W=[];function X(e){g(e.values[0]),_(e),q(e.values[0].name)}function Y(e,t,c){e.id===c&&(console.log("found",e),k=t,g(f=e),_(k),q(f.name),K({}));var n,s=Object(C.a)(e.values);try{for(s.s();!(n=s.n()).done;){Y(n.value,e,c)}}catch(a){s.e(a)}finally{s.f()}}function Z(){k.values=k.values.filter((function(e){return e.id!==f.id})),X(c)}function $(e,t){return e.id===t||e.values.length&&e.values.every((function(e){return $(e)}))}function ee(e){if(!$(f,e)){var t=Object(w.a)({},f);Z(),Y(c,null,e);var n=k.values.findIndex((function(t){return t.id===e}));t.cond={yes:[],no:[],num:[]},k.values.splice(n+1,0,t),Y(c,null,t.id),b()}}function te(e){if(!$(f,e)){var t=Object(w.a)({},f);t.cond={yes:[],no:[],num:[]},Z(),Y(c,null,e),f.values.splice(0,0,t),Y(c,null,t.id),b()}}W=[],f.check.forEach((function(e){W.push({labelKey:e,value:h(e)})}));var ce=function(e){e.selectedKey.length&&(f.check=e.selectedKey,g(f))},ne=function(e){X(c=a(e)),b()},se=function(e){T||(T={}),T.var=e.selectedKey[0],K(T),b()},ae=function(e){T||(T={}),T.op=e.selectedKey[0],K(T),b()},le=function(e){T||(T={}),T.val=e.target.value,K(T),b()},ie=function(e){V||(V={}),V.var=e.selectedKey[0],R(V),b()},oe=function(e){V||(V={}),V.op=e.selectedKey[0],R(V),b()},re=function(e){V||(V={}),V.val=e.target.value,R(V),b()},de=function(e){V||(V={}),V.then=e.selectedKey[0],R(V),b()};return Object(O.jsxs)("div",{className:"container p-2 container-custom border border-2 shadow-sm",children:[Object(O.jsx)("div",{className:"card card-grey text-center mb-2 ",children:Object(O.jsxs)("div",{className:"card-body",children:[Object(O.jsx)("h5",{className:"card-title",children:Object(O.jsx)("div",{className:"text-custom",children:"Mode Cr\xe9ation "})}),Object(O.jsx)("p",{className:"card-text text-custom m-0",children:"Vous pouvez ajouter, supprimer, modifier des checklists et des questions ici."}),Object(O.jsx)("p",{className:"card-text text-custom",children:"La checklist modifi\xe9e s'affiche en dessous."})]})}),Object(O.jsxs)("div",{className:"row align-items-center p-0 m-0 pb-2 border-bottom border-",children:[Object(O.jsx)("div",{className:"col align-items-center ",children:Object(O.jsxs)("div",{className:"dropdown text-center",children:[Object(O.jsx)("button",{className:"btn btn-val dropdown-toggle text-custom",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",children:"S\xe9lectionnez la checklist"}),Object(O.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(O.jsx)("li",{children:Object(O.jsx)("label",{className:"dropdown-item text-custom",onClick:function(e){!function(){var e=l[l.length-1].checklist_id+1,t={checklist_id:e,id:-1,num_values:[],values:[{id:1,name:"Vide",check:["yes","no"],cond:{yes:[],no:[],num:[]},values:[]}]};l.push(t),o(l),ne(e)}(),b()},children:"Nouvelle checklist"})}),l.map((function(e,t){return Object(O.jsx)("li",{children:Object(O.jsxs)("label",{className:"dropdown-item text-custom",onClick:function(){return ne(e.checklist_id)},children:["Checklist n\xb0",e.checklist_id]})},t)}))]})]})}),Object(O.jsx)("div",{className:"col align-items-center p-2",children:Object(O.jsxs)("div",{className:"card card-grey text-center shadow-sm text-custom",children:["Checklist n\xb0",r]})}),Object(O.jsx)("div",{className:"col align-items-center p-2",children:Object(O.jsxs)("div",{className:"card card-grey text-center shadow-sm text-custom",children:["Question n\xb0",f.id]})}),Object(O.jsx)("div",{className:"col align-items-center ",children:Object(O.jsxs)("div",{className:"dropdown text-center",children:[Object(O.jsx)("button",{className:"btn btn-val dropdown-toggle text-custom ",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",children:"S\xe9lectionnez la question"}),Object(O.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(O.jsx)("li",{children:Object(O.jsx)("label",{className:"dropdown-item text-custom",onClick:function(e){!function(){var e=z[z.length-1],t={id:e+1,name:"Nom vide",cond:{yes:[],no:[],num:[]},check:["yes","no"],values:[]};c.values.push(t),Y(c,null,e+1)}(),b()},children:"Nouvelle question"})}),z.map((function(e,t){return Object(O.jsx)("li",{children:Object(O.jsxs)("label",{className:"dropdown-item text-custom",onClick:function(){Y(c,null,e)},children:["Question n\xb0",e]})},t)}))]})]})})]}),Object(O.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(O.jsx)("div",{className:"col-sm-4 align-items-center text-custom",children:"Nom de la question :"}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center",children:Object(O.jsx)("input",{className:"card w-100 text-custom",type:"text ","aria-label":"text input",value:E,onChange:function(e){E=e.target.value,q(E)}})}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center ",children:Object(O.jsx)("button",{className:"btn btn-change text-custom",onClick:function(){return f.name=E,g(f),void b()},children:"Valider le nom"})})]}),Object(O.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(O.jsx)("div",{className:"col-sm-4 align-items-center text-custom ",children:"Commentaire (optionnel) de la question :"}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center text-custom",children:Object(O.jsx)("textarea",{className:"form-control",id:"exampleFormControlTextarea1",rows:"2",value:I||"",onChange:function(e){I=e.target.value,P(I)}})}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:Object(O.jsx)("button",{className:"btn btn-change text-custom",onClick:function(e){I?f.comment=I:delete f.comment,b(),b()},children:"Valider le commentaire"})})]}),Object(O.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(O.jsx)("div",{className:"col-sm-4 align-items-center text-custom",children:"Placer la question \xe0 la suite d'une autre :"}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center"}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:Object(O.jsxs)("div",{className:"dropdown text-center",children:[Object(O.jsx)("button",{className:"btn btn-change dropdown-toggle text-custom",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",children:"Quelle question ?"}),Object(O.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(O.jsx)("li",{children:Object(O.jsx)("label",{className:"dropdown-item text-custom",onClick:function(){return ee(-1)},children:"Aucune"})}),z.map((function(e,t){return Object(O.jsx)("li",{children:Object(O.jsxs)("label",{className:"dropdown-item text-custom",onClick:function(){return ee(e)},children:["Question n\xb0",e]})},t)}))]})]})})]}),Object(O.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(O.jsx)("div",{className:"col-sm-4 align-items-center text-custom",children:"Placer la question comme d\xe9coulant d'une autre :"}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center"}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:Object(O.jsxs)("div",{className:"dropdown text-center",children:[Object(O.jsx)("button",{className:"btn btn-change dropdown-toggle text-custom",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",children:"Quelle question ?"}),Object(O.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(O.jsx)("li",{children:Object(O.jsx)("label",{className:"dropdown-item text-custom",onClick:function(){return te(-1)},children:"Aucune"})}),z.map((function(e,t){return Object(O.jsx)("li",{children:Object(O.jsxs)("label",{className:"dropdown-item text-custom",onClick:function(){return te(e)},children:["Question n\xb0",e]})},t)}))]})]})})]}),Object(O.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(O.jsx)("div",{className:"col-sm-4 align-items-center text-custom",children:"Quelles r\xe9ponses possibles ? :"}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center"}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:z.map((function(e,t){return e===f.id?Object(O.jsx)(S.a,{className:"w-100 text-custom",options:J,isMultiSelect:!0,placeholder:"Aucune",onChange:ce,onClose:b},t):null}))})]}),Object(O.jsxs)("div",{className:"border-bottom m-0 p-0 text-center",children:[Object(O.jsx)("button",{className:"btn btn-change m-auto p-2 my-2 text-custom",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseQuestionConditions","aria-expanded":"false","aria-controls":"collapseExample",children:"+ Ajouter/Supprimer des conditions sur les autres questions +"}),Object(O.jsx)("div",{className:"collapse m-0 p-0",id:"collapseQuestionConditions",children:Object(O.jsxs)("div",{className:"row align-items-center p-2 m-0",children:[Object(O.jsx)("div",{className:"col-sm-3 align-items-center text-custom",children:"Quelles conditions sur les r\xe9ponses ? :"}),Object(O.jsx)("div",{className:"col-sm-9 align-items-center",children:d.map((function(e,t){return Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"col align-items-center p-2 my-auto",children:Object(O.jsx)("div",{className:"card card-grey text-center shadow-sm m-0  text-custom",children:h(e)})}),Object(O.jsx)("div",{className:"col align-items-center p-2",children:Object(O.jsx)("div",{className:"input-group m-0",children:f.cond[e]?f.cond[e].map((function(t,c){return Object(O.jsx)("div",{className:"input-group-prepend",children:Object(O.jsxs)("button",{className:"btn btn-outline-secondary text-custom",type:"button",onClick:function(){return function(e,t){f.cond[e]=f.cond[e].filter((function(e){return e!==t})),console.log(f),g(f),b()}(e,t)},children:[t," "]})},c)})):null})}),Object(O.jsx)("div",{className:"col align-items-center p-2",children:Object(O.jsxs)("div",{className:"dropdown text-center",children:[Object(O.jsx)("button",{className:"btn btn-change dropdown-toggle text-custom",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",children:"Quelle question ?"}),Object(O.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:z.map((function(t,c){return Object(O.jsx)("li",{children:Object(O.jsxs)("label",{className:"dropdown-item text-custom",onClick:function(){return function(e,t){f.cond[e].push(t),g(f),b()}(e,t)},children:["Question n\xb0",t]})},c)}))})]})})]},t)}))})]})})]}),Object(O.jsxs)("div",{className:"border-bottom m-0 p-0 text-center",children:[Object(O.jsx)("button",{className:"btn btn-change m-auto p-2 my-2 text-custom",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseNumConditions","aria-expanded":"false","aria-controls":"collapseExample",children:"+ Ajouter/Supprimer des conditions num\xe9riques +"}),Object(O.jsx)("div",{className:"collapse m-0 p-0",id:"collapseNumConditions",children:Object(O.jsxs)("div",{className:"col align-items-center p-2 m-0 border-bottom",children:[f.cond.num?f.cond.num.map((function(e,t){return Object(O.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(O.jsx)("div",{className:"col-sm-2 align-items-center my-auto",children:Object(O.jsx)("div",{className:"card card-grey shadow-sm text-center text-custom",children:x(e.var)})}),Object(O.jsx)("div",{className:"col-sm-2 align-items-center my-auto ",children:Object(O.jsx)("div",{className:"card card-grey shadow-sm text-center text-custom",children:e.op})}),Object(O.jsx)("div",{className:"col-sm-2 align-items-center my-auto ",children:Object(O.jsx)("div",{className:"card card-grey shadow-sm text-center text-custom",children:e.val})}),Object(O.jsx)("div",{className:"col-sm-2 align-items-center my-auto text-center",children:Object(O.jsx)("button",{className:"btn btn-delete text-custom",onClick:function(){return function(e){console.log("supprimer",e),f.cond.num.splice(e,1),console.log(f.cond.num),g(f),b()}(t)},children:"x"})})]},t)})):null,Object(O.jsx)("div",{children:z.map((function(e,t){return e===f.id?Object(O.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(O.jsx)("div",{className:"col-sm-2 align-items-center ",children:Object(O.jsx)(S.a,{className:"w-100 text-custom",selectStyle:"btn btn-light border",placeholder:"Quelle variable ?",options:G,onChange:se})}),Object(O.jsx)("div",{className:"col-sm-2 align-items-center ",children:Object(O.jsx)(S.a,{className:"w-100 text-custom",selectStyle:"btn btn-light border",placeholder:"Quel op\xe9rateur ?",options:H,onChange:ae})}),Object(O.jsx)("div",{className:"col-sm-2 align-items-center ",children:Object(O.jsx)("input",{type:"number",className:"form-control text-custom",placeholder:"Quelle valeur ?",onChange:le})}),Object(O.jsx)("div",{className:"col-sm-2 align-items-center text-center",children:Object(O.jsx)("button",{className:"btn btn-change w-100 text-custom",onClick:function(){T.var&&T.op&&T.val&&(f.cond.num.push({var:T.var,op:T.op,val:T.val}),g(f),b())},children:"Valider"})})]},t):null}))})]})})]}),Object(O.jsxs)("div",{className:"border-bottom m-0 p-0 text-center",children:[Object(O.jsx)("button",{className:"btn btn-change m-auto p-2 my-2 text-custom",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapsePreCheck","aria-expanded":"false","aria-controls":"collapseExample",children:"+ Ajouter/Supprimer des conditions pour que la question soit pr\xe9-check\xe9e +"}),Object(O.jsx)("div",{className:"collapse m-0 p-0",id:"collapsePreCheck",children:Object(O.jsxs)("div",{className:"col align-items-center p-2 m-0 border-bottom",children:[f.pre_check?f.pre_check.if.map((function(e,t){return Object(O.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(O.jsx)("div",{className:"col-sm-2 align-items-center my-auto",children:Object(O.jsx)("div",{className:"card card-grey shadow-sm text-center text-custom",children:x(e.var)})}),Object(O.jsx)("div",{className:"col-sm-2 align-items-center my-auto ",children:Object(O.jsx)("div",{className:"card card-grey shadow-sm text-center text-custom",children:e.op})}),Object(O.jsx)("div",{className:"col-sm-2 align-items-center my-auto ",children:Object(O.jsx)("div",{className:"card card-grey shadow-sm text-center text-custom",children:e.val})}),Object(O.jsx)("div",{className:"col-sm-2 align-items-center my-auto text-center",children:Object(O.jsx)("button",{className:"btn btn-delete text-custom",onClick:function(){return function(e){console.log("supprimer",e),f.pre_check.if.splice(e,1),f.pre_check.if.length||(f.pre_check=null),console.log(f.cond.num),g(f),b()}(t)},children:"x"})})]},t)})):null,f.pre_check?Object(O.jsx)("div",{className:"row justify-content-md-center py-2",children:Object(O.jsx)("div",{className:"col-sm-2 align-items-center my-auto ",children:Object(O.jsx)("div",{className:"card card-grey shadow-sm text-center text-custom",children:h(f.pre_check.then)})})}):null,Object(O.jsx)("div",{children:z.map((function(e,t){return e===f.id?Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(O.jsx)("div",{className:"col-sm-2 align-items-center ",children:Object(O.jsx)(S.a,{className:"w-100 text-custom",selectStyle:"btn btn-light border",placeholder:"Quelle variable ?",options:G,onChange:ie})}),Object(O.jsx)("div",{className:"col-sm-2 align-items-center ",children:Object(O.jsx)(S.a,{className:"w-100 text-custom",selectStyle:"btn btn-light border",placeholder:"Quel op\xe9rateur ?",options:H,onChange:oe})}),Object(O.jsx)("div",{className:"col-sm-2 align-items-center ",children:Object(O.jsx)("input",{type:"number",className:"form-control text-custom",placeholder:"Quelle valeur ?",onChange:re})}),Object(O.jsx)("div",{className:"col-sm-2 align-items-center text-center",children:Object(O.jsx)("button",{className:"btn btn-change w-100  text-custom",onClick:function(){V.var&&V.op&&V.val&&V.then&&(f.pre_check||(f.pre_check={if:[],then:null}),f.pre_check.then=V.then,f.pre_check.if.push({var:V.var,op:V.op,val:V.val}),g(f),b())},children:"Valider"})})]}),Object(O.jsx)("div",{className:"row justify-content-md-center py-2",children:Object(O.jsx)("div",{className:"col-sm-2 align-items-center ",children:Object(O.jsx)(S.a,{className:"w-100 text-custom",selectStyle:"btn btn-light border",placeholder:"Quel pre-check ?",options:W,onChange:de})})})]},t):null}))})]})})]}),Object(O.jsxs)("div",{className:"row align-items-center p-2 m-0",children:[Object(O.jsx)("div",{className:"col-sm-4 align-items-center text-center",children:Object(O.jsx)("button",{className:"btn btn-change text-custom ",onClick:function(){console.log(l,r),l=l.filter((function(e){return e.checklist_id!==r})),console.log(l),m(l[0].checklist_id),c=l[0],s(c),o(l),X(c)},children:"Supprimer la checklist"})}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center text-center",children:Object(O.jsx)("button",{className:"btn btn-change text-custom ",onClick:function(){return function(e){var t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e));console.log(t);var c=document.createElement("a");c.href=t,c.download="checklist.json",document.body.appendChild(c),c.click(),c.remove()}(l)},children:"Sauvegarder la liste de checklists"})}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center text-center",children:Object(O.jsx)("button",{className:"btn btn-change text-custom",onClick:Z,children:"Supprimer la question"})})]})]})}function L(e){e.props;return Object(O.jsx)("div",{className:"card-inv text-center position-absolute top-50 start-50 translate-middle",children:Object(O.jsxs)("div",{className:"card-body",children:[Object(O.jsx)("h5",{className:"card-title m-0",children:Object(O.jsx)("text",{className:"text-custom",children:"SLS Checklist App"})}),Object(O.jsx)("p",{className:"card-text text-custom m-0",children:"v0.5.1"}),Object(O.jsx)("p",{className:"card-text text-custom m-0",children:"D\xe9velopp\xe9 par Th\xe9o Stassen"}),Object(O.jsx)("p",{className:"card-text text-custom",children:"theo.stassen@protonmail.com"})]})})}function E(e){var t=e.props,c=t.patientList,n=t.currentPatient,s=t.setCurrentPatient;return Object(O.jsx)("div",{className:"container p-2 container-custom border border-2 shadow-sm",children:Object(O.jsxs)("div",{className:"row align-items-center p-2 m-0",children:[Object(O.jsx)("div",{className:"col-sm-4 align-items-center text-custom ",children:"Patient Actuel :"}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center ",children:Object(O.jsx)("div",{className:"card card-grey text-center shadow-sm text-custom",children:n.name})}),Object(O.jsx)("div",{className:"col-sm-4 align-items-center ",children:Object(O.jsxs)("div",{className:"dropdown text-center",children:[Object(O.jsx)("button",{className:"btn btn-val dropdown-toggle text-custom",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",children:"S\xe9lectionnez le patient"}),Object(O.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:c.map((function(e,t){return Object(O.jsx)("li",{children:Object(O.jsx)("label",{className:"dropdown-item  text-custom",onClick:function(){return function(e){var t=c.filter((function(t){return t.id===e}))[0];s(t)}(e.id)},children:e.name})},t)}))})]})})]})})}function q(e){var t=e.init_items,c=e.item,n=e.dicts,s=e.forceUpdate,a=e.values_filter_cond,l=e.creationMode,o=Object(i.a)(n,7),r=o[0],m=o[1],u=o[2],b=o[3],j=o[4],x=o[5],v=o[6],f=function(e){var n=!r[e][c.id],s=d.filter((function(t){return t!==e}));n?(b[c.id]={name:c.name,answer:e},Q(t,t,c.id,r,m,b,s)):(delete b[c.id],Q(t,t,c.id,r,m,b,[e])),j(b),r[e][c.id]=n,s.forEach((function(e){r[e][c.id]=!1})),m(r)};c.pre_check&&!x.includes(c.id)&&c.pre_check.if.every((function(e){return p(u[e.var],e.op,e.val)}))&&(f(c.pre_check.then),x.push(c.id),v(x));var g=null,N=null;return c.values&&(N=a(c.values,r,u,l)),N&&N.length&&(g=Object(O.jsx)("ul",{className:"mb-0",children:N.map((function(e,c){return Object(O.jsx)(q,{init_items:t,item:e,dicts:n,forceUpdate:s,values_filter_cond:a},c)}))})),Object(O.jsxs)("div",{className:"container m-0 mt-3 p-0 mx-auto",children:[Object(O.jsxs)("div",{className:"row align-items-center m-0 p-0",children:[Object(O.jsx)("div",{className:"col-sm-1 m-0 p-0 w-auto",children:Object(O.jsx)("div",{className:"card card-grey text-center w-100 shadow-sm",children:Object(O.jsx)("div",{className:"card-body  text-custom",children:c.id})})}),Object(O.jsxs)("div",{className:"col m-0 p-0 ",children:[c.comment?Object(O.jsx)("div",{className:"alert alert-info m-0 mt-0 align- shadow-sm",role:"alert",children:Object(O.jsxs)("p",{className:"mb-0  text-custom",children:[" ",c.comment," "]})}):null,Object(O.jsx)("div",{className:"card w-100 shadow-sm",children:Object(O.jsx)("div",{className:"card-body text-custom",children:c.name})})]}),c.check.length?Object(O.jsx)("div",{className:"col-md-auto",children:Object(O.jsxs)("div",{className:"input-group ",children:[d.map((function(e,t){return c.check.includes(e)?Object(O.jsx)("div",{className:"input-group-prepend ",children:Object(O.jsxs)("div",{className:"input-group-text shadow  text-custom",children:[Object(O.jsx)("input",{type:"checkbox","aria-label":"Checkbox",checked:r[e][c.id]?1:0,onChange:function(t){f(e),s()}}),"\xa0",h(e)]})},t):null})),c.check.includes("text")?Object(O.jsx)("div",{className:"input-group-prepend",children:Object(O.jsx)("div",{className:"input-group-text",children:Object(O.jsx)("input",{className:"card w-100 text-custom",type:"text","aria-label":"text input",onChange:function(e){var t=e.target.value;b[c.id]={name:c.name,answer:t},j(b)}})})}):null]})}):Object(O.jsxs)("div",{className:"col-sm-8",children:[" ",null," "]})]}),g]})}function Q(e,t,c,n,s,a,l){var i=!1;t.cond&&l.forEach((function(e){t.cond[e]&&t.cond[e].includes(c)&&(d.forEach((function(e){n[e][t.id]=!1})),delete a[t.id],i=!0)})),t.values&&t.values.length&&t.values.forEach((function(t){Q(e,t,c,n,s,a,l)})),c!==t.id&&i&&Q(e,e,t.id,n,s,a,l)}function A(){var e=Object(n.useReducer)((function(e){return e+1}),0),t=Object(i.a)(e,2)[1],c=Object(n.useState)(0),s=Object(i.a)(c,2),a=s[0],l=s[1],m=Object(n.useState)(o),u=Object(i.a)(m,2),b=u[0],j=u[1],h=Object(n.useState)(r),x=Object(i.a)(h,1)[0],p=Object(n.useState)(x[0]),v=Object(i.a)(p,2),g=v[0],N=v[1],y=Object(n.useState)(b.filter((function(e){return e.checklist_id===a}))[0]),w=Object(i.a)(y,2),C=w[0],_=w[1],S=Object(n.useState)({}),Q=Object(i.a)(S,2),A=Q[0],P=Q[1],B=Object(n.useState)([]),D=Object(i.a)(B,2),T=D[0],K=D[1],U=Object(n.useState)(0),F=Object(i.a)(U,2),V=F[0],R=F[1],z=Object(n.useState)(0),J=Object(i.a)(z,2),G=J[0],H=J[1],W=Object(n.useState)(null),X=Object(i.a)(W,2),Y=X[0],Z=X[1],$={};d.forEach((function(e){$[e]={0:!0}}));var ee=Object(n.useState)($),te=Object(i.a)(ee,2),ce=te[0],ne=te[1],se=C.num_values,ae={};se.forEach((function(e){ae[e.var]=e.val})),ae.yearofbirth=g.yearofbirth,ae.gender=g.gender;var le=[ce,ne,ae,A,P,T,K],ie=null;C.values&&(ie=I(C.values,ce,ae,V));var oe=function(e){return l(e),C=b.filter((function(t){return t.checklist_id===e}))[0],_(C),P({}),ne($),K([]),C};return Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"bg-color-custom min-vh-100",children:[Object(O.jsx)(f,{props:{setCreationMode:R,setCreditMode:H,trimmedCanvasUrl:Y,result:A,checklistList:b,swapchecklist:oe}}),G?Object(O.jsx)(L,{props:null}):Object(O.jsxs)("div",{children:[V?Object(O.jsx)(M,{props:{checklist:C,setChecklist:_,swapchecklist:oe,checklistList:b,setChecklistList:j,checklistId:a,setChecklistId:l,forceUpdate:t}}):Object(O.jsx)(E,{props:{patientList:x,currentPatient:g,setCurrentPatient:N}}),ie?ie.map((function(e,c){return Object(O.jsx)(q,{init_items:C,item:e,dicts:le,forceUpdate:t,values_filter_cond:I,creationMode:V},c)})):null,V?null:Object(O.jsx)(k,{props:{sigpad:{},setTrimmedCanvasUrl:Z}})]})]}),Object(O.jsx)("div",{children:Object(O.jsx)("nav",{className:"navbar navbar-hidden",children:Object(O.jsx)("label",{className:"navbar-brand",children:null})})})]})}function I(e,t,c,n){return e.filter((function(e){return Object.keys(e.cond).every((function(c){return"num"===c||!e.cond[c]||e.cond[c].every((function(e){return t[c][e]}))}))&&(n||e.cond.num.every((function(e){return!c[e.var]||p(c[e.var],e.op,e.val)})))}))}var P=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,24)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,l=t.getTTFB;c(e),n(e),s(e),a(e),l(e)}))};l.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(A,{})}),document.getElementById("root")),P()}},[[23,1,2]]]);
//# sourceMappingURL=main.4d6563f1.chunk.js.map