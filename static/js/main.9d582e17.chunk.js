(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(8),i=n.n(s),l=(n(14),n(2)),r=(n(15),[{checklist_id:0,id:-1,num_values:[],values:[{id:1,name:"Intubation Difficile ? ",cond:{yes:[],no:[],num:[]},check:["yes","no","idk"],pre_check:{if:[{var:"difficult_intubation",op:"est",val:"vrai"}],then:"yes"},values:[{id:2,name:"A confirmer l'incubation difficile",cond:{yes:[],no:[],idk:[1],num:[]},check:["yes","no"],values:[]},{id:3,name:"2\xe8me Anesth\xe9siste",cond:{yes:[1],no:[],num:[]},check:["yes","no"],values:[]},{id:4,name:"2\xe8me Infirmi\xe8re",cond:{yes:[1],no:[],num:[]},check:["yes","no"],values:[]},{id:5,name:"Mat\xe9riel",cond:{yes:[1],no:[],num:[]},check:[],values:[{id:6,name:"Glidescope",cond:{yes:[1],no:[],num:[]},check:["yes","no"],values:[]},{id:7,name:"Laryngoscope",cond:{yes:[1],no:[],num:[]},check:["yes","no"],values:[]},{id:8,name:"Set Trach\xe9o",cond:{yes:[1],no:[],num:[]},check:["yes","no"],values:[]}]},{id:9,name:"Protocole",cond:{yes:[1],no:[],num:[]},check:["yes","no"],values:[]}]},{id:10,name:"Est-elle susceptible d'\xeatre enceinte ?",comment:"(Les donn\xe9es patient nous indiquent que la patiente est \xe2g\xe9e entre 15 et 60 ans)",cond:{yes:[],no:[],num:[{var:"age",op:">",val:15},{var:"age",op:"<",val:60},{var:"gender",op:"=",val:"F"}]},check:["yes","no"],values:[{id:11,name:"Arr\xeat des r\xeagles depuis ?",cond:{yes:[10],no:[],num:[]},check:["text"],values:[]},{id:12,name:"Test disponible ?",cond:{yes:[10],no:[],num:[]},check:["yes","no"],values:[{id:13,name:"N\xe9gatif ?",cond:{yes:[12],no:[],num:[]},check:["yes","no"],values:[]},{id:14,name:"Faire test maintenant ?",cond:{yes:[],no:[12],num:[]},check:["yes","no"],values:[]},{id:15,name:"Postposer l'intervention ?",cond:{yes:[],no:[12],num:[]},check:["yes","no"],values:[]}]}]},{id:16,name:"Le patient est-il diab\xe9tique ?",cond:{yes:[],no:[],num:[]},check:["yes","no"],pre_check:{if:[{var:"diabetic",op:"est",val:"vrai"}],then:"yes"},values:[{id:17,name:"Traitement Oral ?",cond:{yes:[16],no:[],num:[]},check:["yes","no"],values:[{id:18,name:"Arr\xeat des m\xe9dicaments ?",cond:{yes:[17],no:[],num:[]},check:["yes","no"],values:[]}]},{id:19,name:"Traitement par piqure \xe0 insuline ?",cond:{yes:[16],no:[17],num:[]},check:["yes","no"],values:[{id:20,name:"Derni\xe8re piqure le ? ",cond:{yes:[19],no:[],num:[]},check:["text"],values:[]}]},{id:21,name:"Glyc\xe9mie \xe0 l'arriv\xe9e HJ ?",cond:{yes:[16],no:[],num:[]},check:["normal","anormal"],values:[]}]},{id:22,name:"Consentement",comment:"Enfant de <15 ans, n\xe9cessite les consentement des parents",cond:{yes:[],no:[],num:[{var:"age",op:"<",val:15}]},check:[],values:[{id:23,name:"Consentement chirugical du p\xe8re",cond:{yes:[],num:[{var:"age",op:"<",val:15}]},check:["yes","no"],values:[]},{id:24,name:"Consentement chirurgical de la m\xe8re",cond:{yes:[],num:[{var:"age",op:"<",val:15}]},check:["yes","no"],values:[]},{id:25,name:"Consentement anest\xe9sique du p\xe8re",cond:{yes:[],num:[{var:"age",op:"<",val:15}]},check:["yes","no"],values:[]},{id:26,name:"Consentement anest\xe9sique de la m\xe8re",cond:{yes:[],num:[{var:"age",op:"<",val:15}]},check:["yes","no"],values:[]}]},{id:27,name:"Check Vernis \xe0 ongle",comment:"Ado/Adulte, n\xe9cessite v\xe9rification du vernis \xe0 ongle",cond:{yes:[],num:[{var:"age",op:">",val:10}]},check:["ok","not_ok"],values:[]}]},{checklist_id:1,id:-1,num_values:[],values:[{id:1,name:"Intubation ? ",cond:{yes:[],no:[],num:[]},check:["yes","no","?"],pre_check:{if:[{var:"difficult_intubation",op:"est",val:"vrai"}],then:"yes"},values:[]},{id:2,name:"Test ? ",cond:{yes:[],no:[],num:[]},check:["yes","no","?"],values:[]}]}]),o=[{id:0,lastname:"Dubois",firstname:"Germaine",gender:"F",dateofbirth:"02/11/1940",diabetic:"faux",difficult_intubation:"vrai"},{id:1,lastname:"Vandamme",firstname:"Gilbert",gender:"M",dateofbirth:"08/25/1960",diabetic:"vrai",difficult_intubation:"vrai"},{id:2,lastname:"Perlot",firstname:"Claude",gender:"M",dateofbirth:"12/16/1975",diabetic:"faux",difficult_intubation:"faux"},{id:3,lastname:"Boulet",firstname:"Arnaud",gender:"M",dateofbirth:"03/17/1981",diabetic:"faux",difficult_intubation:"faux"},{id:4,lastname:"Charlier",firstname:"Emile",gender:"M",dateofbirth:"09/19/1953",diabetic:"faux",difficult_intubation:"vrai"},{id:5,lastname:"Nash",firstname:"Emilie",gender:"F",dateofbirth:"03/30/2015",diabetic:"vrai",difficult_intubation:"vrai"},{id:6,lastname:"Materne",firstname:"Marie",gender:"F",dateofbirth:"08/23/1982",diabetic:"faux",difficult_intubation:"faux"},{id:7,lastname:"Bernard",firstname:"Virginie",gender:"F",dateofbirth:"06/03/1986",diabetic:"faux",difficult_intubation:"faux"},{id:8,lastname:"Lemoine",firstname:"Karine",gender:"F",dateofbirth:"01/25/1977",diabetic:"vrai",difficult_intubation:"vrai"}],d=["yes","no","idk","ok","not_ok","normal","anormal"],u={yes:"Oui",no:"Non",idk:"?",ok:"OK",not_ok:"Non OK",normal:"Normal",anormal:"Anormal"},m=["diabetic","age","yearofbirth","difficult_intubation","gender"],b={diabetic:"Diab\xe9tique",age:"\xc2ge",yearofbirth:"Ann\xe9e de naissance",difficult_intubation:"Intubation Difficile",gender:"Genre"},j=["<",">","=","est"],h=function(e){return u[e]},v=function(e){return b[e]},p=function(e,t,n){switch(t){case">":return e>n;case"<":return e<n;case"=":case"est":return e===n;default:return!0}};function x(e,t,n,a){this.dataArray=e,this.fileName=t,this.separator=n||",",this.addQuotes=!!a,this.addQuotes&&(this.separator='"'+this.separator+'"'),this.getDownloadLink=function(){var e=this.separator,t=this.addQuotes,n="data:text/csv;charset=utf-8",a=this.dataArray.map((function(n){var a=n.join(e);return a.length&&t?'"'+a+'"':a})).join("\n");return"function"===typeof btoa?(n+=";base64",a=btoa(a)):a=encodeURIComponent(a),this.downloadLink=this.downloadLink||n+","+a},this.getLinkElement=function(e){var t=this.getDownloadLink(),n=this.fileName;return this.linkElement=this.linkElement||function(){var a=document.createElement("a");return a.innerHTML=e||"",a.href=t,a.download=n,a}(),this.linkElement},this.download=function(e){var t=this.getLinkElement();t.style.display="none",document.body.appendChild(t),t.click(),e&&document.body.removeChild(t)}}var f=n(0);function g(e){var t=e.props,n=t.setCreationMode,a=t.setCreditMode,c=t.trimmedCanvasUrl,s=t.result,i=t.checklistList,r=t.swapchecklist;var o=function(){a(0)};return Object(f.jsx)("div",{className:"iq-top-navbar h-auto ",children:Object(f.jsx)("div",{className:"iq-navbar-custom py-2",children:Object(f.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light p-0",children:[Object(f.jsx)("div",{className:"navbar-brand pl-4",children:Object(f.jsx)("a",{href:"#",onClick:o,children:Object(f.jsx)("span",{children:"SLS"})})}),Object(f.jsx)("label",{className:"navbar-toggler p-0 m-0","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(f.jsx)("span",{className:"navbar-toggler-icon"})}),Object(f.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup",children:Object(f.jsxs)("div",{className:"navbar-nav  p-2 pl-4",children:[Object(f.jsx)("label",{className:"nav-link active m-0","aria-current":"page","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:o,children:"Page d'accueil"}),Object(f.jsx)("label",{className:"nav-link m-0","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:function(){for(var e=[["id","name","answer"]],t=0,n=Object.entries(s);t<n.length;t++){var a=Object(l.a)(n[t],2),c=a[0],i=a[1];e.push([c,i.name,i.answer])}new x(e,"my_csv.csv").download(!0)},children:"Importer la checklist"}),Object(f.jsx)("label",{className:"nav-link m-0","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:function(){c&&O(c,"image.png")},children:"Importer la signature"}),Object(f.jsxs)("li",{className:"nav-item dropdown",children:[Object(f.jsx)("label",{className:"nav-link dropdown-toggle m-0",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-expanded":"false",children:"Liste des checklists disponibles"}),Object(f.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",children:i.map((function(e,t){return Object(f.jsx)("li",{children:Object(f.jsxs)("label",{className:"dropdown-item m-0","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:function(){return r(e.checklist_id)},children:["Checklist n\xb0",e.checklist_id]})},t)}))})]}),Object(f.jsx)("label",{className:"nav-link m-0","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:function(){n(1)},children:"Activer le mode Cr\xe9ation"}),Object(f.jsx)("label",{className:"nav-link m-0","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:function(){n(0)},children:"D\xe9sactiver le mode Cr\xe9ation"}),Object(f.jsx)("label",{className:"nav-link m-0","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:function(){a(1)},children:"A propos"})]})})]})})})}var O=function(e,t){var n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.click()},N=n(9),y=n.n(N);function k(e){var t=e.props,n=t.sigpad,a=t.setTrimmedCanvasUrl;return Object(f.jsx)("div",{className:"container iq-card mt-5",children:Object(f.jsxs)("div",{className:"row align-items-center p-0 m-0 h-100",children:[Object(f.jsx)("div",{className:"col-sm-3 m-0 p-0 text-center text-dark",children:"Veuillez rentrer votre signature :"}),Object(f.jsx)("div",{className:"col m-0 p-0 h-100 ",children:Object(f.jsx)("div",{className:"container iq-card m-0 bg-light border",children:Object(f.jsx)("div",{className:"sigContainer",children:Object(f.jsx)(y.a,{canvasProps:{className:"sigPad"},ref:function(e){n=e}})})})}),Object(f.jsxs)("div",{className:"col-sm-3 mx-2 p-0",children:[Object(f.jsx)("div",{className:"row align-items-center p-0 m-0 mb-2 px-4",children:Object(f.jsx)("button",{type:"button",className:"btn btn-primary w-100",onClick:function(){var e=n.getTrimmedCanvas().toDataURL();a(e)},children:"Valider la signature"})}),Object(f.jsx)("div",{className:" row align-items-center p-0 m-0 px-4",children:Object(f.jsx)("button",{type:"button",className:"btn btn-warning text-dark w-100",onClick:function(){n.clear(),a(null)},children:"R\xe9initialiser"})})]})]})})}var w=n(7),C=n(6),_=n(3),S=n.n(_);function q(e){var t=e.props,n=t.checklist,c=t.setChecklist,s=t.checklistList,i=t.setChecklistList,r=t.checklistId,o=t.setChecklistId,u=t.forceUpdate,b=t.setResult,p=t.setIsDict,x=t.init_dict,g=t.setIsPreCheckDone,O=Object(a.useState)(n&&n.values.length?n.values[0]:null),N=Object(l.a)(O,2),y=N[0],k=N[1],_=Object(a.useState)(n),q=Object(l.a)(_,2),M=q[0],E=q[1],L=Object(a.useState)(n&&n.values.length?n.values[0].name:" "),Q=Object(l.a)(L,2),A=Q[0],K=Q[1],I=Object(a.useState)(n&&n.comment?n.comment:null),D=Object(l.a)(I,2),P=D[0],F=D[1],B=Object(a.useState)({}),T=Object(l.a)(B,2),U=T[0],V=T[1],R=Object(a.useState)({}),z=Object(l.a)(R,2),G=z[0],J=z[1],H=Object(a.useState)(0),Y=Object(l.a)(H,2),W=Y[0],X=Y[1],Z=[];n&&function e(t){t.id>0&&Z.push(t.id);var n,a=Object(C.a)(t.values);try{for(a.s();!(n=a.n()).done;){e(n.value)}}catch(c){a.e(c)}finally{a.f()}}(n);var $=[];y&&($=[],d.forEach((function(e){$.push({labelKey:e,value:h(e),isSelected:y.check.includes(e)})})));var ee=[];y&&(ee=[],m.forEach((function(e){ee.push({labelKey:e,value:v(e)})})));var te=[];y&&(te=[],j.forEach((function(e){te.push({labelKey:e,value:e})})));var ne=[];function ae(e){k(e&&e.values.length?e.values[0]:null),E(e),K(e&&e.values.length?e.values[0].name:""),F(e&&e.values.length?e.values[0].comment:"")}function ce(e,t,n){if(e.id===n)return console.log("found",e),M=t,k(y=e),E(M),K(y.name),V({}),F(y.comment),X(!W),y;var a,c=null,s=Object(C.a)(e.values);try{for(s.s();!(a=s.n()).done;){c=ce(a.value,e,n)||c}}catch(i){s.e(i)}finally{s.f()}return c}function se(){M&&(M.values=M.values.filter((function(e){return e.id!==y.id})),ae(n),u())}function ie(e,t){return e.id===t||e.values.length&&e.values.every((function(e){return ie(e)}))}function le(e){if(!ie(y,e)){var t=Object(w.a)({},y);t.cond={yes:[],no:[],num:[]},se(),ce(n,null,e),y.values.splice(0,0,t),ce(n,null,t.id),u()}}y&&(ne=[],y.check.forEach((function(e){ne.push({labelKey:e,value:h(e)})})));var re=function(e){o(e),n=s.filter((function(t){return t.checklist_id===e}))[0],c(n),b({}),p(x),g([]),X(!W),ae(n)},oe=function(e){U||(U={}),U.var&&["diabetic","difficult_intubation","gender"].includes(U.var)?U.val=e.selectedKey[0]:U.val=e.target.value,V(U),u()},de=function(e){G||(G={}),G.var&&["diabetic","difficult_intubation","gender"].includes(G.var)?G.val=e.selectedKey[0]:G.val=e.target.value,J(G),u()},ue=function(){W=(W+1)%4};return Object(f.jsxs)("div",{className:"container iq-card pt-2 border",children:[Object(f.jsx)("div",{className:"iq-card bg-primary text-center mb-2",children:Object(f.jsxs)("div",{className:"card-body",children:[Object(f.jsx)("h4",{className:"card-title text-white",children:"Mode Cr\xe9ation "}),Object(f.jsx)("p",{className:"card-text  m-0",children:"Vous pouvez ajouter, supprimer, modifier des checklists et des questions ici."}),Object(f.jsx)("p",{className:"card-text ",children:"La checklist modifi\xe9e s'affiche en dessous."})]})}),Object(f.jsxs)("div",{className:"row align-items-center p-0 m-0 pb-2 border-bottom border-",children:[Object(f.jsx)("div",{className:"col align-items-center ",children:Object(f.jsxs)("div",{className:"dropright text-center",children:[Object(f.jsx)("button",{className:"btn btn-info dropdown-toggle ",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"S\xe9lectionnez la checklist"}),Object(f.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(f.jsx)("li",{children:Object(f.jsx)("label",{className:"dropdown-item ",onClick:function(e){!function(){var e=s.length?s[s.length-1].checklist_id+1:0,t={checklist_id:e,id:-1,num_values:[],values:[{id:1,name:"",check:["yes","no"],cond:{yes:[],no:[],num:[]},values:[]}]};s.push(t),i(s),re(e)}(),u()},children:"Nouvelle checklist"})}),s.map((function(e,t){return Object(f.jsx)("li",{children:Object(f.jsxs)("label",{className:"dropdown-item ",onClick:function(){re(e.checklist_id)},children:["Checklist n\xb0",e.checklist_id]})},t)}))]})]})}),Object(f.jsx)("div",{className:"col align-items-center p-2",children:Object(f.jsxs)("div",{className:"iq-card card-light text-dark text-center shadow-sm mb-0 ",children:["Checklist n\xb0",r]})}),Object(f.jsx)("div",{className:"col align-items-center p-2",children:Object(f.jsxs)("div",{className:"iq-card card-light text-dark text-center shadow-sm mb-0",children:["Question n\xb0",y?y.id:" -"]})}),Object(f.jsx)("div",{className:"col align-items-center ",children:Object(f.jsxs)("div",{className:"dropleft text-center",children:[Object(f.jsx)("button",{className:"btn btn-info dropdown-toggle  ",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"S\xe9lectionnez la question"}),Object(f.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(f.jsx)("li",{children:Object(f.jsx)("label",{className:"dropdown-item ",onClick:function(e){!function(){var e=Z.length?Z[Z.length-1]:0,t={id:e+1,name:"",cond:{yes:[],no:[],num:[]},check:["yes","no"],values:[]};n.values.push(t),ce(n,null,e+1)}(),u()},children:"Nouvelle question"})}),Z.map((function(e,t){return Object(f.jsx)("li",{children:Object(f.jsxs)("label",{className:"dropdown-item ",onClick:function(){ce(n,null,e)},children:["Question n\xb0",e]})},t)}))]})]})})]}),y?Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(f.jsx)("div",{className:"col-sm-4 align-items-center text-dark ",children:"Nom de la question :"}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center",children:Object(f.jsx)("input",{className:"form-control w-100 mb-0",type:"text ","aria-label":"text input",value:A,onChange:function(e){A=e.target.value,K(A)}})}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center ",children:Object(f.jsx)("button",{className:"btn btn-warning ",onClick:function(){return y.name=A,k(y),void u()},children:"Valider le nom"})})]}),Object(f.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(f.jsx)("div",{className:"col-sm-4 align-items-center text-dark  ",children:"Commentaire (optionnel) de la question :"}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center ",children:Object(f.jsx)("textarea",{className:"form-control form-control-custom",id:"exampleFormControlTextarea1",rows:"2",value:P||"",onChange:function(e){P=e.target.value,F(P)}})}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:Object(f.jsx)("button",{className:"btn btn-warning ",onClick:function(e){P?y.comment=P:delete y.comment,u(),u()},children:"Valider le commentaire"})})]}),Object(f.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(f.jsx)("div",{className:"col-sm-4 align-items-center text-dark",children:"Placer la question \xe0 la suite d'une autre :"}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center"}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:Object(f.jsxs)("div",{className:"dropleft text-center",children:[Object(f.jsx)("button",{className:"btn btn-warning dropdown-toggle ",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"Quelle question ?"}),Object(f.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(f.jsx)("li",{children:Object(f.jsx)("label",{className:"dropdown-item ",onClick:function(){return le(-1)},children:"Au d\xe9but"})}),Z.map((function(e,t){return Object(f.jsx)("li",{children:Object(f.jsxs)("label",{className:"dropdown-item ",onClick:function(){return function(e){if(!ie(y,e)){var t=Object(w.a)({},y);se(),ce(n,null,e);var a=M.values.findIndex((function(t){return t.id===e}));t.cond={yes:[],no:[],num:[]},M.values.splice(a+1,0,t),ce(n,null,t.id),u()}}(e)},children:["Question n\xb0",e]})},t)}))]})]})})]}),Object(f.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(f.jsx)("div",{className:"col-sm-4 align-items-center text-dark ",children:"Placer la question comme d\xe9coulant d'une autre :"}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center"}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:Object(f.jsxs)("div",{className:"dropleft text-center",children:[Object(f.jsx)("button",{className:"btn btn-warning dropdown-toggle ",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"Quelle question ?"}),Object(f.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(f.jsx)("li",{children:Object(f.jsx)("label",{className:"dropdown-item ",onClick:function(){return le(-1)},children:"Au d\xe9but"})}),Z.map((function(e,t){return Object(f.jsx)("li",{children:Object(f.jsxs)("label",{className:"dropdown-item ",onClick:function(){return le(e)},children:["Question n\xb0",e]})},t)}))]})]})})]}),Object(f.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(f.jsx)("div",{className:"col-sm-4 align-items-center text-dark ",children:"Quelles r\xe9ponses possibles ? :"}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center"}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:Object(f.jsx)(S.a,{className:" w-100 ",selectStyle:"btn-warning",options:$,isMultiSelect:!0,placeholder:"Aucune",onChange:function(e){e.selectedKey.length&&(y.check=e.selectedKey,k(y),console.log("test"),ue(),u())}},W)})]}),Object(f.jsxs)("div",{className:"border-bottom m-0 py-2 text-center",children:[Object(f.jsx)("button",{className:"btn btn-secondary m-auto p-2 my-2 ",type:"button","data-toggle":"collapse","data-target":"#collapseQuestionConditions","aria-expanded":"false","aria-controls":"collapseExample",children:"+ Ajouter/Supprimer des conditions sur les autres questions +"}),Object(f.jsx)("div",{className:"collapse m-0 p-0",id:"collapseQuestionConditions",children:Object(f.jsxs)("div",{className:"row align-items-center p-2 m-0",children:[Object(f.jsx)("div",{className:"col-sm-3 align-items-center text-dark ",children:"Quelles conditions sur les r\xe9ponses ? :"}),Object(f.jsx)("div",{className:"col-sm-9 align-items-center",children:d.map((function(e,t){return Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"col align-items-center p-2 my-auto",children:Object(f.jsx)("div",{className:"iq-card card-grey text-center shadow-sm m-0 text-dark ",children:h(e)})}),Object(f.jsx)("div",{className:"col align-items-center p-2",children:Object(f.jsx)("div",{className:"list-group list-group-horizontal m-0",children:y&&y.cond[e]?y.cond[e].map((function(t,n){return Object(f.jsxs)("button",{className:" list-group-item list-group-item-custom btn btn-outline-secondary ",type:"button",onClick:function(){return function(e,t){y.cond[e]=y.cond[e].filter((function(e){return e!==t})),console.log(y),k(y),u()}(e,t)},children:[t," "]},n)})):null})}),Object(f.jsx)("div",{className:"col align-items-center p-2 my-auto",children:Object(f.jsxs)("div",{className:"dropleft text-center",children:[Object(f.jsx)("button",{className:"btn btn-warning dropdown-toggle ",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"Quelle question ?"}),Object(f.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:Z.map((function(t,n){return Object(f.jsx)("li",{children:Object(f.jsxs)("label",{className:"dropdown-item ",onClick:function(){return function(e,t){y.cond[e]?y.cond[e].push(t):y.cond[e]=[t],k(y),u()}(e,t)},children:["Question n\xb0",t]})},n)}))})]})})]},t)}))})]})})]}),Object(f.jsxs)("div",{className:"border-bottom m-0 py-2 text-center",children:[Object(f.jsx)("button",{className:"btn btn-secondary m-auto p-2 my-2 ",type:"button","data-toggle":"collapse","data-target":"#collapseNumConditions","aria-expanded":"false","aria-controls":"collapseExample",children:"+ Ajouter/Supprimer des conditions num\xe9riques +"}),Object(f.jsx)("div",{className:"collapse m-0 p-0",id:"collapseNumConditions",children:Object(f.jsxs)("div",{className:"col align-items-center p-2 m-0",children:[y&&y.cond.num?y.cond.num.map((function(e,t){return Object(f.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto",children:Object(f.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark ",children:v(e.var)})}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:Object(f.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark ",children:e.op})}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:Object(f.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark",children:e.val})}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto text-center",children:Object(f.jsx)("button",{className:"btn btn-danger ",onClick:function(){return function(e){console.log("supprimer",e),y.cond.num.splice(e,1),console.log(y.cond.num),k(y),u()}(t)},children:Object(f.jsx)("i",{className:"fa fa-trash-o m-0"})})})]},t)})):null,Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto",children:Object(f.jsx)(S.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quelle variable ?",options:ee,onChange:function(e){U||(U={}),(U={}).var=e.selectedKey[0],V(U),console.log("pairindicator",W),console.log(U),ue(),u()}},W)}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto",children:["diabetic","difficult_intubation","gender"].includes(U.var)?Object(f.jsx)("div",{children:"est"}):Object(f.jsx)(S.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quel op\xe9rateur ?",options:te,onChange:function(e){U||(U={}),U.op=e.selectedKey[0],V(U),u()}},W)}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:["diabetic","difficult_intubation"].includes(U.var)?Object(f.jsx)(S.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quelle valeur ?",options:[{labelKey:"vrai",value:"Vrai"},{labelKey:"faux",value:"Faux"}],onChange:oe},W):Object(f.jsxs)("div",{children:[" ","gender"===U.var?Object(f.jsx)(S.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quelle valeur ?",options:[{labelKey:"F",value:"F"},{labelKey:"M",value:"M"}],onChange:oe},W):Object(f.jsx)("input",{type:"number",className:"form-control ",placeholder:"Quelle valeur ?",onChange:oe})," "]})}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center text-center my-auto",children:Object(f.jsx)("button",{className:"btn btn-warning w-100 ",onClick:function(){U.var&&U.val&&["diabetic","difficult_intubation","gender"].includes(U.var)?(y.cond.num.push({var:U.var,op:"est",val:U.val}),k(y),u()):U.var&&U.op&&U.val&&(y.cond.num.push({var:U.var,op:U.op,val:U.val}),k(y),u())},children:"Valider"})})]})})]})})]}),Object(f.jsxs)("div",{className:"border-bottom m-0 py-2 text-center",children:[Object(f.jsx)("button",{className:"btn btn-secondary m-auto p-2 my-2 ",type:"button","data-toggle":"collapse","data-target":"#collapsePreCheck","aria-expanded":"false","aria-controls":"collapseExample",children:"+ Ajouter/Supprimer des conditions pour que la question soit pr\xe9-check\xe9e +"}),Object(f.jsx)("div",{className:"collapse m-0 p-0",id:"collapsePreCheck",children:Object(f.jsxs)("div",{className:"col align-items-center p-2 m-0",children:[y&&y.pre_check?y.pre_check.if.map((function(e,t){return Object(f.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto",children:Object(f.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark ",children:v(e.var)})}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:Object(f.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark",children:e.op})}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:Object(f.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark",children:e.val})}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto text-center",children:Object(f.jsx)("button",{className:"btn btn-danger ",onClick:function(){return function(e){console.log("supprimer",e),y.pre_check.if.splice(e,1),y.pre_check.if.length||(y.pre_check=null),k(y),u()}(t)},children:Object(f.jsx)("i",{className:"fa fa-trash-o m-0"})})})]},t)})):null,y&&y.pre_check?Object(f.jsx)("div",{className:"row justify-content-md-center py-2",children:Object(f.jsx)("div",{className:"col-sm-2 align-items-center my-auto ",children:Object(f.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark",children:h(y.pre_check.then)})})}):null,Object(f.jsx)("div",{children:Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto",children:Object(f.jsx)(S.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quelle variable ?",options:ee,onChange:function(e){G||(G={}),(G={}).var=e.selectedKey[0],J(G),ue(),u()}},W)}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:["diabetic","difficult_intubation","gender"].includes(G.var)?Object(f.jsx)("div",{children:"est"}):Object(f.jsx)(S.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quel op\xe9rateur ?",options:te,onChange:function(e){G||(G={}),G.op=e.selectedKey[0],J(G),u()}},W)}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto",children:["diabetic","difficult_intubation"].includes(G.var)?Object(f.jsx)(S.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quelle valeur ?",options:[{labelKey:"vrai",value:"Vrai"},{labelKey:"faux",value:"Faux"}],onChange:de},W):Object(f.jsxs)("div",{children:[" ","gender"===G.var?Object(f.jsx)(S.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quelle valeur ?",options:[{labelKey:"F",value:"F"},{labelKey:"M",value:"M"}],onChange:de},W):Object(f.jsx)("input",{type:"number",className:"form-control ",placeholder:"Quelle valeur ?",onChange:de})," "]})}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center text-center my-auto",children:Object(f.jsx)("button",{className:"btn btn-warning w-100  ",onClick:function(){G.var&&G.val&&G.then&&["diabetic","difficult_intubation","gender"].includes(G.var)?(y.pre_check||(y.pre_check={if:[],then:null}),y.pre_check.then=G.then,y.pre_check.if.push({var:G.var,op:"est",val:G.val}),k(y),u()):G.var&&G.op&&G.val&&G.then&&(y.pre_check||(y.pre_check={if:[],then:null}),y.pre_check.then=G.then,y.pre_check.if.push({var:G.var,op:G.op,val:G.val}),k(y),u())},children:"Valider"})})]}),Object(f.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:Object(f.jsx)(S.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quel pre-check ?",options:ne,onChange:function(e){G||(G={}),G.then=e.selectedKey[0],J(G),u()}},W)}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center ",children:Object(f.jsx)("button",{className:"btn btn-warning w-100  ",onClick:function(){y.pre_check&&(y.pre_check.then=G.then,k(y),u())},children:"Modifier le precheck"})})]})]})})]})})]})]}):null,Object(f.jsxs)("div",{className:"row align-items-center p-2 m-0",children:[Object(f.jsx)("div",{className:"col-sm-4 align-items-center text-center",children:Object(f.jsx)("button",{className:"btn btn-warning  ",onClick:function(){console.log(s,r),s=s.filter((function(e){return e.checklist_id!==r})),console.log(s),o(s.length?s[0].checklist_id:" -"),n=s.length?s[0]:null,c(n),i(s),ae(n)},children:"Supprimer la checklist"})}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center text-center",children:Object(f.jsx)("button",{className:"btn btn-warning  ",onClick:function(){return function(e){var t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e));console.log(t);var n=document.createElement("a");n.href=t,n.download="checklist.json",document.body.appendChild(n),n.click(),n.remove()}(s)},children:"Sauvegarder la liste de checklists"})}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center text-center",children:Object(f.jsx)("button",{className:"btn btn-warning ",onClick:se,children:"Supprimer la question"})})]})]})}function M(e){e.props;return Object(f.jsx)("div",{className:"",children:Object(f.jsx)("div",{className:"card-inv text-center",children:Object(f.jsxs)("div",{className:"card-body",children:[Object(f.jsx)("h5",{className:"card-title m-0 text-custom",children:"SLS Checklist App"}),Object(f.jsx)("p",{className:"card-text text-custom m-0",children:"v0.6"}),Object(f.jsx)("p",{className:"card-text text-custom m-0",children:"D\xe9velopp\xe9 par Th\xe9o Stassen"}),Object(f.jsx)("p",{className:"card-text text-custom",children:"theo.stassen@protonmail.com"})]})})})}function E(e){var t=e.props,n=t.patientList,a=t.currentPatient,c=t.setCurrentPatient,s=t.setIsDict,i=t.setResult,l=t.setIsPreCheckDone,r=t.forceUpdate;return Object(f.jsx)("div",{className:"container iq-card p-2 py-3  ",children:Object(f.jsxs)("div",{className:"row align-items-center m-0",children:[Object(f.jsx)("div",{className:"col-sm-4 align-items-center text-dark",children:"Patient Actuel :"}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center ",children:Object(f.jsxs)("div",{className:"iq-card bg-primary text-center shadow-sm m-0",children:[a.firstname,"\xa0",a.lastname]})}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center ",children:Object(f.jsxs)("div",{className:"dropdown text-center",children:[Object(f.jsx)("button",{className:"btn btn-secondary btn-round dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"S\xe9lectionnez le patient"}),Object(f.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:n.map((function(e,t){return Object(f.jsx)("li",{children:Object(f.jsxs)("label",{className:"dropdown-item ",onClick:function(){return function(e){var t=n.filter((function(t){return t.id===e}))[0];c(t),i({});var a={};d.forEach((function(e){a[e]={0:!0}})),s(a),l([]),r()}(e.id)},children:[e.firstname,"\xa0",e.lastname]})},t)}))})]})})]})})}function L(e){var t=e.init_items,n=e.item,a=e.dicts,c=e.forceUpdate,s=e.values_filter_cond,i=e.creationMode,r=Object(l.a)(a,7),o=r[0],u=r[1],m=r[2],b=r[3],j=r[4],v=r[5],x=r[6],g=function(e){var a=!o[e][n.id],c=d.filter((function(t){return t!==e}));a?(b[n.id]={name:n.name,answer:e},Q(t,t,n.id,o,u,b,c)):(delete b[n.id],Q(t,t,n.id,o,u,b,[e])),j(b),o[e][n.id]=a,c.forEach((function(e){o[e][n.id]=!1})),u(o)};n.pre_check&&!v.includes(n.id)&&n.pre_check.if.every((function(e){return p(m[e.var],e.op,e.val)}))&&(g(n.pre_check.then),v.push(n.id),x(v));var O=null,N=null;return n.values&&(N=s(n.values,o,m,i)),N&&N.length&&(O=Object(f.jsx)("ul",{className:"mb-0",children:N.map((function(e,n){return Object(f.jsx)(L,{init_items:t,item:e,dicts:a,forceUpdate:c,values_filter_cond:s},n)}))})),Object(f.jsxs)("div",{className:"container m-0 mt-3 p-0 mx-auto",children:[Object(f.jsxs)("div",{className:"row align-items-center m-0 p-0",children:[Object(f.jsxs)("div",{className:"col list-group list-group-horizontal m-0 p-0 w-auto",children:[Object(f.jsx)("div",{className:"list-group-item m-0 p-0  bg-info text-center shadow-sm my-auto",children:Object(f.jsx)("h5",{className:"card-body p-auto ",children:n.id})}),Object(f.jsxs)("div",{className:"list-group-item m-0 p-0 w-100 shadow-sm h-auto text-dark",children:[n.comment?Object(f.jsx)("div",{className:"alert alert-info m-0 mt-0 border-0 text-primary my-auto",role:"alert",children:n.comment}):null,Object(f.jsx)("div",{className:"card-body my-auto",children:n.name})]})]}),n.check.length?Object(f.jsx)("div",{className:"col-md-auto",children:Object(f.jsxs)("div",{className:"list-group list-group-horizontal ",children:[d.map((function(e,t){return n.check.includes(e)?Object(f.jsxs)("label",{className:"list-group-item m-0",children:[Object(f.jsx)("input",{type:"checkbox","aria-label":"Checkbox",checked:o[e][n.id]?1:0,onChange:function(t){g(e),c()}}),"\xa0",h(e)]},t):null})),n.check.includes("text")?Object(f.jsx)("div",{className:"input-group-prepend",children:Object(f.jsx)("div",{className:"input-group-text",children:Object(f.jsx)("input",{className:"card w-100 text-custom",type:"text","aria-label":"text input",onChange:function(e){var t=e.target.value;b[n.id]={name:n.name,answer:t},j(b)}})})}):null]})}):Object(f.jsxs)("div",{className:"col-sm-6",children:[" ",null," "]})]}),O]})}function Q(e,t,n,a,c,s,i){var l=!1;t.cond&&i.forEach((function(e){t.cond[e]&&t.cond[e].includes(n)&&(d.forEach((function(e){a[e][t.id]=!1})),delete s[t.id],l=!0)})),t.values&&t.values.length&&t.values.forEach((function(t){Q(e,t,n,a,c,s,i)})),n!==t.id&&l&&Q(e,e,t.id,a,c,s,i)}function A(){var e=Object(a.useReducer)((function(e){return e+1}),0),t=Object(l.a)(e,2)[1],n=Object(a.useState)(0),c=Object(l.a)(n,2),s=c[0],i=c[1],u=Object(a.useState)(r),m=Object(l.a)(u,2),b=m[0],j=m[1],h=Object(a.useState)(o),v=Object(l.a)(h,1)[0],p=Object(a.useState)(v[0]),x=Object(l.a)(p,2),O=x[0],N=x[1],y=Object(a.useState)(b.filter((function(e){return e.checklist_id===s}))[0]),w=Object(l.a)(y,2),C=w[0],_=w[1],S=Object(a.useState)({}),Q=Object(l.a)(S,2),A=Q[0],I=Q[1],D=Object(a.useState)([]),P=Object(l.a)(D,2),F=P[0],B=P[1],T=Object(a.useState)(0),U=Object(l.a)(T,2),V=U[0],R=U[1],z=Object(a.useState)(0),G=Object(l.a)(z,2),J=G[0],H=G[1],Y=Object(a.useState)(null),W=Object(l.a)(Y,2),X=W[0],Z=W[1],$={};d.forEach((function(e){$[e]={0:!0}}));var ee=Object(a.useState)($),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],ce=C?C.num_values:[],se={};ce.forEach((function(e){se[e.var]=e.val}));for(var ie=0,le=Object.entries(O);ie<le.length;ie++){var re=Object(l.a)(le[ie],2),oe=re[0],de=re[1];se[oe]=de}se.age=function(e){var t=e.split("/");return(new Date).getFullYear()-t[2]}(se.dateofbirth);var ue=[ne,ae,se,A,I,F,B],me=null;C&&C.values&&(me=K(C.values,ne,se,V));return Object(f.jsxs)("div",{className:"min-vh-100 content-page",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)(g,{props:{setCreationMode:R,setCreditMode:H,trimmedCanvasUrl:X,result:A,checklistList:b,swapchecklist:function(e){i(e),C=b.filter((function(t){return t.checklist_id===e}))[0],_(C),I({});var t={};return d.forEach((function(e){t[e]={0:!0}})),ae(t),B([]),console.log("isdict after swapchecklist",ne),C}}}),J?Object(f.jsx)(M,{props:null}):Object(f.jsxs)("div",{children:[V?Object(f.jsx)(q,{props:{checklist:C,setChecklist:_,checklistList:b,setChecklistList:j,checklistId:s,setChecklistId:i,forceUpdate:t,setResult:I,setIsDict:ae,init_dict:$,setIsPreCheckDone:B}}):Object(f.jsx)(E,{props:{patientList:v,currentPatient:O,setCurrentPatient:N,setIsDict:ae,setResult:I,setIsPreCheckDone:B,init_dict:$,forceUpdate:t}}),me?me.map((function(e,n){return Object(f.jsx)(L,{init_items:C,item:e,dicts:ue,forceUpdate:t,values_filter_cond:K,creationMode:V},n)})):null,V?null:Object(f.jsx)(k,{props:{sigpad:{},setTrimmedCanvasUrl:Z}})]})]}),Object(f.jsx)("div",{children:Object(f.jsx)("nav",{className:"navbar",children:Object(f.jsx)("label",{className:"navbar-brand",children:null})})})]})}function K(e,t,n,a){return e.filter((function(e){return Object.keys(e.cond).every((function(n){return"num"===n||!e.cond[n]||e.cond[n].every((function(e){return t[n][e]}))}))&&(a||e.cond.num.every((function(e){return!n[e.var]||p(n[e.var],e.op,e.val)})))}))}var I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,24)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))};i.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(A,{})}),document.getElementById("root")),I()}},[[23,1,2]]]);
//# sourceMappingURL=main.9d582e17.chunk.js.map