(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(8),i=n.n(s),l=(n(14),n(2)),r=(n(15),[{checklist_id:0,id:-1,num_values:[],values:[{id:1,name:"Intubation Difficile ? ",section_title:"V\xe9rifications concernant l'intubation difficile",cond:{yes:[],no:[],num:[]},check:["yes","no","idk"],pre_check:{if:[{var:"difficult_intubation",op:"est",val:"vrai"}],then:"yes"},values:[{id:2,name:"A confirmer l'incubation difficile",cond:{yes:[],no:[],idk:[1],num:[]},check:["yes","no"],values:[]},{id:3,name:"2\xe8me Anesth\xe9siste",cond:{yes:[1],no:[],num:[]},check:["yes","no"],values:[]},{id:4,name:"2\xe8me Infirmi\xe8re",cond:{yes:[1],no:[],num:[]},check:["yes","no"],values:[]},{id:5,name:"Mat\xe9riel",cond:{yes:[1],no:[],num:[]},check:[],values:[{id:6,name:"Glidescope",cond:{yes:[1],no:[],num:[]},check:["yes","no"],values:[]},{id:7,name:"Laryngoscope",cond:{yes:[1],no:[],num:[]},check:["yes","no"],values:[]},{id:8,name:"Set Trach\xe9o",cond:{yes:[1],no:[],num:[]},check:["yes","no"],values:[]}]},{id:9,name:"Protocole",cond:{yes:[1],no:[],num:[]},check:["yes","no"],values:[]}]},{id:10,name:"Est-elle susceptible d'\xeatre enceinte ?",section_title:"V\xe9rifications concernant une possible grossesse",comment:"(Les donn\xe9es patient nous indiquent que la patiente est \xe2g\xe9e entre 15 et 60 ans)",cond:{yes:[],no:[],num:[{var:"age",op:">",val:15},{var:"age",op:"<",val:60},{var:"gender",op:"=",val:"F"}]},check:["yes","no"],values:[{id:11,name:"Arr\xeat des r\xeagles depuis ?",cond:{yes:[10],no:[],num:[]},check:["text"],values:[]},{id:12,name:"Test disponible ?",cond:{yes:[10],no:[],num:[]},check:["yes","no"],values:[{id:13,name:"N\xe9gatif ?",cond:{yes:[12],no:[],num:[]},check:["yes","no"],values:[]},{id:14,name:"Faire test maintenant ?",cond:{yes:[],no:[12],num:[]},check:["yes","no"],values:[]},{id:15,name:"Postposer l'intervention ?",cond:{yes:[],no:[12],num:[]},check:["yes","no"],values:[]}]}]},{id:16,name:"Le patient est-il diab\xe9tique ?",section_title:"V\xe9rification concernant le diab\xe8te",cond:{yes:[],no:[],num:[]},check:["yes","no"],pre_check:{if:[{var:"diabetic",op:"est",val:"vrai"}],then:"yes"},values:[{id:17,name:"Traitement Oral ?",cond:{yes:[16],no:[],num:[]},check:["yes","no"],values:[{id:18,name:"Arr\xeat des m\xe9dicaments ?",cond:{yes:[17],no:[],num:[]},check:["yes","no"],values:[]}]},{id:19,name:"Traitement par piqure \xe0 insuline ?",cond:{yes:[16],no:[17],num:[]},check:["yes","no"],values:[{id:20,name:"Derni\xe8re piqure le ? ",cond:{yes:[19],no:[],num:[]},check:["text"],values:[]}]},{id:21,name:"Glyc\xe9mie \xe0 l'arriv\xe9e HJ ?",cond:{yes:[16],no:[],num:[]},check:["normal","anormal"],values:[]}]},{id:22,name:"Consentement chirugicaux et an\xe9st\xe9siques de p\xe8re/m\xe8re",section_title:"Concernant les consentements parentaux",comment:"Enfant de <15 ans, n\xe9cessite les consentement des parents",cond:{yes:[],no:[],num:[{var:"age",op:"<",val:15}]},check:[],values:[{id:23,name:"Consentement chirugical du p\xe8re",cond:{yes:[],num:[{var:"age",op:"<",val:15}]},check:["yes","no"],values:[]},{id:24,name:"Consentement chirurgical de la m\xe8re",cond:{yes:[],num:[{var:"age",op:"<",val:15}]},check:["yes","no"],values:[]},{id:25,name:"Consentement anest\xe9sique du p\xe8re",cond:{yes:[],num:[{var:"age",op:"<",val:15}]},check:["yes","no"],values:[]},{id:26,name:"Consentement anest\xe9sique de la m\xe8re",cond:{yes:[],num:[{var:"age",op:"<",val:15}]},check:["yes","no"],values:[]}]},{id:27,name:"Check Vernis \xe0 ongle",section_title:"Checks globaux pour anest\xe9sie",comment:"Ado/Adulte, n\xe9cessite v\xe9rification du vernis \xe0 ongle",cond:{yes:[],num:[{var:"age",op:">",val:10}]},check:["ok","not_ok"],values:[]}]},{checklist_id:1,id:-1,num_values:[],values:[{id:1,name:"Intubation ? ",cond:{yes:[],no:[],num:[]},check:["yes","no","?"],pre_check:{if:[{var:"difficult_intubation",op:"est",val:"vrai"}],then:"yes"},values:[]},{id:2,name:"Test ? ",cond:{yes:[],no:[],num:[]},check:["yes","no","?"],values:[]}]}]),o=[{id:0,lastname:"Dubois",firstname:"Germaine",gender:"F",dateofbirth:"02/11/1940",diabetic:"faux",difficult_intubation:"vrai"},{id:1,lastname:"Vandamme",firstname:"Gilbert",gender:"M",dateofbirth:"08/25/1960",diabetic:"vrai",difficult_intubation:"vrai"},{id:2,lastname:"Perlot",firstname:"Claude",gender:"M",dateofbirth:"12/16/1975",diabetic:"faux",difficult_intubation:"faux"},{id:3,lastname:"Boulet",firstname:"Arnaud",gender:"M",dateofbirth:"03/17/1981",diabetic:"faux",difficult_intubation:"faux"},{id:4,lastname:"Charlier",firstname:"Emile",gender:"M",dateofbirth:"09/19/1953",diabetic:"faux",difficult_intubation:"vrai"},{id:5,lastname:"Nash",firstname:"Emilie",gender:"F",dateofbirth:"03/30/2015",diabetic:"vrai",difficult_intubation:"vrai"},{id:6,lastname:"Materne",firstname:"Marie",gender:"F",dateofbirth:"08/23/1982",diabetic:"faux",difficult_intubation:"faux"},{id:7,lastname:"Bernard",firstname:"Virginie",gender:"F",dateofbirth:"06/03/1986",diabetic:"faux",difficult_intubation:"faux"},{id:8,lastname:"Lemoine",firstname:"Karine",gender:"F",dateofbirth:"01/25/1977",diabetic:"vrai",difficult_intubation:"vrai"}],d=["yes","no","idk","ok","not_ok","normal","anormal"],u={yes:"Oui",no:"Non",idk:"?",ok:"OK",not_ok:"Non OK",normal:"Normal",anormal:"Anormal"},m=["diabetic","age","yearofbirth","difficult_intubation","gender"],b={diabetic:"Diab\xe9tique",age:"\xc2ge",yearofbirth:"Ann\xe9e de naissance",difficult_intubation:"Intubation Difficile",gender:"Genre"},j=["<",">","="],h=function(e){return u[e]},v=function(e){return b[e]},p=function(e,t,n){switch(t){case">":return e>n;case"<":return e<n;case"=":case"est":return e===n;default:return!0}};function x(e,t,n,a){this.dataArray=e,this.fileName=t,this.separator=n||",",this.addQuotes=!!a,this.addQuotes&&(this.separator='"'+this.separator+'"'),this.getDownloadLink=function(){var e=this.separator,t=this.addQuotes,n="data:text/csv;charset=utf-8",a=this.dataArray.map((function(n){var a=n.join(e);return a.length&&t?'"'+a+'"':a})).join("\n");return"function"===typeof btoa?(n+=";base64",a=btoa(a)):a=encodeURIComponent(a),this.downloadLink=this.downloadLink||n+","+a},this.getLinkElement=function(e){var t=this.getDownloadLink(),n=this.fileName;return this.linkElement=this.linkElement||function(){var a=document.createElement("a");return a.innerHTML=e||"",a.href=t,a.download=n,a}(),this.linkElement},this.download=function(e){var t=this.getLinkElement();t.style.display="none",document.body.appendChild(t),t.click(),e&&document.body.removeChild(t)}}var f=n(0);function g(e){var t=e.props,n=t.setCreationMode,a=t.setCreditMode,c=t.trimmedCanvasUrl,s=t.result,i=t.checklistList,r=t.swapchecklist;var o=function(){a(0)};return Object(f.jsx)("div",{className:"iq-top-navbar h-auto ",children:Object(f.jsx)("div",{className:"iq-navbar-custom py-2",children:Object(f.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light p-0",children:[Object(f.jsx)("div",{className:"navbar-brand pl-4",children:Object(f.jsx)("a",{href:"#",onClick:o,children:Object(f.jsx)("span",{children:"SLS"})})}),Object(f.jsx)("label",{className:"navbar-toggler p-0 m-0","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(f.jsx)("span",{className:"navbar-toggler-icon"})}),Object(f.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup",children:Object(f.jsxs)("div",{className:"navbar-nav  p-2 pl-4",children:[Object(f.jsx)("label",{className:"nav-link active m-0","aria-current":"page","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:o,children:"Page d'accueil"}),Object(f.jsx)("label",{className:"nav-link m-0","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:function(){for(var e=[["id","name","answer"]],t=0,n=Object.entries(s);t<n.length;t++){var a=Object(l.a)(n[t],2),c=a[0],i=a[1];e.push([c,i.name,i.answer])}new x(e,"my_csv.csv").download(!0)},children:"Importer la checklist"}),Object(f.jsx)("label",{className:"nav-link m-0","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:function(){c&&O(c,"image.png")},children:"Importer la signature"}),Object(f.jsxs)("li",{className:"nav-item dropdown",children:[Object(f.jsx)("label",{className:"nav-link dropdown-toggle m-0",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-expanded":"false",children:"Liste des checklists disponibles"}),Object(f.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",children:i.map((function(e,t){return Object(f.jsx)("li",{children:Object(f.jsxs)("label",{className:"dropdown-item m-0","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:function(){return r(e.checklist_id)},children:["Checklist n\xb0",e.checklist_id]})},t)}))})]}),Object(f.jsx)("label",{className:"nav-link m-0","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:function(){n(1)},children:"Activer le mode Cr\xe9ation"}),Object(f.jsx)("label",{className:"nav-link m-0","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:function(){n(0)},children:"D\xe9sactiver le mode Cr\xe9ation"}),Object(f.jsx)("label",{className:"nav-link m-0","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:function(){a(1)},children:"A propos"})]})})]})})})}var O=function(e,t){var n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.click()},N=n(9),y=n.n(N);function k(e){var t=e.props,n=t.sigpad,a=t.setTrimmedCanvasUrl;return Object(f.jsx)("div",{className:"container iq-card mt-5",children:Object(f.jsxs)("div",{className:"row align-items-center p-0 m-0 h-100",children:[Object(f.jsx)("div",{className:"col-sm-3 m-0 p-0 text-center text-dark",children:"Veuillez rentrer votre signature :"}),Object(f.jsx)("div",{className:"col m-0 p-0 h-100 py-2 ",children:Object(f.jsx)("div",{className:"container iq-card m-0 bg-light border",children:Object(f.jsx)("div",{className:"sigContainer",children:Object(f.jsx)(y.a,{canvasProps:{className:"sigPad"},ref:function(e){n=e}})})})}),Object(f.jsxs)("div",{className:"col-sm-3 mx-2 p-0",children:[Object(f.jsx)("div",{className:"row align-items-center p-0 m-0 mb-2 px-4",children:Object(f.jsx)("button",{type:"button",className:"btn btn-primary w-100",onClick:function(){var e=n.getTrimmedCanvas().toDataURL();a(e)},children:"Valider la signature"})}),Object(f.jsx)("div",{className:" row align-items-center p-0 m-0 px-4",children:Object(f.jsx)("button",{type:"button",className:"btn btn-warning text-dark w-100",onClick:function(){n.clear(),a(null)},children:"R\xe9initialiser"})})]})]})})}var w=n(7),C=n(6),_=n(3),S=n.n(_);function q(e){var t=e.props,n=t.checklist,c=t.setChecklist,s=t.checklistList,i=t.setChecklistList,r=t.checklistId,o=t.setChecklistId,u=t.forceUpdate,b=t.setResult,p=t.setIsDict,x=t.init_dict,g=t.setIsPreCheckDone,O=t.currentQuestion,N=t.setCurrentQuestion,y=Object(a.useState)(n),k=Object(l.a)(y,2),_=k[0],q=k[1],M=Object(a.useState)(n&&n.values.length?n.values[0].name:" "),Q=Object(l.a)(M,2),E=Q[0],I=Q[1],L=Object(a.useState)(n&&n.comment?n.comment:null),A=Object(l.a)(L,2),K=A[0],D=A[1],P=Object(a.useState)({}),F=Object(l.a)(P,2),B=F[0],V=F[1],T=Object(a.useState)({}),U=Object(l.a)(T,2),R=U[0],z=U[1],G=Object(a.useState)(0),J=Object(l.a)(G,2),H=J[0],Y=J[1],W=[];n&&function e(t){t.id>0&&W.push(t.id);var n,a=Object(C.a)(t.values);try{for(a.s();!(n=a.n()).done;){e(n.value)}}catch(c){a.e(c)}finally{a.f()}}(n);var X=[];O&&(X=[],d.forEach((function(e){X.push({labelKey:e,value:h(e),isSelected:O.check.includes(e)})})));var Z=[];O&&(Z=[],m.forEach((function(e){Z.push({labelKey:e,value:v(e)})})));var $=[];O&&($=[],j.forEach((function(e){$.push({labelKey:e,value:e})})));var ee=[];function te(e){N(e&&e.values.length?e.values[0]:null),q(e),I(e&&e.values.length?e.values[0].name:""),D(e&&e.values.length?e.values[0].comment:"")}function ne(e,t,n){if(e.id===n)return console.log("found",e),_=t,N(O=e),q(_),I(O.name),V({}),D(O.comment),Y(!H),O;var a,c=null,s=Object(C.a)(e.values);try{for(s.s();!(a=s.n()).done;){c=ne(a.value,e,n)||c}}catch(i){s.e(i)}finally{s.f()}return c}function ae(){_&&(_.values=_.values.filter((function(e){return e.id!==O.id})),te(n),u())}function ce(e,t){return e.id===t||e.values.length&&e.values.every((function(e){return ce(e)}))}function se(e){if(!ce(O,e)){var t=Object(w.a)({},O);t.cond={yes:[],no:[],num:[]},ae(),ne(n,null,e),O.values.splice(0,0,t),ne(n,null,t.id),u()}}O&&(ee=[],O.check.forEach((function(e){ee.push({labelKey:e,value:h(e)})})));var ie=function(e){o(e),n=s.filter((function(t){return t.checklist_id===e}))[0],c(n),b({}),p(x),g([]),Y(!H),te(n)},le=function(e){B||(B={}),B.var&&["diabetic","difficult_intubation","gender"].includes(B.var)?B.val=e.selectedKey[0]:B.val=e.target.value,V(B),u()},re=function(e){R||(R={}),R.var&&["diabetic","difficult_intubation","gender"].includes(R.var)?R.val=e.selectedKey[0]:R.val=e.target.value,z(R),u()},oe=function(){H=(H+1)%4};return Object(f.jsxs)("div",{className:"container iq-card pt-2 border border-dark",children:[Object(f.jsx)("div",{className:"iq-card bg-primary text-center mb-2",children:Object(f.jsxs)("div",{className:"card-body",children:[Object(f.jsx)("h4",{className:"card-title text-white",children:"Mode Cr\xe9ation "}),Object(f.jsx)("p",{className:"card-text  m-0",children:"Vous pouvez ajouter, supprimer, modifier des checklists et des questions ici."}),Object(f.jsx)("p",{className:"card-text ",children:"La checklist modifi\xe9e s'affiche en dessous."})]})}),Object(f.jsxs)("div",{className:"row align-items-center p-0 m-0 pb-2 border-bottom border-",children:[Object(f.jsx)("div",{className:"col align-items-center ",children:Object(f.jsxs)("div",{className:"dropright text-center",children:[Object(f.jsx)("button",{className:"btn btn-info dropdown-toggle ",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"S\xe9lectionnez la checklist"}),Object(f.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(f.jsx)("li",{children:Object(f.jsx)("label",{className:"dropdown-item ",onClick:function(e){!function(){var e=s.length?s[s.length-1].checklist_id+1:0,t={checklist_id:e,id:-1,num_values:[],values:[{id:1,name:"",check:["yes","no"],cond:{yes:[],no:[],num:[]},values:[]}]};s.push(t),i(s),ie(e)}(),u()},children:"Nouvelle checklist"})}),s.map((function(e,t){return Object(f.jsx)("li",{children:Object(f.jsxs)("label",{className:"dropdown-item ",onClick:function(){ie(e.checklist_id)},children:["Checklist n\xb0",e.checklist_id]})},t)}))]})]})}),Object(f.jsx)("div",{className:"col align-items-center p-2",children:Object(f.jsxs)("div",{className:"iq-card card-light text-dark text-center shadow-sm mb-0 ",children:["Checklist n\xb0",r]})}),Object(f.jsx)("div",{className:"col align-items-center p-2",children:Object(f.jsxs)("div",{className:"iq-card card-light text-dark text-center shadow-sm mb-0",children:["Question n\xb0",O?O.id:" -"]})}),Object(f.jsx)("div",{className:"col align-items-center ",children:Object(f.jsxs)("div",{className:"dropleft text-center",children:[Object(f.jsx)("button",{className:"btn btn-info dropdown-toggle  ",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"S\xe9lectionnez la question"}),Object(f.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(f.jsx)("li",{children:Object(f.jsx)("label",{className:"dropdown-item ",onClick:function(e){!function(){var e=W.length?W[W.length-1]:0,t={id:e+1,name:"",cond:{yes:[],no:[],num:[]},check:["yes","no"],values:[]};n.values.push(t),ne(n,null,e+1)}(),u()},children:"Nouvelle question"})}),W.map((function(e,t){return Object(f.jsx)("li",{children:Object(f.jsxs)("label",{className:"dropdown-item ",onClick:function(){ne(n,null,e)},children:["Question n\xb0",e]})},t)}))]})]})})]}),O?Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(f.jsx)("div",{className:"col-sm-4 align-items-center text-dark ",children:"Nom de la question :"}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center",children:Object(f.jsx)("input",{className:"form-control w-100 mb-0",type:"text ","aria-label":"text input",value:E,onChange:function(e){E=e.target.value,I(E)}})}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center ",children:Object(f.jsx)("button",{className:"btn btn-warning ",onClick:function(){return O.name=E,N(O),void u()},children:"Valider le nom"})})]}),Object(f.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(f.jsx)("div",{className:"col-sm-4 align-items-center text-dark  ",children:"Commentaire (optionnel) de la question :"}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center ",children:Object(f.jsx)("textarea",{className:"form-control form-control-custom",id:"exampleFormControlTextarea1",rows:"2",value:K||"",onChange:function(e){K=e.target.value,D(K)}})}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:Object(f.jsx)("button",{className:"btn btn-warning ",onClick:function(e){K?O.comment=K:delete O.comment,u(),u()},children:"Valider le commentaire"})})]}),Object(f.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(f.jsx)("div",{className:"col-sm-4 align-items-center text-dark",children:"Placer la question \xe0 la suite d'une autre :"}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center"}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:Object(f.jsxs)("div",{className:"dropleft text-center",children:[Object(f.jsx)("button",{className:"btn btn-warning dropdown-toggle ",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"Quelle question ?"}),Object(f.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(f.jsx)("li",{children:Object(f.jsx)("label",{className:"dropdown-item ",onClick:function(){return se(-1)},children:"Au d\xe9but"})}),W.map((function(e,t){return Object(f.jsx)("li",{children:Object(f.jsxs)("label",{className:"dropdown-item ",onClick:function(){return function(e){if(!ce(O,e)){var t=Object(w.a)({},O);ae(),ne(n,null,e);var a=_.values.findIndex((function(t){return t.id===e}));t.cond={yes:[],no:[],num:[]},_.values.splice(a+1,0,t),ne(n,null,t.id),u()}}(e)},children:["Question n\xb0",e]})},t)}))]})]})})]}),Object(f.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(f.jsx)("div",{className:"col-sm-4 align-items-center text-dark ",children:"Placer la question comme d\xe9coulant d'une autre :"}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center"}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:Object(f.jsxs)("div",{className:"dropleft text-center",children:[Object(f.jsx)("button",{className:"btn btn-warning dropdown-toggle ",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"Quelle question ?"}),Object(f.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(f.jsx)("li",{children:Object(f.jsx)("label",{className:"dropdown-item ",onClick:function(){return se(-1)},children:"Au d\xe9but"})}),W.map((function(e,t){return Object(f.jsx)("li",{children:Object(f.jsxs)("label",{className:"dropdown-item ",onClick:function(){return se(e)},children:["Question n\xb0",e]})},t)}))]})]})})]}),Object(f.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(f.jsx)("div",{className:"col-sm-4 align-items-center text-dark ",children:"Quelles r\xe9ponses possibles ? :"}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center"}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:Object(f.jsx)(S.a,{className:" w-100 ",selectStyle:"btn-warning",options:X,isMultiSelect:!0,placeholder:"Aucune",onChange:function(e){e.selectedKey.length&&(O.check=e.selectedKey,N(O),console.log("test"),oe(),u())}},H)})]}),Object(f.jsxs)("div",{className:"border-bottom m-0 py-2 text-center",children:[Object(f.jsxs)("button",{className:"btn btn-secondary m-auto p-2 my-2 ",type:"button","data-toggle":"collapse","data-target":"#collapseQuestionConditions","aria-expanded":"false","aria-controls":"collapseExample",children:[Object(f.jsx)("i",{className:"las la-angle-down"})," Ajouter/Supprimer des conditions sur les autres questions ",Object(f.jsx)("i",{className:"las la-angle-down"})]}),Object(f.jsx)("div",{className:"collapse m-0 p-0",id:"collapseQuestionConditions",children:Object(f.jsxs)("div",{className:"row align-items-center p-2 m-0",children:[Object(f.jsx)("div",{className:"col-sm-3 align-items-center text-dark ",children:"Quelles conditions sur les r\xe9ponses ? :"}),Object(f.jsx)("div",{className:"col-sm-9 align-items-center",children:d.map((function(e,t){return Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"col align-items-center p-2 my-auto",children:Object(f.jsx)("div",{className:"iq-card card-grey text-center shadow-sm m-0 text-dark ",children:h(e)})}),Object(f.jsx)("div",{className:"col align-items-center p-2",children:Object(f.jsx)("div",{className:"list-group list-group-horizontal m-0",children:O&&O.cond[e]?O.cond[e].map((function(t,n){return Object(f.jsxs)("button",{className:" list-group-item list-group-item-custom btn btn-outline-secondary ",type:"button",onClick:function(){return function(e,t){O.cond[e]=O.cond[e].filter((function(e){return e!==t})),console.log(O),N(O),u()}(e,t)},children:[t," "]},n)})):null})}),Object(f.jsx)("div",{className:"col align-items-center p-2 my-auto",children:Object(f.jsxs)("div",{className:"dropleft text-center",children:[Object(f.jsx)("button",{className:"btn btn-warning dropdown-toggle ",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"Quelle question ?"}),Object(f.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:W.map((function(t,n){return Object(f.jsx)("li",{children:Object(f.jsxs)("label",{className:"dropdown-item ",onClick:function(){return function(e,t){O.cond[e]?O.cond[e].push(t):O.cond[e]=[t],N(O),u()}(e,t)},children:["Question n\xb0",t]})},n)}))})]})})]},t)}))})]})})]}),Object(f.jsxs)("div",{className:"border-bottom m-0 py-2 text-center",children:[Object(f.jsxs)("button",{className:"btn btn-secondary m-auto p-2 my-2 ",type:"button","data-toggle":"collapse","data-target":"#collapseNumConditions","aria-expanded":"false","aria-controls":"collapseExample",children:[Object(f.jsx)("i",{className:"las la-angle-down"})," Ajouter/Supprimer des conditions num\xe9riques ",Object(f.jsx)("i",{className:"las la-angle-down"})]}),Object(f.jsx)("div",{className:"collapse m-0 p-0",id:"collapseNumConditions",children:Object(f.jsxs)("div",{className:"col align-items-center p-2 m-0",children:[O&&O.cond.num?O.cond.num.map((function(e,t){return Object(f.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto",children:Object(f.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark ",children:v(e.var)})}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:Object(f.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark ",children:e.op})}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:Object(f.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark",children:e.val})}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto text-center",children:Object(f.jsx)("button",{className:"btn btn-danger ",onClick:function(){return function(e){console.log("supprimer",e),O.cond.num.splice(e,1),console.log(O.cond.num),N(O),u()}(t)},children:Object(f.jsx)("div",{"data-icon":"\ue053",className:"icon mt-1"})})})]},t)})):null,Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto",children:Object(f.jsx)(S.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quelle variable ?",options:Z,onChange:function(e){B||(B={}),(B={}).var=e.selectedKey[0],V(B),console.log("pairindicator",H),console.log(B),oe(),u()}},H)}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto",children:["diabetic","difficult_intubation","gender"].includes(B.var)?Object(f.jsx)("div",{children:"est"}):Object(f.jsx)(S.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quel op\xe9rateur ?",options:$,onChange:function(e){B||(B={}),B.op=e.selectedKey[0],V(B),u()}},H)}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:["diabetic","difficult_intubation"].includes(B.var)?Object(f.jsx)(S.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quelle valeur ?",options:[{labelKey:"vrai",value:"Vrai"},{labelKey:"faux",value:"Faux"}],onChange:le},B.var):Object(f.jsxs)("div",{children:[" ","gender"===B.var?Object(f.jsx)(S.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quelle valeur ?",options:[{labelKey:"F",value:"F"},{labelKey:"M",value:"M"}],onChange:le},B.var):Object(f.jsx)("input",{type:"number",className:"form-control ",placeholder:"Quelle valeur ?",onChange:le})," "]})}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center text-center my-auto",children:Object(f.jsx)("button",{className:"btn btn-warning w-100 ",onClick:function(){B.var&&B.val&&["diabetic","difficult_intubation","gender"].includes(B.var)?(O.cond.num.push({var:B.var,op:"est",val:B.val}),N(O),u()):B.var&&B.op&&B.val&&(O.cond.num.push({var:B.var,op:B.op,val:B.val}),N(O),u())},children:"Valider"})})]})})]})})]}),Object(f.jsxs)("div",{className:"border-bottom m-0 py-2 text-center",children:[Object(f.jsxs)("button",{className:"btn btn-secondary m-auto p-2 my-2 ",type:"button","data-toggle":"collapse","data-target":"#collapsePreCheck","aria-expanded":"false","aria-controls":"collapseExample",children:[Object(f.jsx)("i",{className:"las la-angle-down"})," Ajouter/Supprimer des conditions pour que la question soit pr\xe9-check\xe9e ",Object(f.jsx)("i",{className:"las la-angle-down"})]}),Object(f.jsx)("div",{className:"collapse m-0 p-0",id:"collapsePreCheck",children:Object(f.jsxs)("div",{className:"col align-items-center p-2 m-0",children:[O&&O.pre_check?O.pre_check.if.map((function(e,t){return Object(f.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto",children:Object(f.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark ",children:v(e.var)})}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:Object(f.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark",children:e.op})}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:Object(f.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark",children:e.val})}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto text-center",children:Object(f.jsx)("button",{className:"btn btn-danger ",onClick:function(){return function(e){console.log("supprimer",e),O.pre_check.if.splice(e,1),O.pre_check.if.length||(O.pre_check=null),N(O),u()}(t)},children:Object(f.jsx)("div",{"data-icon":"\ue053",className:"icon mt-1"})})})]},t)})):null,O&&O.pre_check?Object(f.jsx)("div",{className:"row justify-content-md-center py-2",children:Object(f.jsx)("div",{className:"col-sm-2 align-items-center my-auto ",children:Object(f.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark",children:h(O.pre_check.then)})})}):null,Object(f.jsx)("div",{children:Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto",children:Object(f.jsx)(S.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quelle variable ?",options:Z,onChange:function(e){R||(R={}),(R={}).var=e.selectedKey[0],z(R),oe(),u()}},H)}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:["diabetic","difficult_intubation","gender"].includes(R.var)?Object(f.jsx)("div",{children:"est"}):Object(f.jsx)(S.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quel op\xe9rateur ?",options:$,onChange:function(e){R||(R={}),R.op=e.selectedKey[0],z(R),u()}},H)}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto",children:["diabetic","difficult_intubation"].includes(R.var)?Object(f.jsx)(S.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quelle valeur ?",options:[{labelKey:"vrai",value:"Vrai"},{labelKey:"faux",value:"Faux"}],onChange:re},R.var):Object(f.jsxs)("div",{children:[" ","gender"===R.var?Object(f.jsx)(S.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quelle valeur ?",options:[{labelKey:"F",value:"F"},{labelKey:"M",value:"M"}],onChange:re},R.var):Object(f.jsx)("input",{type:"number",className:"form-control ",placeholder:"Quelle valeur ?",onChange:re})," "]})}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center text-center my-auto",children:Object(f.jsx)("button",{className:"btn btn-warning w-100  ",onClick:function(){R.var&&R.val&&R.then&&["diabetic","difficult_intubation","gender"].includes(R.var)?(O.pre_check||(O.pre_check={if:[],then:null}),O.pre_check.then=R.then,O.pre_check.if.push({var:R.var,op:"est",val:R.val}),N(O),u()):R.var&&R.op&&R.val&&R.then&&(O.pre_check||(O.pre_check={if:[],then:null}),O.pre_check.then=R.then,O.pre_check.if.push({var:R.var,op:R.op,val:R.val}),N(O),u())},children:"Valider"})})]}),Object(f.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(f.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:Object(f.jsx)(S.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quel pre-check ?",options:ee,onChange:function(e){R||(R={}),R.then=e.selectedKey[0],z(R),u()}},R.var)}),Object(f.jsx)("div",{className:"col-sm-3 align-items-center ",children:Object(f.jsx)("button",{className:"btn btn-warning w-100  ",onClick:function(){O.pre_check&&(O.pre_check.then=R.then,N(O),u())},children:"Modifier le precheck"})})]})]})})]})})]})]}):null,Object(f.jsxs)("div",{className:"row align-items-center p-2 m-0",children:[Object(f.jsx)("div",{className:"col-sm-4 align-items-center text-center",children:Object(f.jsx)("button",{className:"btn btn-danger  ",onClick:function(){console.log(s,r),s=s.filter((function(e){return e.checklist_id!==r})),console.log(s),o(s.length?s[0].checklist_id:" -"),n=s.length?s[0]:null,c(n),i(s),te(n)},children:"Supprimer la checklist"})}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center text-center",children:Object(f.jsx)("button",{className:"btn btn-warning  ",onClick:function(){return function(e){var t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e));console.log(t);var n=document.createElement("a");n.href=t,n.download="checklist.json",document.body.appendChild(n),n.click(),n.remove()}(s)},children:"Sauvegarder la liste de checklists"})}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center text-center",children:Object(f.jsx)("button",{className:"btn btn-danger ",onClick:ae,children:"Supprimer la question"})})]})]})}function M(e){e.props;return Object(f.jsx)("div",{className:"",children:Object(f.jsx)("div",{className:"card-inv text-center",children:Object(f.jsxs)("div",{className:"card-body",children:[Object(f.jsx)("h5",{className:"card-title m-0 text-custom",children:"SLS Checklist App"}),Object(f.jsx)("p",{className:"card-text text-custom m-0",children:"v0.6.1"}),Object(f.jsx)("p",{className:"card-text text-custom m-0",children:"D\xe9velopp\xe9 par Th\xe9o Stassen"}),Object(f.jsx)("p",{className:"card-text text-custom",children:"theo.stassen@protonmail.com"})]})})})}function Q(e){var t=e.props,n=t.patientList,a=t.currentPatient,c=t.setCurrentPatient,s=t.setIsDict,i=t.setResult,l=t.setIsPreCheckDone,r=t.forceUpdate;return Object(f.jsx)("div",{className:"container iq-card p-2 py-3 ",children:Object(f.jsxs)("div",{className:"row align-items-center m-0",children:[Object(f.jsx)("div",{className:"col-sm-4 align-items-center text-dark",children:"Patient Actuel :"}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center ",children:Object(f.jsxs)("div",{className:"iq-card bg-primary text-center  m-0",children:[a.firstname,"\xa0",a.lastname]})}),Object(f.jsx)("div",{className:"col-sm-4 align-items-center ",children:Object(f.jsxs)("div",{className:"dropdown text-center",children:[Object(f.jsx)("button",{className:"btn btn-secondary btn-round dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"S\xe9lectionnez le patient"}),Object(f.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:n.map((function(e,t){return Object(f.jsx)("li",{children:Object(f.jsxs)("label",{className:"dropdown-item ",onClick:function(){return function(e){var t=n.filter((function(t){return t.id===e}))[0];c(t),i({});var a={};d.forEach((function(e){a[e]={0:!0}})),s(a),l([]),r()}(e.id)},children:[e.firstname,"\xa0",e.lastname]})},t)}))})]})})]})})}function E(e){var t=e.init_items,n=e.item,a=e.dicts,c=e.forceUpdate,s=e.values_filter_cond,i=e.creationMode,r=e.currentId,o=Object(l.a)(a,7),u=o[0],m=o[1],b=o[2],j=o[3],v=o[4],x=o[5],g=o[6],O=function(e){var a=!u[e][n.id],c=d.filter((function(t){return t!==e}));a?(j[n.id]={name:n.name,answer:e},I(t,t,n.id,u,m,j,c)):(delete j[n.id],I(t,t,n.id,u,m,j,[e])),v(j),u[e][n.id]=a,c.forEach((function(e){u[e][n.id]=!1})),m(u)};n.pre_check&&!x.includes(n.id)&&n.pre_check.if.every((function(e){return p(b[e.var],e.op,e.val)}))&&(O(n.pre_check.then),x.push(n.id),g(x));var N=null,y=null;return n.values&&(y=s(n.values,u,b,i)),y&&y.length&&(N=Object(f.jsx)("ul",{className:"mb-0",children:y.map((function(e,n){return Object(f.jsx)(E,{init_items:t,item:e,dicts:a,forceUpdate:c,values_filter_cond:s,creationMode:i,currentId:r},n)}))})),Object(f.jsxs)("div",{className:"container p-0 mt-3 mx-auto ",children:[Object(f.jsxs)("div",{className:"row align-items-center m-0 p-0"+(i&&r===n.id?" border border-danger ":" "),children:[Object(f.jsxs)("div",{className:"col list-group list-group-horizontal m-0 p-0 w-auto",children:[Object(f.jsx)("div",{className:"list-group-item m-0 p-0  bg-info text-center shadow-sm my-auto",children:Object(f.jsx)("h5",{className:"card-body p-auto ",children:n.id})}),Object(f.jsxs)("div",{className:"list-group-item m-0 p-0 w-100 shadow-sm h-auto text-dark",children:[n.comment?Object(f.jsx)("div",{className:"alert alert-light m-0 mt-0 border-0 text-primary my-auto",role:"alert",children:n.comment}):null,Object(f.jsx)("div",{className:"card-body my-auto",children:n.name})]})]}),n.check.length?Object(f.jsx)("div",{className:"col-md-auto p-0 pl-3",children:Object(f.jsxs)("div",{className:"list-group list-group-horizontal ",children:[d.map((function(e,t){return n.check.includes(e)?Object(f.jsxs)("label",{className:"list-group-item list-group-item-custom btn m-0"+(0===t?" btn-outline-success":1===t?" btn-outline-danger":" btn-outline-secondary"),children:[Object(f.jsx)("input",{type:"checkbox","aria-label":"Checkbox",checked:u[e][n.id]?1:0,onChange:function(t){O(e),c()}}),"\xa0",h(e)]},t):null})),n.check.includes("text")?Object(f.jsx)("div",{className:"input-group-prepend",children:Object(f.jsx)("div",{className:"input-group-text",children:Object(f.jsx)("input",{className:"card w-100 text-custom",type:"text","aria-label":"text input",onChange:function(e){var t=e.target.value;j[n.id]={name:n.name,answer:t},v(j)}})})}):null]})}):Object(f.jsxs)("div",{className:"col-sm-6",children:[" ",null," "]})]}),N]})}function I(e,t,n,a,c,s,i){var l=!1;t.cond&&i.forEach((function(e){t.cond[e]&&t.cond[e].includes(n)&&(d.forEach((function(e){a[e][t.id]=!1})),delete s[t.id],l=!0)})),t.values&&t.values.length&&t.values.forEach((function(t){I(e,t,n,a,c,s,i)})),n!==t.id&&l&&I(e,e,t.id,a,c,s,i)}function L(e){var t=e.section_title;return console.log(t),Object(f.jsx)("div",{className:"card p-2 px-4 mb-2 text-primary shadow-sm border-bottom border-top border-dark",children:t})}function A(){var e=Object(a.useReducer)((function(e){return e+1}),0),t=Object(l.a)(e,2)[1],n=Object(a.useState)(0),c=Object(l.a)(n,2),s=c[0],i=c[1],u=Object(a.useState)(r),m=Object(l.a)(u,2),b=m[0],j=m[1],h=Object(a.useState)(o),v=Object(l.a)(h,1)[0],p=Object(a.useState)(v[0]),x=Object(l.a)(p,2),O=x[0],N=x[1],y=Object(a.useState)(b.filter((function(e){return e.checklist_id===s}))[0]),w=Object(l.a)(y,2),C=w[0],_=w[1],S=Object(a.useState)({}),I=Object(l.a)(S,2),A=I[0],D=I[1],P=Object(a.useState)([]),F=Object(l.a)(P,2),B=F[0],V=F[1],T=Object(a.useState)(C&&C.values.length?C.values[0]:null),U=Object(l.a)(T,2),R=U[0],z=U[1],G=Object(a.useState)(0),J=Object(l.a)(G,2),H=J[0],Y=J[1],W=Object(a.useState)(0),X=Object(l.a)(W,2),Z=X[0],$=X[1],ee=Object(a.useState)(null),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],ce={};d.forEach((function(e){ce[e]={0:!0}}));var se=Object(a.useState)(ce),ie=Object(l.a)(se,2),le=ie[0],re=ie[1],oe=C?C.num_values:[],de={};oe.forEach((function(e){de[e.var]=e.val}));for(var ue=0,me=Object.entries(O);ue<me.length;ue++){var be=Object(l.a)(me[ue],2),je=be[0],he=be[1];de[je]=he}de.age=function(e){var t=e.split("/");return(new Date).getFullYear()-t[2]}(de.dateofbirth);var ve=[le,re,de,A,D,B,V],pe=null;C&&C.values&&(pe=K(C.values,le,de,H));return console.log(pe),Object(f.jsxs)("div",{className:"min-vh-100 content-page iq-bg-info",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)(g,{props:{setCreationMode:Y,setCreditMode:$,trimmedCanvasUrl:ne,result:A,checklistList:b,swapchecklist:function(e){i(e),C=b.filter((function(t){return t.checklist_id===e}))[0],_(C),D({});var t={};return d.forEach((function(e){t[e]={0:!0}})),re(t),V([]),console.log("isdict after swapchecklist",le),C}}}),Z?Object(f.jsx)(M,{props:null}):Object(f.jsxs)("div",{children:[H?Object(f.jsx)(q,{props:{checklist:C,setChecklist:_,checklistList:b,setChecklistList:j,checklistId:s,setChecklistId:i,forceUpdate:t,setResult:D,setIsDict:re,init_dict:ce,setIsPreCheckDone:V,currentQuestion:R,setCurrentQuestion:z}}):Object(f.jsx)(Q,{props:{patientList:v,currentPatient:O,setCurrentPatient:N,setIsDict:re,setResult:D,setIsPreCheckDone:V,init_dict:ce,forceUpdate:t}}),Object(f.jsx)("div",{className:"container p-0 border-bottom border-right border-left border-dark",children:pe?pe.map((function(e,n){return Object(f.jsxs)("div",{children:[e.section_title?Object(f.jsx)(L,{section_title:e.section_title}):Object(f.jsx)("div",{className:"border-top border-dark"}),Object(f.jsx)("div",{className:"mb-3 px-3",children:Object(f.jsx)(E,{init_items:C,item:e,dicts:ve,forceUpdate:t,values_filter_cond:K,creationMode:H,currentId:R.id},n)})]})})):null}),H?null:Object(f.jsx)(k,{props:{sigpad:{},setTrimmedCanvasUrl:ae}})]})]}),Object(f.jsx)("div",{children:Object(f.jsx)("nav",{className:"navbar",children:Object(f.jsx)("label",{className:"navbar-brand",children:null})})})]})}function K(e,t,n,a){return e.filter((function(e){return Object.keys(e.cond).every((function(n){return"num"===n||!e.cond[n]||e.cond[n].every((function(e){return t[n][e]}))}))&&(a||e.cond.num.every((function(e){return!n[e.var]||p(n[e.var],e.op,e.val)})))}))}var D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,24)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))};i.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(A,{})}),document.getElementById("root")),D()}},[[23,1,2]]]);
//# sourceMappingURL=main.37d7f12a.chunk.js.map