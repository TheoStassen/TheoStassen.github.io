(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{143:function(e,t,n){"use strict";n.r(t);var l=n(1),c=n.n(l),a=n(68),s=n.n(a),i=(n(74),n(2)),r=(n(75),[[['"id"','"name"','"parent_id"','"position"','"comment"','"section_title"','"cond"','"check"','"color"','"pre_check"'],[1,'"Intubation Difficile ? "',-1,0,null,'"V\xe9rifications concernant l\'intubation difficile"','{"yes":[],"no":[],"num":[]}','["yes","no","idk"]',"[0,1,2]",'{"if":[[{"var":"difficult_intubation","op":"est","val":"vrai"}]],"then":"yes"}'],[2,'"A confirmer l\'incubation difficile"',1,0,null,null,'{"yes":[],"no":[],"idk":[1],"num":[]}','["yes","no"]',"[1,0]",null],[3,'"2\xe8me Anesth\xe9siste"',1,1,null,null,'{"yes":[1],"no":[],"num":[]}','["yes","no"]',"[1,0]",null],[4,'"2\xe8me Infirmi\xe8re"',1,2,null,null,'{"yes":[1],"no":[],"num":[]}','["yes","no"]',"[0,1]",null],[5,'"Mat\xe9riel"',1,3,null,null,'{"yes":[1],"no":[],"num":[]}',"[]",null,null],[6,'"Glidescope"',5,0,null,null,'{"yes":[1],"no":[],"num":[]}','["yes","no"]',"[0,1]",null],[7,'"Laryngoscope"',5,1,null,null,'{"yes":[1],"no":[],"num":[]}','["yes","no"]',"[0,1]",null],[8,'"Set Trach\xe9o"',5,2,null,null,'{"yes":[1],"no":[],"num":[]}','["yes","no"]',"[0,1]",null],[9,'"Protocole"',1,4,null,null,'{"yes":[1],"no":[],"num":[]}','["yes","no"]',"[0,1]",null],[10,'"Est-elle susceptible d\'\xeatre enceinte ?"',-1,1,'"(Les donn\xe9es patient nous indiquent que la patiente est \xe2g\xe9e entre 15 et 60 ans)"','"V\xe9rifications concernant une possible grossesse"','{"yes":[],"no":[],"num":[{"var":"age","op":">","val":15},{"var":"age","op":"<","val":60},{"var":"gender","op":"=","val":"F"}]}','["yes","no"]',"[0,1]",null],[11,'"Arr\xeat des r\xeagles depuis ?"',10,0,null,null,'{"yes":[10],"no":[],"num":[]}','["text"]',null,null],[12,'"Test disponible ?"',10,1,null,null,'{"yes":[10],"no":[],"num":[]}','["yes","no"]',"[0,1]",null],[13,'"N\xe9gatif ?"',12,0,null,null,'{"yes":[12],"no":[],"num":[]}','["yes","no"]',"[0,1]",null],[14,'"Faire test maintenant ?"',12,1,null,null,'{"yes":[],"no":[12],"num":[]}','["yes","no"]',"[0,1]",null],[15,'"Postposer l\'intervention ?"',12,2,null,null,'{"yes":[],"no":[12],"num":[]}','["yes","no"]',"[0,1]",null],[16,'"Le patient est-il diab\xe9tique ?"',-1,2,null,'"V\xe9rifications concernant le diab\xe8te"','{"yes":[],"no":[],"num":[]}','["yes","no"]',"[0,1]",'{"if":[[{"var":"diabetic","op":"est","val":"vrai"}]],"then":"yes"}'],[17,'"Traitement Oral ?"',16,0,null,null,'{"yes":[16],"no":[],"num":[]}','["yes","no"]',"[0,1]",null],[18,'"Arr\xeat des m\xe9dicaments ?"',17,0,null,null,'{"yes":[17],"no":[],"num":[]}','["yes","no"]',"[0,1]",null],[19,'"Traitement par piqure \xe0 insuline ?"',16,1,null,null,'{"yes":[16],"no":[17],"num":[]}','["yes","no"]',"[0,1]",null],[20,'"Derni\xe8re piqure le ? "',19,0,null,null,'{"yes":[19],"no":[],"num":[]}','["text"]',null,null],[21,'"Glyc\xe9mie \xe0 l\'arriv\xe9e HJ ?"',16,2,null,null,'{"yes":[16],"no":[],"num":[]}','["normal","anormal"]',"[0,1]",null],[22,'"Consentement chirugicaux et an\xe9st\xe9siques de p\xe8re/m\xe8re"',-1,3,'"Enfant de <15 ans, n\xe9cessite les consentement des parents"','"V\xe9rifications concernant les consentements"','{"yes":[],"no":[],"num":[{"var":"age","op":"<","val":15}]}',"[]",null,null],[23,'"Consentement chirugical du p\xe8re"',22,0,null,null,'{"yes":[],"num":[{"var":"age","op":"<","val":15}]}','["yes","no"]',"[0,1]",null],[24,'"Consentement chirurgical de la m\xe8re"',22,1,null,null,'{"yes":[],"num":[{"var":"age","op":"<","val":15}]}','["yes","no"]',"[0,1]",null],[25,'"Consentement anest\xe9sique du p\xe8re"',22,2,null,null,'{"yes":[],"num":[{"var":"age","op":"<","val":15}]}','["yes","no"]',"[0,1]",null],[26,'"Consentement anest\xe9sique de la m\xe8re"',22,3,null,null,'{"yes":[],"num":[{"var":"age","op":"<","val":15}]}','["yes","no"]',"[0,1]",null],[27,'"Checks vernis \xe0 ongle"',-1,4,'"Ado/Adulte, n\xe9cessite v\xe9rification du vernis \xe0 ongle et des proth\xe8ses auditives/dentaires"','"Checks g\xe9n\xe9raux pour anest\xe9sie"','{"yes":[],"num":[{"var":"age","op":">","val":10}]}','["ok","not_ok"]',"[0,1]",null],[28,'"Check Proth\xe8ses dentaires"',27,0,null,null,'{"yes":[],"num":[{"var":"age","op":">","val":10}]}','["ok","not_ok"]',"[0,1]",null],[29,'"Check Proth\xe8ses auditives"',27,1,null,null,'{"yes":[],"num":[{"var":"age","op":">","val":10}]}','["ok","not_ok"]',"[0,1]",null],[30,'"Maladie transmissible ?"',-1,5,'"Si oui, l\'information sera consid\xe9r\xe9e dans les checklists suivantes (accueil du bloc, salle de r\xe9veil)"','"V\xe9rifications maladadies transmissibles"','{"yes":[],"num":[]}','["yes","no"]',"[0,1]",null],[31,'"Par voie a\xe9rienne ? "',30,0,null,null,'{"yes":[30],"num":[]}','["yes","no"]',"[0,1]",'{"if":[[{"val":"yes","var":34},{"val":"yes","var":37}]],"then":"no"}'],[32,'"EPI (Masque FFP2, Visi\xe8re)"',31,0,null,null,'{"yes":[31],"num":[]}','["yes","no"]',"[0,1]",null],[33,'"Protocole"',31,1,null,null,'{"yes":[31],"num":[]}','["ok","not_ok"]',"[0,1]",null],[34,'"Par voie sanguine ? "',30,1,null,null,'{"yes":[30],"no":[],"num":[]}','["yes","no"]',"[0,1]",'{"if":[[{"val":"yes","var":31},{"val":"yes","var":37}]],"then":"no"}'],[35,'"EPI (Gants, blouses, lunettes)"',34,0,null,null,'{"yes":[34],"num":[]}','["yes","no"]',"[0,1]",null],[36,'"Protocole"',34,1,null,null,'{"yes":[34],"num":[]}','["ok","not_ok"]',"[0,1]",null],[37,'"Par contact ? "',30,2,null,null,'{"yes":[30],"no":[],"num":[]}','["yes","no"]',"[0,1]",'{"if":[[{"var":31,"val":"yes"},{"val":"yes","var":34}]],"then":"no"}'],[38,'"EPI"',37,0,null,null,'{"yes":[37],"num":[]}','["yes","no"]',"[0,1]",null],[39,'"Protocole"',37,1,null,null,'{"yes":[37],"num":[]}','["ok","not_ok"]',"[0,1]",null],[40,'"Autre moyen de transmission"',30,3,null,null,'{"yes":[30],"no":[31,34,37],"num":[]}','["text"]',"[0,1]",null]],[['"id"','"name"','"parent_id"','"position"','"comment"','"section_title"','"cond"','"check"','"color"','"pre_check"'],[1,'"Intubation Difficile ? "',-1,0,null,null,'{"yes":[],"no":[],"num":[]}','["yes","no","idk"]',"[0,1,2]",'{"if":[{"var":"difficult_intubation","op":"est","val":"vrai"}],"then":"yes"}'],[2,'"A confirmer l\'incubation difficile"',1,0,null,null,'{"yes":[],"no":[],"idk":[1],"num":[]}','["yes","no"]',"[1,0]",null]]]),o=[{id:0,lastname:"Dubois",firstname:"Germaine",gender:"F",dateofbirth:"02/11/1940",diabetic:"faux",difficult_intubation:"vrai"},{id:1,lastname:"Vandamme",firstname:"Gilbert",gender:"M",dateofbirth:"08/25/1960",diabetic:"vrai",difficult_intubation:"vrai"},{id:2,lastname:"Perlot",firstname:"Claude",gender:"M",dateofbirth:"12/16/1975",diabetic:"faux",difficult_intubation:"faux"},{id:3,lastname:"Boulet",firstname:"Arnaud",gender:"M",dateofbirth:"03/17/1981",diabetic:"faux",difficult_intubation:"faux"},{id:4,lastname:"Charlier",firstname:"Emile",gender:"M",dateofbirth:"09/19/1953",diabetic:"faux",difficult_intubation:"vrai"},{id:5,lastname:"Nash",firstname:"Emilie",gender:"F",dateofbirth:"03/30/2015",diabetic:"vrai",difficult_intubation:"vrai"},{id:6,lastname:"Materne",firstname:"Marie",gender:"F",dateofbirth:"08/23/1982",diabetic:"faux",difficult_intubation:"faux"},{id:7,lastname:"Bernard",firstname:"Virginie",gender:"F",dateofbirth:"06/03/1986",diabetic:"faux",difficult_intubation:"faux"},{id:8,lastname:"Lemoine",firstname:"Karine",gender:"F",dateofbirth:"01/25/1977",diabetic:"vrai",difficult_intubation:"vrai"}],d={meds:["Mc","Lis","Kl","Eft"],diseases:["Covid","Grippe","Pneumonie"]},u={meds:"M\xe9dicaments",diseases:"Maladies"},m=[{id:0,question_id:1,info:"R\xe9ponse pr\xe9cedente probl\xe8matique",gravity:0},{id:1,question_id:6,info:"R\xe9ponse pr\xe9cedente positive, mais n\xe9cessite recheck",gravity:1},{id:2,question_id:28,info:"R\xe9ponse pr\xe9cedente positive, mais n\xe9cessite recheck",gravity:1},{id:3,question_id:30,info:"R\xe9ponse pr\xe9cedente probl\xe8matique",gravity:2}],b=(n(76),["yes","no","idk","ok","not_ok","normal","anormal","text","list"]),j={yes:"Oui",no:"Non",idk:"?",ok:"OK",not_ok:"Non OK",normal:"Normal",anormal:"Anormal",text:"Texte",list:"Liste"},h=["diabetic","age","yearofbirth","difficult_intubation","gender"],p={diabetic:"Diab\xe9tique",age:"\xc2ge",yearofbirth:"Ann\xe9e de naissance",difficult_intubation:"Intubation Difficile",gender:"Genre"},v=["<",">","="],x=function(e){return j[e]},g=function(e){return p[e]},f=function(e,t,n){switch(t){case">":return e>n;case"<":return e<n;case"=":case"est":return e===n;default:return!0}};function O(e,t,n,l){this.dataArray=e,this.fileName=t,this.separator=n||",",this.addQuotes=!!l,this.addQuotes&&(this.separator='"'+this.separator+'"'),this.getDownloadLink=function(){var e=this.separator,t=this.addQuotes,n="data:text/csv;charset=utf-8",l=this.dataArray.map((function(n){var l=n.join(e);return l.length&&t?'"'+l+'"':l})).join("\n");return"function"===typeof btoa?(n+=";base64",l=btoa(l)):l=encodeURIComponent(l),this.downloadLink=this.downloadLink||n+","+l},this.getLinkElement=function(e){var t=this.getDownloadLink(),n=this.fileName;return this.linkElement=this.linkElement||function(){var l=document.createElement("a");return l.innerHTML=e||"",l.href=t,l.download=n,l}(),this.linkElement},this.download=function(e){var t=this.getLinkElement();t.style.display="none",document.body.appendChild(t),t.click(),e&&document.body.removeChild(t)}}function y(e){var t=[["id","name","parent_id","position","comment","section_title","cond","check","color","pre_check"]];return t=N(e,t,0,0),console.log(t),new O(t,"my_csv.csv",";").download(!0),t}function N(e,t,n,l){e.id>0&&t.push([e.id,e.name,n,l,e.comment,e.section_title,JSON.stringify(e.cond),JSON.stringify(e.check),JSON.stringify(e.color),JSON.stringify(e.pre_check)]);for(var c=0;c<e.values.length;c++)t=N(e.values[c],t,e.id,c);return t}function k(e,t){return w({checklist_id:t,id:-1,num_values:[],values:[]},e)}function w(e,t){var n=t.filter((function(t){return t[2]===e.id}));if(n.sort((function(e,t){return e[3]-t[3]})),!n.length)return e;for(var l=0;l<n.length;l++){var c=n[l],a={id:c[0],name:JSON.parse(c[1]),parent_id:c[2],position:c[3],comment:JSON.parse(c[4]),section_title:JSON.parse(c[5]),cond:JSON.parse(c[6]),check:JSON.parse(c[7]),color:JSON.parse(c[8]),pre_check:JSON.parse(c[9]),values:[]};a=w(a,t),e.values.push(a)}return e}var _=n(0);function C(e){var t=e.props,n=t.setCreationMode,l=t.setCreditMode,c=t.trimmedCanvasUrl,a=t.checklistList,s=t.swapchecklist,i=t.import_csv_result,r=(t.result,function(){l(0)});return Object(_.jsx)("div",{className:"iq-top-navbar h-auto ",children:Object(_.jsx)("div",{className:"iq-navbar-custom py-2",children:Object(_.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light p-0",children:[Object(_.jsx)("div",{className:"navbar-brand pl-4",children:Object(_.jsx)("a",{href:"#",onClick:r,children:Object(_.jsx)("span",{children:"SLS"})})}),Object(_.jsx)("label",{className:"navbar-toggler p-0 m-0","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(_.jsx)("span",{className:"navbar-toggler-icon"})}),Object(_.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup",children:Object(_.jsxs)("div",{className:"navbar-nav  p-2 pl-4",children:[Object(_.jsx)("label",{className:"nav-link active m-0","aria-current":"page","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:r,children:"Page d'accueil"}),Object(_.jsx)("label",{className:"nav-link m-0","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:i,children:"Importer la checklist"}),Object(_.jsx)("label",{className:"nav-link m-0","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:function(){c&&S(c,"image.png")},children:"Importer la signature"}),Object(_.jsxs)("li",{className:"nav-item dropdown",children:[Object(_.jsx)("label",{className:"nav-link dropdown-toggle m-0",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-expanded":"false",children:"Liste des checklists disponibles"}),Object(_.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",children:a.map((function(e,t){return Object(_.jsx)("li",{children:Object(_.jsxs)("label",{className:"dropdown-item m-0","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:function(){return s(e.checklist_id)},children:["Checklist n\xb0",e.checklist_id]})},t)}))})]}),Object(_.jsx)("label",{className:"nav-link m-0","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:function(){n(1)},children:"Activer le mode Cr\xe9ation"}),Object(_.jsx)("label",{className:"nav-link m-0","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:function(){n(0)},children:"D\xe9sactiver le mode Cr\xe9ation"}),Object(_.jsx)("label",{className:"nav-link m-0","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:function(){l(1)},children:"A propos"})]})})]})})})}var S=function(e,t){var n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.click()},q=n(69),M=n.n(q);function K(e){var t=e.props,n=t.sigpad,l=t.setTrimmedCanvasUrl;return Object(_.jsx)("div",{className:"container iq-card mt-5",children:Object(_.jsxs)("div",{className:"row align-items-center p-0 m-0 h-100",children:[Object(_.jsx)("div",{className:"col-sm-3 m-0 p-0 text-center text-dark",children:"Veuillez rentrer votre signature :"}),Object(_.jsx)("div",{className:"col m-0 p-0 h-100 py-2 ",children:Object(_.jsx)("div",{className:"container iq-card m-0 bg-light border",children:Object(_.jsx)("div",{className:"sigContainer",children:Object(_.jsx)(M.a,{canvasProps:{className:"sigPad"},ref:function(e){n=e}})})})}),Object(_.jsxs)("div",{className:"col-sm-3 mx-2 p-0",children:[Object(_.jsx)("div",{className:"row align-items-center p-0 m-0 mb-2 px-4",children:Object(_.jsx)("button",{type:"button",className:"btn btn-primary w-100",onClick:function(){var e=n.getTrimmedCanvas().toDataURL();l(e)},children:"Valider la signature"})}),Object(_.jsx)("div",{className:" row align-items-center p-0 m-0 px-4",children:Object(_.jsx)("button",{type:"button",className:"btn btn-warning w-100",onClick:function(){n.clear(),l(null)},children:"R\xe9initialiser"})})]})]})})}var E=n(46),Q=n(45),I=n(3),P=n.n(I);function A(e){var t=e.props,n=t.checklist,c=t.setChecklist,a=t.checklistList,s=t.setChecklistList,r=t.checklistId,o=t.setChecklistId,m=t.forceUpdate,j=t.setResult,p=t.setIsDict,f=t.init_dict,O=t.setIsPreCheckDone,N=t.currentQuestion,k=t.setCurrentQuestion,w=Object(l.useState)(n),C=Object(i.a)(w,2),S=C[0],q=C[1],M=Object(l.useState)(n&&n.values.length?n.values[0].name:" "),K=Object(i.a)(M,2),I=K[0],A=K[1],L=Object(l.useState)(n&&n.values[0].comment?n.values[0].comment:null),D=Object(i.a)(L,2),V=D[0],F=D[1],B=Object(l.useState)(n&&n.values[0].section_title?n.values[0].section_title:null),J=Object(i.a)(B,2),T=J[0],R=J[1],U=Object(l.useState)({}),z=Object(i.a)(U,2),G=z[0],H=z[1],W=Object(l.useState)({type:"and",then:N.pre_check&&N.pre_check.then?N.pre_check.then:null}),Y=Object(i.a)(W,2),X=Y[0],Z=Y[1],$=Object(l.useState)(0),ee=Object(i.a)($,2),te=ee[0],ne=ee[1],le=Object(l.useState)(!1),ce=Object(i.a)(le,2),ae=ce[0],se=ce[1],ie=[];n&&function e(t){t.id>0&&ie.push(t.id);var n,l=Object(Q.a)(t.values);try{for(l.s();!(n=l.n()).done;){e(n.value)}}catch(c){l.e(c)}finally{l.f()}}(n);var re=[],oe=[],de=[];N&&(re=[],b.forEach((function(e){["text","list"].includes(e)?de.push({labelKey:e,value:x(e)}):(re.push({labelKey:e,value:x(e),isSelected:N.check.includes(e)}),oe.push({labelKey:e,value:x(e)}))})));var ue=[];N&&(ue=[],h.forEach((function(e){ue.push({labelKey:e,value:g(e)})})));var me=JSON.parse(JSON.stringify(ue));N&&ie.forEach((function(e){me.push({labelKey:e,value:"Question "+e})}));var be=[];N&&(be=[],v.forEach((function(e){be.push({labelKey:e,value:e})})));var je=[];N&&(je=[],N.check.forEach((function(e){je.push({labelKey:e,value:x(e)})})));var he=[];function pe(e){k(e&&e.values.length?e.values[0]:null),q(e),A(e&&e.values.length?e.values[0].name:""),F(e&&e.values.length?e.values[0].comment:"")}function ve(e,t,n){if(e.id===n)return console.log("found",e),S=t,k(N=e),q(S),A(N.name),H({}),F(N.comment),R(N.section_title),ne(!te),N;var l,c=null,a=Object(Q.a)(e.values);try{for(a.s();!(l=a.n()).done;){c=ve(l.value,e,n)||c}}catch(s){a.e(s)}finally{a.f()}return c}function xe(){S&&(S.values=S.values.filter((function(e){return e.id!==N.id})),pe(n),m())}function ge(e,t){return e.id===t||e.values.length&&e.values.every((function(e){return ge(e)}))}function fe(e){if(!ge(N,e)){var t=Object(E.a)({},N);t.cond={yes:[],no:[],num:[]},xe(),ve(n,null,e),N.values.splice(0,0,t),ve(n,null,t.id),m()}}N&&Object.keys(d).forEach((function(e){he.push({labelKey:e,value:u[e]})}));var Oe=function(e){if(e.selectedKey.length)if(e.selectedKey.includes("list")||e.selectedKey.includes("text"))"list"===e.selectedKey[0]?N.check=["list_meds"]:N.check=e.selectedKey;else{N.check=e.selectedKey;var t=N.color;N.check.length>=t.length&&(t=t.concat(new Array(N.check.length-t.length).fill(2))),N.color=t}else N.check=[];k(N),we(),m()},ye=function(e){o(e),n=a.filter((function(t){return t.checklist_id===e}))[0],c(n),j({}),p(f),O([]),ne(!te),pe(n)},Ne=function(e){G||(G={}),G.var&&["diabetic","difficult_intubation","gender"].includes(G.var)?G.val=e.selectedKey[0]:G.val=e.target.value,H(G),m()},ke=function(e){X.var&&!["age","yearofbirth"].includes(X.var)?X.val=e.selectedKey[0]:X.val=e.target.value,Z(X),m()},we=function(){te=(te+1)%4};return console.log(N),Object(_.jsxs)("div",{className:"container iq-card pt-2 border border-dark shadow",children:[Object(_.jsx)("div",{className:"iq-card bg-primary text-center mb-2",children:Object(_.jsxs)("div",{className:"card-body",children:[Object(_.jsx)("h4",{className:"card-title text-white",children:"Mode Cr\xe9ation "}),Object(_.jsx)("p",{className:"card-text  m-0",children:"Vous pouvez ajouter, supprimer, modifier des checklists et des questions ici."}),Object(_.jsx)("p",{className:"card-text ",children:"La checklist modifi\xe9e s'affiche en dessous."})]})}),Object(_.jsxs)("div",{className:"row align-items-center p-0 m-0 pb-2 border-bottom border-",children:[Object(_.jsx)("div",{className:"col align-items-center ",children:Object(_.jsxs)("div",{className:"dropright text-center",children:[Object(_.jsx)("button",{className:"btn btn-info dropdown-toggle ",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"S\xe9lectionnez la checklist"}),Object(_.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(_.jsx)("li",{children:Object(_.jsx)("label",{className:"dropdown-item ",onClick:function(e){!function(){var e=a.length?a[a.length-1].checklist_id+1:0,t={checklist_id:e,id:-1,num_values:[],values:[{id:1,name:"",check:["yes","no"],color:[0,1],cond:{yes:[],no:[],num:[]},values:[]}]};a.push(t),s(a),ye(e)}(),m()},children:"Nouvelle checklist"})}),a.map((function(e,t){return Object(_.jsx)("li",{children:Object(_.jsxs)("label",{className:"dropdown-item ",onClick:function(){ye(e.checklist_id)},children:["Checklist n\xb0",e.checklist_id]})},t)}))]})]})}),Object(_.jsx)("div",{className:"col align-items-center p-2",children:Object(_.jsxs)("div",{className:"iq-card card-light text-dark text-center shadow-sm mb-0 ",children:["Checklist n\xb0",r]})}),Object(_.jsx)("div",{className:"col align-items-center p-2",children:Object(_.jsxs)("div",{className:"iq-card card-light text-dark text-center shadow-sm mb-0",children:["Question n\xb0",N?N.id:" -"]})}),Object(_.jsx)("div",{className:"col align-items-center ",children:Object(_.jsxs)("div",{className:"dropleft text-center",children:[Object(_.jsx)("button",{className:"btn btn-info dropdown-toggle  ",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"S\xe9lectionnez la question"}),Object(_.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(_.jsx)("li",{children:Object(_.jsx)("label",{className:"dropdown-item ",onClick:function(e){!function(){var e=ie.length?ie[ie.length-1]:0,t={id:e+1,name:"",cond:{yes:[],no:[],num:[]},check:["yes","no"],color:[0,1],values:[]};n.values.push(t),ve(n,null,e+1)}(),m()},children:"Nouvelle question"})}),ie.map((function(e,t){return Object(_.jsx)("li",{children:Object(_.jsxs)("label",{className:"dropdown-item ",onClick:function(){ve(n,null,e)},children:["Question n\xb0",e]})},t)}))]})]})})]}),N?Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(_.jsx)("div",{className:"col-sm-4 align-items-center text-dark ",children:"Nom de la question :"}),Object(_.jsx)("div",{className:"col-sm-4 align-items-center",children:Object(_.jsx)("input",{className:"form-control w-100 mb-0",type:"text ","aria-label":"text input",value:I,onChange:function(e){I=e.target.value,A(I)}})}),Object(_.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center ",children:Object(_.jsx)("button",{className:"btn btn-warning ",onClick:function(){return N.name=I,k(N),void m()},children:"Valider le nom"})})]}),Object(_.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(_.jsx)("div",{className:"col-sm-4 align-items-center text-dark  ",children:"Commentaire (optionnel) de la question :"}),Object(_.jsx)("div",{className:"col-sm-4 align-items-center ",children:Object(_.jsx)("textarea",{className:"form-control form-control-custom textarea",id:"exampleFormControlTextarea1",rows:"2",value:V||"",onChange:function(e){V=e.target.value,F(V)}})}),Object(_.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:Object(_.jsx)("button",{className:"btn btn-warning ",onClick:function(e){V?N.comment=V:delete N.comment,m(),m()},children:"Valider le commentaire"})})]}),-1===N.parent_id?Object(_.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(_.jsx)("div",{className:"col-sm-4 align-items-center text-dark  ",children:"Nom de section (optionnel) devant la question :"}),Object(_.jsx)("div",{className:"col-sm-4 align-items-center ",children:Object(_.jsx)("textarea",{className:"form-control form-control-custom textarea",id:"exampleFormControlTextarea1",rows:"2",value:T||"",onChange:function(e){T=e.target.value,R(T)}})}),Object(_.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:Object(_.jsx)("button",{className:"btn btn-warning ",onClick:function(e){T?N.section_title=T:delete N.section_title,m(),m()},children:"Valider le titre"})})]}):null,Object(_.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(_.jsx)("div",{className:"col-sm-4 align-items-center text-dark",children:"Placer la question \xe0 la suite d'une autre :"}),Object(_.jsx)("div",{className:"col-sm-4 align-items-center"}),Object(_.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:Object(_.jsxs)("div",{className:"dropleft text-center",children:[Object(_.jsx)("button",{className:"btn btn-warning dropdown-toggle ",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"Quelle question ?"}),Object(_.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(_.jsx)("li",{children:Object(_.jsx)("label",{className:"dropdown-item ",onClick:function(){return fe(-1)},children:"Au d\xe9but"})}),ie.map((function(e,t){return Object(_.jsx)("li",{children:Object(_.jsxs)("label",{className:"dropdown-item ",onClick:function(){return function(e){if(!ge(N,e)){var t=Object(E.a)({},N);xe(),ve(n,null,e);var l=S.values.findIndex((function(t){return t.id===e}));t.cond={yes:[],no:[],num:[]},S.values.splice(l+1,0,t),ve(n,null,t.id),m()}}(e)},children:["Question n\xb0",e]})},t)}))]})]})})]}),Object(_.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(_.jsx)("div",{className:"col-sm-4 align-items-center text-dark ",children:"Placer la question comme d\xe9coulant d'une autre :"}),Object(_.jsx)("div",{className:"col-sm-4 align-items-center"}),Object(_.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:Object(_.jsxs)("div",{className:"dropleft text-center",children:[Object(_.jsx)("button",{className:"btn btn-warning dropdown-toggle ",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"Quelle question ?"}),Object(_.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(_.jsx)("li",{children:Object(_.jsx)("label",{className:"dropdown-item ",onClick:function(){return fe(-1)},children:"Au d\xe9but"})}),ie.map((function(e,t){return Object(_.jsx)("li",{children:Object(_.jsxs)("label",{className:"dropdown-item ",onClick:function(){return fe(e)},children:["Question n\xb0",e]})},t)}))]})]})})]}),Object(_.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(_.jsx)("div",{className:"col-sm-4 align-items-center text-dark ",children:"Quelles r\xe9ponses possibles ? :"}),Object(_.jsx)("div",{className:"col-sm-4 align-items-center"}),Object(_.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:Object(_.jsxs)("div",{className:"row",children:[ae?Object(_.jsx)(P.a,{className:" col w-100 my-auto ",selectStyle:"btn-warning",options:de,isMultiSelect:!1,placeholder:"Entrer Autres",onChange:Oe},!te):Object(_.jsx)(P.a,{className:" col w-100 my-auto ",selectStyle:"btn-warning",options:re,isMultiSelect:!0,placeholder:"Entrer checkboxs",onChange:Oe},te),Object(_.jsx)("button",{className:"col-sm-2 btn btn-outline-info",onClick:function(){se(!ae)},children:Object(_.jsx)("div",{"data-icon":"\ue049",className:"icon mt-1"})})]})})]}),N.check[0]&&"list"===N.check[0].split("_")[0]?Object(_.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(_.jsx)("div",{className:"col-sm-4 align-items-center text-dark ",children:"Quelle liste ? :"}),Object(_.jsx)("div",{className:"col-sm-4 align-items-center"}),Object(_.jsx)("div",{className:"col-sm-4 align-items-center p-0 text-center",children:Object(_.jsx)("div",{className:"row",children:Object(_.jsx)(P.a,{className:" col w-100 my-auto ",selectStyle:"btn-warning",options:he,isMultiSelect:!1,placeholder:"Aucune",onChange:function(e){e.selectedKey.length&&(N.check=[N.check[0].split("_")[0]+"_"+e.selectedKey[0]],console.log(N.check),k(N),m())}},te)})})]}):null,ae?null:Object(_.jsxs)("div",{className:"border-bottom m-0 py-2 text-center",children:[Object(_.jsxs)("button",{className:"btn btn-secondary m-auto p-2 my-2 ",type:"button","data-toggle":"collapse","data-target":"#collapseColors","aria-expanded":"false","aria-controls":"collapseExample",children:[Object(_.jsx)("i",{className:"las la-angle-down"})," Modifier les couleurs des questions ",Object(_.jsx)("i",{className:"las la-angle-down"})]}),Object(_.jsx)("div",{className:"collapse m-0 p-0",id:"collapseColors",children:Object(_.jsxs)("div",{className:"row align-items-center p-2 m-0 border-bottom",children:[Object(_.jsx)("div",{className:"col-sm-3 align-items-center text-dark ",children:"Avec quelles couleurs ? :"}),Object(_.jsx)("div",{className:"col-sm-9 align-items-center text-center",children:N.check.map((function(e,t){return Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("div",{className:"col text-center justify-content-center my-4",children:Object(_.jsx)("div",{className:" iq-card card-grey text-center shadow-sm text-dark m-0",children:x(e)})}),Object(_.jsx)("div",{className:"col text-center justify-content-center my-4",children:Object(_.jsx)("div",{className:" iq-card card-grey text-center shadow-sm text-dark m-0",children:0===N.color[t]?"Vert":1===N.color[t]?"Rouge":"Gris"})}),Object(_.jsx)("div",{className:"col text-center justify-content-center my-3",children:Object(_.jsxs)("div",{className:"dropleft text-center",children:[Object(_.jsx)("button",{className:"btn btn-warning dropdown-toggle m-0 ",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"Quelle couleur ?"}),Object(_.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:["Vert","Rouge","Gris"].map((function(t,n){return Object(_.jsx)("li",{children:Object(_.jsx)("label",{className:"dropdown-item ",onClick:function(){return function(e,t){N.color[N.check.indexOf(e)]=t,k(N),m()}(e,n)},children:t})},n)}))})]})})]},t)}))})]})})]}),Object(_.jsxs)("div",{className:"border-bottom m-0 py-2 text-center",children:[Object(_.jsxs)("button",{className:"btn btn-secondary m-auto p-2 my-2 ",type:"button","data-toggle":"collapse","data-target":"#collapseQuestionConditions","aria-expanded":"false","aria-controls":"collapseExample",children:[Object(_.jsx)("i",{className:"las la-angle-down"})," Ajouter/Supprimer des conditions sur les autres questions ",Object(_.jsx)("i",{className:"las la-angle-down"})]}),Object(_.jsx)("div",{className:"collapse m-0 p-0",id:"collapseQuestionConditions",children:Object(_.jsxs)("div",{className:"row align-items-center p-2 m-0",children:[Object(_.jsx)("div",{className:"col-sm-3 align-items-center text-dark ",children:"Quelles conditions sur les r\xe9ponses ? :"}),Object(_.jsx)("div",{className:"col-sm-9 align-items-center",children:b.map((function(e,t){return Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("div",{className:"col align-items-center p-2 my-auto",children:Object(_.jsx)("div",{className:"iq-card card-grey text-center shadow-sm m-0 text-dark ",children:x(e)})}),Object(_.jsx)("div",{className:"col align-items-center p-2",children:Object(_.jsx)("div",{className:"list-group list-group-horizontal m-0",children:N&&N.cond[e]?N.cond[e].map((function(t,n){return Object(_.jsxs)("button",{className:" list-group-item list-group-item-custom btn btn-outline-secondary ",type:"button",onClick:function(){return function(e,t){N.cond[e]=N.cond[e].filter((function(e){return e!==t})),console.log(N),k(N),m()}(e,t)},children:[t," "]},n)})):null})}),Object(_.jsx)("div",{className:"col align-items-center p-2 my-auto",children:Object(_.jsxs)("div",{className:"dropleft text-center",children:[Object(_.jsx)("button",{className:"btn btn-warning dropdown-toggle ",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"Quelle question ?"}),Object(_.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:ie.map((function(t,n){return Object(_.jsx)("li",{children:Object(_.jsxs)("label",{className:"dropdown-item ",onClick:function(){return function(e,t){N.cond[e]?N.cond[e].push(t):N.cond[e]=[t],k(N),m()}(e,t)},children:["Question n\xb0",t]})},n)}))})]})})]},t)}))})]})})]}),Object(_.jsxs)("div",{className:"border-bottom m-0 py-2 text-center",children:[Object(_.jsxs)("button",{className:"btn btn-secondary m-auto p-2 my-2 ",type:"button","data-toggle":"collapse","data-target":"#collapseNumConditions","aria-expanded":"false","aria-controls":"collapseExample",children:[Object(_.jsx)("i",{className:"las la-angle-down"})," Ajouter/Supprimer des conditions num\xe9riques ",Object(_.jsx)("i",{className:"las la-angle-down"})]}),Object(_.jsx)("div",{className:"collapse m-0 p-0",id:"collapseNumConditions",children:Object(_.jsxs)("div",{className:"col align-items-center p-2 m-0",children:[N&&N.cond.num?N.cond.num.map((function(e,t){return Object(_.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(_.jsx)("div",{className:"col-sm-3 align-items-center my-auto",children:Object(_.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark ",children:g(e.var)})}),Object(_.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:Object(_.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark ",children:e.op})}),Object(_.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:Object(_.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark",children:e.val})}),Object(_.jsx)("div",{className:"col-sm-3 align-items-center my-auto text-center",children:Object(_.jsx)("button",{className:"btn btn-danger ",onClick:function(){return function(e){console.log("supprimer",e),N.cond.num.splice(e,1),console.log(N.cond.num),k(N),m()}(t)},children:Object(_.jsx)("div",{"data-icon":"\ue053",className:"icon mt-1"})})})]},t)})):null,Object(_.jsx)("div",{children:Object(_.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(_.jsx)("div",{className:"col-sm-3 align-items-center my-auto",children:Object(_.jsx)(P.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quelle variable ?",options:ue,onChange:function(e){G||(G={}),(G={}).var=e.selectedKey[0],H(G),m()}},te)}),Object(_.jsx)("div",{className:"col-sm-3 align-items-center my-auto",children:["diabetic","difficult_intubation","gender"].includes(G.var)?Object(_.jsx)("div",{children:"est"}):Object(_.jsx)(P.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quel op\xe9rateur ?",options:be,onChange:function(e){G||(G={}),G.op=e.selectedKey[0],H(G),m()}},te)}),Object(_.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:["diabetic","difficult_intubation"].includes(G.var)?Object(_.jsx)(P.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quelle valeur ?",options:[{labelKey:"vrai",value:"Vrai"},{labelKey:"faux",value:"Faux"}],onChange:Ne},G.var):Object(_.jsxs)("div",{children:[" ","gender"===G.var?Object(_.jsx)(P.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quelle valeur ?",options:[{labelKey:"F",value:"F"},{labelKey:"M",value:"M"}],onChange:Ne},G.var):Object(_.jsx)("input",{type:"number",className:"form-control ",placeholder:"Quelle valeur ?",onChange:Ne})," "]})}),Object(_.jsx)("div",{className:"col-sm-3 align-items-center text-center my-auto",children:Object(_.jsx)("button",{className:"btn btn-warning w-100 ",onClick:function(){G.var&&G.val&&["diabetic","difficult_intubation","gender"].includes(G.var)?(N.cond.num.push({var:G.var,op:"est",val:G.val}),k(N),m()):G.var&&G.op&&G.val&&(N.cond.num.push({var:G.var,op:G.op,val:G.val}),k(N),m())},children:"Valider"})})]})})]})})]}),Object(_.jsxs)("div",{className:"border-bottom m-0 py-2 text-center",children:[Object(_.jsxs)("button",{className:"btn btn-secondary m-auto p-2 my-2 ",type:"button","data-toggle":"collapse","data-target":"#collapsePreCheck","aria-expanded":"false","aria-controls":"collapseExample",children:[Object(_.jsx)("i",{className:"las la-angle-down"})," Ajouter/Supprimer des conditions pour que la question soit pr\xe9-check\xe9e ",Object(_.jsx)("i",{className:"las la-angle-down"})]}),Object(_.jsx)("div",{className:"collapse m-0 p-0",id:"collapsePreCheck",children:Object(_.jsxs)("div",{className:"col align-items-center p-2 m-0",children:[N&&N.pre_check?N.pre_check.if.map((function(e,t){return Object(_.jsxs)("div",{children:[t?Object(_.jsx)("div",{className:"mx-auto w-50 border-top border-bottom border-light",children:"et"}):Object(_.jsx)("div",{className:"mx-auto w-50 border-top border-light"}),e.map((function(e,n){return Object(_.jsxs)("div",{children:[n?Object(_.jsx)("div",{children:"ou"}):null,Object(_.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(_.jsx)("div",{className:"col-sm-3 align-items-center my-auto",children:Object(_.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark ",children:h.includes(e.var)?g(e.var):"Question "+e.var})}),Object(_.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:Object(_.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark",children:e.op?e.op:"est"})}),Object(_.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:Object(_.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark",children:h.includes(e.var)?e.val:x(e.val)})}),Object(_.jsx)("div",{className:"col-sm-3 align-items-center my-auto text-center",children:Object(_.jsx)("button",{className:"btn btn-danger ",onClick:function(){return function(e,t){N.pre_check.if[e].splice(t,1),N.pre_check.if[e].length||N.pre_check.if.splice(e,1),N.pre_check.if.length||(N.pre_check=null),k(N),m()}(t,n)},children:Object(_.jsx)("div",{"data-icon":"\ue053",className:"icon mt-1"})})})]},t)]})}))]})})):null,N&&N.pre_check?Object(_.jsx)("div",{className:"row mx-auto w-50 justify-content-md-center py-2 border-top",children:Object(_.jsx)("div",{className:"col-sm-2 align-items-center my-auto",children:Object(_.jsx)("div",{className:"iq-card card-grey shadow-sm text-center m-0 text-dark",children:x(N.pre_check.then)})})}):null,Object(_.jsx)("div",{children:Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(_.jsx)("div",{className:"col-sm-3 align-items-center my-auto",children:Object(_.jsx)(P.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Et/Ou",options:[{labelKey:"and",value:"Et",isSelected:!0},{labelKey:"or",value:"Ou"}],onChange:function(e){e.selectedKey[0]&&(X.type=e.selectedKey[0]),Z(X),m()}},te)}),Object(_.jsx)("div",{className:"col-sm-3 align-items-center my-auto",children:Object(_.jsx)(P.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quelle variable ?",options:me,onChange:function(e){(X={type:X.type,then:N.pre_check&&N.pre_check.then?N.pre_check.then:null}).var=e.selectedKey[0],Z(X),m()}},te)}),Object(_.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:["age","yearofbirth"].includes(X.var)?Object(_.jsx)(P.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quel op\xe9rateur ?",options:be,onChange:function(e){X.op=e.selectedKey[0],Z(X),m()}},X.var):Object(_.jsx)("div",{children:"est"})}),Object(_.jsx)("div",{className:"col-sm-3 align-items-center my-auto",children:["diabetic","difficult_intubation"].includes(X.var)?Object(_.jsx)(P.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quelle valeur ?",options:[{labelKey:"vrai",value:"Vrai"},{labelKey:"faux",value:"Faux"}],onChange:ke},X.var):Object(_.jsxs)("div",{children:[" ","gender"===X.var?Object(_.jsx)(P.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quelle valeur ?",options:[{labelKey:"F",value:"F"},{labelKey:"M",value:"M"}],onChange:ke},X.var):Object(_.jsxs)("div",{children:[" ",Number.isInteger(X.var)?Object(_.jsx)(P.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quelle valeur ?",options:oe,onChange:ke},X.var):Object(_.jsx)("input",{type:"number",className:"form-control ",placeholder:"Quelle valeur ?",onChange:ke},X.var)]})]})})]}),Object(_.jsxs)("div",{className:"row justify-content-md-center py-2",children:[Object(_.jsx)("div",{className:"col-sm-3 align-items-center my-auto ",children:Object(_.jsx)(P.a,{className:"w-100 ",selectStyle:"btn border",placeholder:"Quel pre-check ?",options:je,onChange:function(e){e.selectedKey[0]&&(X.then=e.selectedKey[0]),Z(X),m()}},X.var+N.check.length)}),Object(_.jsx)("div",{className:"col-sm-3 align-items-center ",children:Object(_.jsx)("button",{className:"btn btn-warning w-100  ",onClick:function(){N.pre_check&&(N.pre_check.then=X.then,k(N),m())},children:"Modifier le precheck"})}),Object(_.jsx)("div",{className:"col-sm-3 align-items-center text-center my-auto",children:Object(_.jsx)("button",{className:"btn btn-warning w-100  ",onClick:function(){return console.log(X),void(X.var&&X.val&&X.then&&(!["age","yearofbirth"].includes(X.var)||X.op)&&(N.pre_check||(N.pre_check={if:[],then:null}),N.pre_check.then=X.then,X.op||(h.includes(X.var)?X.op="est":X.op=null),"and"!==X.type&&N.pre_check.if.length?"or"===X.type&&(console.log(N.pre_check.if.length),N.pre_check.if[N.pre_check.if.length-1].push({var:X.var,val:X.val,op:X.op})):N.pre_check.if.push([{var:X.var,val:X.val,op:X.op}]),k(N),m()))},children:"Valider"})})]})]})})]})})]})]}):null,Object(_.jsxs)("div",{className:"row align-items-center p-2 m-0",children:[Object(_.jsx)("div",{className:"col-sm-4 align-items-center text-center",children:Object(_.jsx)("button",{className:"btn btn-danger  ",onClick:function(){console.log(a,r),a=a.filter((function(e){return e.checklist_id!==r})),console.log(a),o(a.length?a[0].checklist_id:" -"),n=a.length?a[0]:null,c(n),s(a),pe(n)},children:"Supprimer la checklist"})}),Object(_.jsx)("div",{className:"col-sm-4 align-items-center text-center",children:Object(_.jsx)("button",{className:"btn btn-warning  ",onClick:function(){return y(n)},children:"Sauvegarder la checklist"})}),Object(_.jsx)("div",{className:"col-sm-4 align-items-center text-center",children:Object(_.jsx)("button",{className:"btn btn-danger ",onClick:xe,children:"Supprimer la question"})})]})]})}function L(e){e.props;return Object(_.jsx)("div",{className:"",children:Object(_.jsx)("div",{className:"card-inv text-center",children:Object(_.jsxs)("div",{className:"card-body",children:[Object(_.jsx)("h5",{className:"card-title m-0 text-custom",children:"SLS Checklist App"}),Object(_.jsx)("p",{className:"card-text text-custom m-0",children:"v0.8.1.1"}),Object(_.jsx)("p",{className:"card-text text-custom m-0",children:"D\xe9velopp\xe9 par Th\xe9o Stassen"}),Object(_.jsx)("p",{className:"card-text text-custom",children:"theo.stassen@protonmail.com"})]})})})}function D(e){var t=e.props,n=t.patientList,l=t.currentPatient,c=t.setCurrentPatient,a=t.setIsDict,s=t.setResult,i=t.setIsPreCheckDone,r=t.forceUpdate;return Object(_.jsx)("div",{className:"container iq-card p-2 py-3 ",children:Object(_.jsxs)("div",{className:"row align-items-center m-0",children:[Object(_.jsx)("div",{className:"col-sm-4 align-items-center text-dark",children:"Patient Actuel :"}),Object(_.jsx)("div",{className:"col-sm-4 align-items-center ",children:Object(_.jsxs)("div",{className:"iq-card bg-primary text-center  m-0",children:[l.firstname,"\xa0",l.lastname]})}),Object(_.jsx)("div",{className:"col-sm-4 align-items-center ",children:Object(_.jsxs)("div",{className:"dropdown text-center",children:[Object(_.jsx)("button",{className:"btn btn-secondary btn-round dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-expanded":"false",children:"S\xe9lectionnez le patient"}),Object(_.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:n.map((function(e,t){return Object(_.jsx)("li",{children:Object(_.jsxs)("label",{className:"dropdown-item ",onClick:function(){return function(e){var t=n.filter((function(t){return t.id===e}))[0];c(t),s({});var l={};b.forEach((function(e){l[e]={0:!0}})),a(l),i([]),r()}(e.id)},children:[e.firstname,"\xa0",e.lastname]})},t)}))})]})})]})})}function V(e){var t=e.init_items,n=e.item,c=e.dicts,a=e.forceUpdate,s=e.values_filter_cond,r=e.creationMode,o=e.currentId,u=e.warningId,m=Object(i.a)(c,9),j=m[0],h=m[1],p=m[2],v=m[3],g=m[4],O=m[5],y=m[6],N=m[7],k=(m[8],Object(l.useState)(!1)),w=Object(i.a)(k,2),C=w[0],S=w[1],q=function(e){var l=!j[e][n.id],c=b.filter((function(t){return t!==e}));l?(v[n.id]={name:n.name,answer:e},F(t,t,n.id,j,h,v,c)):(delete v[n.id],F(t,t,n.id,j,h,v,[e])),g(v),j[e][n.id]=l,c.forEach((function(e){j[e][n.id]=!1})),h(j)};n.pre_check&&!O.includes(n.id)&&(console.log("enter precheck",n,j),n.pre_check.if.every((function(e){return e.some((function(e){return e.op?f(p[e.var],e.op,e.val):j[e.val][e.var]}))}))&&(q(n.pre_check.then),O.push(n.id),y(O)));var M=null,K=null;return n.values&&(K=s(n.values,j,p,r)).forEach((function(e){return!N.includes(e.id)&&e.check.length?N.push(e.id):null})),K&&K.length&&(M=Object(_.jsx)("ul",{className:"mb-0",children:K.map((function(e,n){return Object(_.jsx)(V,{init_items:t,item:e,dicts:c,forceUpdate:a,values_filter_cond:s,creationMode:r,currentId:o,warningId:u},n)}))})),Object(_.jsxs)("div",{className:"container p-0 mt-3 mx-auto ",children:[u===n.id?Object(_.jsxs)("div",{className:" alert text-white bg-warning rounded",role:"alert",children:[Object(_.jsx)("div",{className:"iq-alert-icon",children:Object(_.jsx)("i",{className:"ri-alert-fill"})}),Object(_.jsx)("div",{className:"iq-alert-text",children:"Vous n'avez pas r\xe9pondu \xe0 cette question"})]}):null,Object(_.jsxs)("div",{id:"question"+n.id,className:"row align-items-center m-0 p-0"+(r&&o===n.id?" border border-danger ":" "),children:[Object(_.jsxs)("div",{className:"col list-group list-group-horizontal m-0 p-0 w-auto",children:[Object(_.jsx)("div",{className:"list-group-item m-0 p-0  bg-info text-center shadow-sm my-auto",children:Object(_.jsx)("h5",{className:"card-body p-auto ",children:n.id})}),Object(_.jsxs)("div",{className:"list-group-item m-0 p-0 w-100 shadow-sm h-auto text-dark",children:[n.comment?Object(_.jsx)("div",{className:"alert alert-light m-0 mt-0 border-0 text-primary my-auto",role:"alert",children:n.comment}):null,Object(_.jsx)("div",{className:"card-body my-auto",children:n.name})]})]}),n.check.length?Object(_.jsx)("div",{className:"col-md-auto p-0 pl-3",children:Object(_.jsxs)("div",{className:"list-group list-group-horizontal ",children:[n.check.map((function(e,t){return["text","list"].includes(e.split("_")[0])?null:Object(_.jsxs)("label",{className:"list-group-item list-group-item-custom btn m-0"+(n.color&&0===n.color[t]?" btn-outline-success":n.color&&1===n.color[t]?" btn-outline-danger":" btn-outline-secondary"),children:[Object(_.jsx)("input",{type:"checkbox","aria-label":"Checkbox",checked:j[e]&&j[e][n.id]?1:0,onChange:function(t){q(e),a()}}),"\xa0",x(e)]},t)})),n.check.includes("text")?Object(_.jsx)("input",{className:"form-control w-100 mb-0 bg-white",type:"text ","aria-label":"text input",placeholder:"Ins\xe9rez ici",onChange:function(e){var t=e.target.value;v[n.id]={name:n.name,answer:t},g(v)}}):null,n.check[0].split("_").includes("list")?Object(_.jsx)(P.a,{className:" w-100 my-auto ",selectStyle:"py-2 px-4 btn btn-outline-dark bg-white text-dark",options:function(e){console.log(e);var t=d[e];console.log(t);var n=[];return t.forEach((function(e){n.push({labelKey:e,value:e})})),n.push({labelKey:"other",value:"Autre"}),n}(n.check[0].split("_")[1]),isMultiSelect:!1,placeholder:"Aucun",onChange:function(e){var t=e.selectedValue[0];"other"===e.selectedKey[0]?(delete v[n.id],g(v),S(!0)):(v[n.id]={name:n.name,answer:t},g(v),S(!1))}},n.check[0].split("_")[1]):null,C?Object(_.jsx)("input",{className:"form-control w-100 ml-2 mb-0 bg-white",type:"text ","aria-label":"text input",placeholder:"Ins\xe9rez ici",onChange:function(e){var t=e.target.value;v[n.id]={name:n.name,answer:t},g(v)}}):null]})}):Object(_.jsxs)("div",{className:"col-sm-6",children:[" ",null," "]})]}),M]})}function F(e,t,n,l,c,a,s){var i=!1;t.cond&&s.forEach((function(e){t.cond[e]&&t.cond[e].includes(n)&&(b.forEach((function(e){l[e][t.id]=!1})),delete a[t.id],i=!0)})),t.values&&t.values.length&&t.values.forEach((function(t){F(e,t,n,l,c,a,s)})),n!==t.id&&i&&F(e,e,t.id,l,c,a,s)}function B(e){var t=e.section_title,n=e.index;return Object(_.jsx)("div",{className:"card p-2 px-4 mb-2 text-primary shadow-sm border-bottom border-dark "+(n?"border-top":"rounded rounded-0-bottom"),children:t})}n(144);function J(e){var t=e.visibleList,n=e.result,l=e.import_csv_result,c=(e.checklist,e.setWarningId);function a(e,t,n){for(var l=e.sort((function(e,t){return e>t})),a=0;a<l.length;a+=1)if(!t[l[a]])return n&&c(l[a]),"question"+l[a-1];return n&&c(0),""}return Object(_.jsx)("div",{className:"container iq-card  mt-5 text-center p-2 shadow",children:Object(_.jsx)("a",{onClick:function(){return""===a(t,n,!0)?l():null},href:"#"+a(t,n,!1),className:"",children:Object(_.jsx)("button",{className:"btn btn-warning text-center w-100 rounded b",children:"Valider la checklist"})})})}function T(e){e.props;var t=m,n=Math.ceil(t.length/2),l=t.slice(0,n),c=t.length%2===0?t.slice(-n):t.slice(1-n);return Object(_.jsx)("div",{className:"container iq-card pt-3 pb-1",children:Object(_.jsxs)("div",{className:"row align-items-center",children:[Object(_.jsx)("div",{className:"col-sm-6 pr-2",children:l.map((function(e,t){return Object(_.jsxs)("div",{className:"col-sm-12 alert rounded "+(0===e.gravity?"bg-danger":1===e.gravity?"bg-warning":"bg-light text-dark"),role:"alert",children:[Object(_.jsxs)("div",{className:"iq-alert-text",children:["Alerte ",Object(_.jsxs)("b",{children:["Question ",e.question_id]})," : ",e.info]}),Object(_.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",children:Object(_.jsx)("i",{className:"ri-close-line text-dark"})})]})}))}),Object(_.jsx)("div",{className:"col-sm-6 pl-2",children:c.map((function(e,t){return Object(_.jsxs)("div",{className:"col-sm-12 alert rounded "+(0===e.gravity?"bg-danger":1===e.gravity?"bg-warning":"bg-light text-dark"),role:"alert",children:[Object(_.jsxs)("div",{className:"iq-alert-text",children:["Alerte ",Object(_.jsxs)("b",{children:["Question ",e.question_id]})," : ",e.info]}),Object(_.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",children:Object(_.jsx)("i",{className:"ri-close-line text-dark"})})]})}))})]})})}function R(){for(var e=Object(l.useReducer)((function(e){return e+1}),0),t=Object(i.a)(e,2)[1],n=[],c=0;c<r.length;c++)n.push(k(r[c],c));var a=Object(l.useState)(0),s=Object(i.a)(a,2),d=s[0],u=s[1],m=Object(l.useState)(n),j=Object(i.a)(m,2),h=j[0],p=j[1],v=Object(l.useState)(o),x=Object(i.a)(v,1)[0],g=Object(l.useState)(x[0]),f=Object(i.a)(g,2),y=f[0],N=f[1],w=Object(l.useState)(h.filter((function(e){return e.checklist_id===d}))[0]),S=Object(i.a)(w,2),q=S[0],M=S[1],E=Object(l.useState)({}),Q=Object(i.a)(E,2),I=Q[0],P=Q[1],F=Object(l.useState)([]),R=Object(i.a)(F,2),z=R[0],G=R[1],H=Object(l.useState)([]),W=Object(i.a)(H,2),Y=W[0],X=W[1],Z=Object(l.useState)(0),$=Object(i.a)(Z,2),ee=$[0],te=$[1],ne=Object(l.useState)(q&&q.values.length?q.values[0]:null),le=Object(i.a)(ne,2),ce=le[0],ae=le[1],se=Object(l.useState)(0),ie=Object(i.a)(se,2),re=ie[0],oe=ie[1],de=Object(l.useState)(0),ue=Object(i.a)(de,2),me=ue[0],be=ue[1],je=Object(l.useState)(null),he=Object(i.a)(je,2),pe=he[0],ve=he[1],xe={};b.forEach((function(e){xe[e]={0:!0}}));var ge=Object(l.useState)(xe),fe=Object(i.a)(ge,2),Oe=fe[0],ye=fe[1],Ne=q?q.num_values:[],ke={};Ne.forEach((function(e){ke[e.var]=e.val}));for(var we=0,_e=Object.entries(y);we<_e.length;we++){var Ce=Object(i.a)(_e[we],2),Se=Ce[0],qe=Ce[1];ke[Se]=qe}ke.age=function(e){var t=e.split("/");return(new Date).getFullYear()-t[2]}(ke.dateofbirth);var Me=null;z=[],q&&q.values&&(Me=U(q.values,Oe,ke,re)).forEach((function(e){return e.check.length?z.push(e.id):null}));var Ke=[Oe,ye,ke,I,P,Y,X,z,G];function Ee(){for(var e=[["id","name","answer"]],t=0,n=Object.entries(I);t<n.length;t++){var l=Object(i.a)(n[t],2),c=l[0],a=l[1];e.push([c,a.name,a.answer])}new O(e,"my_csv.csv").download(!0)}return Object(_.jsxs)("div",{className:"min-vh-100 content-page iq-bg-info",children:[Object(_.jsxs)("div",{children:[Object(_.jsx)(C,{props:{setCreationMode:oe,setCreditMode:be,trimmedCanvasUrl:pe,checklistList:h,swapchecklist:function(e){u(e),q=h.filter((function(t){return t.checklist_id===e}))[0],M(q),P({});var t={};return b.forEach((function(e){t[e]={0:!0}})),ye(t),X([]),console.log("isdict after swapchecklist",Oe),q},import_csv_result:Ee,result:I}}),me?Object(_.jsx)(L,{props:null}):Object(_.jsxs)("div",{children:[re?Object(_.jsx)(A,{props:{checklist:q,setChecklist:M,checklistList:h,setChecklistList:p,checklistId:d,setChecklistId:u,forceUpdate:t,setResult:P,setIsDict:ye,init_dict:xe,setIsPreCheckDone:X,currentQuestion:ce,setCurrentQuestion:ae}}):Object(_.jsxs)("div",{children:[Object(_.jsx)(D,{props:{patientList:x,currentPatient:y,setCurrentPatient:N,setIsDict:ye,setResult:P,setIsPreCheckDone:X,init_dict:xe,forceUpdate:t}}),Object(_.jsx)(T,{props:{}})]}),Object(_.jsx)("div",{className:"container p-0 border-bottom border border-dark rounded shadow",children:Me?Me.map((function(e,n){return Object(_.jsxs)("div",{children:[e.section_title?Object(_.jsx)(B,{section_title:e.section_title,index:n}):Object(_.jsx)("div",{className:n?"border-dark border-top":""}),Object(_.jsx)("div",{className:"mb-3 px-3",children:Object(_.jsx)(V,{init_items:q,item:e,dicts:Ke,forceUpdate:t,values_filter_cond:U,creationMode:re,currentId:ce.id,warningId:ee},n)})]})})):null}),re?null:Object(_.jsx)(J,{visibleList:z,result:I,import_csv_result:Ee,checklist:q,setWarningId:te}),re?null:Object(_.jsx)(K,{props:{sigpad:{},setTrimmedCanvasUrl:ve}})]})]}),Object(_.jsx)("div",{children:Object(_.jsx)("nav",{className:"navbar",children:Object(_.jsx)("label",{className:"navbar-brand",children:null})})})]})}function U(e,t,n,l){return e.filter((function(e){return Object.keys(e.cond).every((function(n){return"num"===n||!e.cond[n]||e.cond[n].every((function(e){return t[n][e]}))}))&&(l||e.cond.num.every((function(e){return!n[e.var]||f(n[e.var],e.op,e.val)})))}))}var z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,145)).then((function(t){var n=t.getCLS,l=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),l(e),c(e),a(e),s(e)}))};s.a.render(Object(_.jsx)(c.a.StrictMode,{children:Object(_.jsx)(R,{})}),document.getElementById("root")),z()},74:function(e,t,n){},75:function(e,t,n){}},[[143,1,2]]]);
//# sourceMappingURL=main.1c703781.chunk.js.map